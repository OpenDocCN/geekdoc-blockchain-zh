© 作者等，独家许可 Springer Nature Switzerland AG 2022Y. Maleh 等(eds.)针对物联网的区块链技术的进展物联网技术，通信和计算[`doi.org/10.1007/978-3-030-93646-4_15`](https://doi.org/10.1007/978-3-030-93646-4_15)

# 将先进的无线网络集群树拓扑应用于在受限物联网平台中优化基于区块链的 Covid-19 卫生通行证安全

Sanaa El Aidi^(1  ), Fatima Zahra Hamza^(1  ), Siham Beloualid^(1), Abderrahim Bajit^(1), Habiba Chaoui^(1) 和 Ahmed Tamtaoui^(2  )(1)Laboratory of Advanced Systems Engineering (ISA), National School of Applied Sciences, Ibn Tofail University, Kenitra, Morocco(2)National Institute of Posts and Telecommunications (INPT-Rabat), SC Department, Mohammed V University, Rabat, MoroccoFatima Zahra Hamza 电子邮件: fatimazahra.hamza@uit.ac.maAhmed Tamtaoui 电子邮件: tamtaoui@inpt.ac.ma 关键词 AT2 区块链 CoAPCoAP 客户端 CoAP *服务器* 物联网 Python 微控制器 AESSHA256 人工智能集群树

## 1 引言

物联网是一组连接多个物联网对象的基础设施，这些对象执行一个或多个功能，并通过互联网进行通信。物联网允许管理对象之间的通信以及数据的传输和访问 [1]。物联网是一个必须在尊重安全和保密要求的同时保证对象之间通信的网络。

为了确保安全并对抗网络攻击，区块链是提供保护数据的几种解决方案之一。区块链是一种存储技术，其中包含了多个用户之间通信的所有信息。它确保了安全的三个主要要求：(1) 保密性，即只有用户可以读取消息；(2) 完整性，确保消息被接收为原样；以及(3) 可用性，服务对用户可用。

BC 使用公钥作为用户的身份。它允许发送者指定接收者。每次交换都附带一个无法修改或删除的密钥，以防止系统受到外部干扰。然后，BC 提供了高级别的保密性 [2]。

区块链的特殊之处在于所有交易形成一个链条。物联网网络的每个节点都具有强大的加密，可以与其他节点进行安全交换，并允许对系统进行定期监控和安全更新。区块链透明地记录所有交易，以便在发生事故时可以识别错误源，并使系统能够立即解决问题。

区块链是一种管理点对点（P2P）网络中多个节点之间关联的数据库。P2P 功能允许多个对等方之间进行直接通信。节点可以使用私钥创建签名的交易以保证所有者的身份。它可以执行交易、传输或接收它，并创建新的区块并验证交易[3]。

所有节点的共识必须验证每个交易。多种共识算法确保交易可靠且规则得到遵守。有两种常见的算法：工作量证明（PoW）使用哈希函数，这是一种需要大量计算能力来计算验证交易唯一签名概率的函数。第二种算法是参与证明（PoP），它确保分布式节点在矿工找到解决方案之前验证解决方案，然后矿工才能将新区块添加到区块链中。

共识算法因其复杂性而臭名昭著，需要大量的计算和验证时间。然而，多种研究表明，使用异步可信转账（AT2）实现去中心化资产转移系统并不真正需要共识[4]。在授权或小规模未经授权的网络中，AT2 可以通过使用法定人数验证交易来验证交易的正确性，其中法定人数检查动作是否正确以验证它；或者在全球未经授权的网络中，通过随机选择特定数量节点的观点来验证交易。

在新冠疫情危机期间，危机的影响非常强烈，并出现了几种组织变化：封锁和解封、远程办公、旅行限制等。

许多组织迫切面临着紧急情况下的快速调整。为此，使用通讯技术对于维持人与人之间的“正常”生活至关重要。病毒促使多个研究人员和决策者寻找解决方案，以保持人与人之间的社交活动，像在新冠疫情之前一样过日常生活，并通过一些规则来保护他们的生命，如社交距离、戴口罩和接种疫苗。

在危机期间，许多创新和调整被部署。区块链被用于保护其中大部分创新。我们引用了项目[5]，该项目提出了一种通过跟踪患者及其亲属的轨迹来减少新冠病毒传播的解决方案。通过区块链平台开发了保护用户时空信息的隐私保护。

印度尼西亚尼尔玛大学的团队提出了一种使用人工智能监测人与人之间社交距离的解决方案[6]。该提议系统利用静态闭路电视摄像头和装备有镜头的无人机，采用快速卷积区域神经网络（RCNN）和“一次性”（YOLO）模型实时识别物体（例如人）。还可以使用高效的基于欧几里得的方法计算两个人之间的距离。随着区块链技术的出现，物理层和行政服务可以可靠安全地交换数据。社交距离违规罚款也可以使用区块链驱动的钱包进行支付。在不遵守距离规则的情况下，使用区块链支付罚款的平台也被保护起来。疫情期间患者数据安全问题成为各国政府面临的挑战。针对这一问题进行了研究，以阐明使用区块链在人与政府之间安全准确地共享信息以及进行接触追踪的好处[7–9]。

在这项工作中，我们实现了一个智能、同步和安全的医疗物联网平台，通过一系列测试监测公共区域。现场的人必须出示其接种疫苗的 QR 码。首先进行读取此 QR 码的第一次测试。如果代码验证通过，我们进行第二个测试，使用面部识别算法验证对应于接种代码的人的身份。在积极的情况下，该人将能够进入公共区域。仍未接种疫苗的公民必须提供不超过 48 小时的阴性 PCR 检测。然后我们进行两个验证测试，一个是读取 PCR 检测的条形码，另一个是对其携带者进行面部识别。在一个人既未出示接种证书也未出示 PCR 检测的情况下，我们开发了一个带有三个物联网节点的策略。

第一次测试是测量公民的体温。如果超过 37 摄氏度和/或公民超过时间，则拒绝进入公共区域。如果温度低于 38 摄氏度，则我们进入第三个节点。这个节点由射频识别（RFID）识别客户物联网（IoT）对象组成，然后确定公民的身份和健康信息。如果公民超过指定时间或提供的信息错误，则拒绝访问。如果第三节点的结果是积极的，则我们进入最后一个节点，它基于面部识别原理。该节点验证系统是否使用公民的照片识别其面部和身份以访问公共区域。

我们的平台利用星际文件系统（IPFS）作为其核心系统来存储安全数据并将其分发到其他节点。在 IPFS 中，初始化存储库生成公钥/私钥并形成一个本地文件夹，其中包含 IPFS 配置并从节点存储存储库对象。节点 ID 是通过使用其公钥的哈希生成的。对等体受限于为对等体之间的文件分发过程准备的私有 IPFS 网络。对等体可以访问在 IPFS 上发布的文件以保留在本地的副本[10, 11]（图 1）。![](img/513458_1_En_15_Fig1_HTML.png)

图 1

智能安全的静态/动态医疗物联网平台

## 2 卫生通行证基于区块链的物联网平台

我们的工作包括保护数据传输和存储，并且对于传输，我们首先通过使用 RSA-SHA256 加密算法保护 TLS 通信，并且我们还在 CoAP 协议上添加了一个安全层，使用 RSA/AES-SHA256 算法来分析流量，并在执行、内存占用和能源消耗方面找到最佳方案，并且对于数据存储安全，我们使用了 AT2（异步可信传输）区块链技术，这是一类非共识算法，我们使用 IPFS 作为中心系统来存储安全数据并将其分发到 P2P 网络中的其他节点。

### 医疗物联网应用协议 MQTT/CoAP

从已经进行的研究中发现，物联网平台容易受到网络系统的攻击，特别是对于需要更好安全性来确保机密性和数据完整性并保护患者隐私的医疗保健平台。出于这个原因，我们考虑在 MQTT 和 CoAP 等物联网通信协议上添加安全层。

为了根据不同的标准选择最佳的物联网通信协议，我们比较了以下两种协议：

+   MQTT 协议被定义为基于发布-订阅架构的通信协议，使用 TCP/IP 协议。它使用三种类型的服务质量来确保发送/接收消息的质量更好。我们定义了第一种服务质量 QoS0，它用于仅发送一次消息，而无需确认收据。第二种类型的 QoS 是 QoS1，它允许至少发送一次消息，直到 MQTT 代理确认其接收。第三种类型的 QoS 是 QoS2，它发送消息时确保消息仅收到一次，从而避免重复[12–14]。

+   CoAP 协议是一种轻量级协议，使用 UDP 协议，基于 REST 架构，提供*get*、*post*、*put*和*delete*方法。它使用 4 字节的标头，适用于受限节点[15, 16]。

在这项工作中，我们使用 CoAP 协议，因为它与 MQTT 和 HTTP 协议相比，消耗的功率、能量、资源、带宽和延迟更少(Fig. 2)。![](img/513458_1_En_15_Fig2_HTML.png)

图 2

安全 CoAP 物联网客户端*有效载荷*的图序列

### 医疗物联网协议有效载荷安全

有几种加密算法可保证使用对称和非对称加密的五大安全支柱，如 RSA、数字签名算法(DSA)、AES、三重数据加密算法(3DES)、椭圆曲线密码学(ECC)、椭圆曲线集成加密方案(ECIES)和 SHA。对于我们的工作，我们选择了 RSA 和 AES 与 SHA256 结合使用[17, 18]。

在我们的平台上，我们使用了三种类型的加密算法 RSA，RSA 和 AES，以查看每种算法对平台的影响。第一个算法，AES，是一种对称密钥算法，发送方和接收方共享一个公共密钥，用于加密消息。我们还使用了基于两个密钥的 RSA 算法，即公钥和私钥。公钥用于加密消息，私钥也是从相同的两个质数导出的，并且该密钥用于解密消息，最后，我们使用了 AES 算法[19]。

我们还通过 RSA 算法和 SHA256 保障了 TLS 连接的安全性，TLS[20]是传输层的安全协议，用于提供和确保端到端通信的安全通道，该协议分两个阶段工作：第一个阶段基于密钥协商，两个参与方协商并同意一组加密算法，然后使用密钥交换的加密协议进行相互认证和建立共享会话密钥。在第二阶段，约定的会话密钥执行认证加密[21]。

### 医疗物联网网络拓扑

我们的医疗物联网平台是基于簇拓扑开发的，它是网状拓扑通信可靠性和星型拓扑快速、内存消耗少的优势的混合体。

*簇树*是树拓扑的一种情况，其中父节点及其子节点称为簇。由于存在父子关系，节点之间的关系不是平等的。簇树结构化为带有顶部节点的树，其他父节点是重定向器，树的末端是终端设备。簇树网络具有易于添加节点的优点，使其能够扩展并汇集星形和网状拓扑的优点。簇树结构允许网络预测数据交换的延迟时间，并且协调器对系统进行全局监控，并可以获取网络中所有节点的状态[22, 23]。

*网状拓扑* 是一种拓扑结构，其中每台计算机和网络设备都相互连接。这种拓扑的优势在于附近的节点消耗的能量较少，并且网络易于添加和移除设备。在出现故障时，这种拓扑结构的特点使其能够转向其他节点，系统可以继续工作。这种拓扑的缺点是它更复杂，需要更高的开销，增加了安装成本，通常需要更长的时间[24]。

*星型拓扑* 由一个协调器和节点组成。节点通过协调器相互通信。这种拓扑的优点是易于安装，数据传输时间短，因为只有主节点和电缆之间的部分可以通信。它在故障检测方面也很有效，因为每个设备只需要一个端口，不会发生冲突。节点之间的连接因此很容易，并且不需要大量的电缆。但是，主要问题是节点之间的交换取决于协调器，这涉及大量资源和定期维护。如果协调器发生故障，整个网络将停止工作，因此通信可靠性较低[25, 26]。

*树状拓扑* 由一个协调器、路由器和称为子节点的终端节点组成。每个子节点只能与其父路由器或核心节点通信。这是星型和网状拓扑的组合。树状拓扑的优点在于，如果一个节点出现故障，其他节点可以继续正常运行。然而，如果父节点断开连接，子节点将无法与网络交换。节点之间的连接电缆长度随网络长度增加而增加，使系统维护更加复杂，受限制，并增加了安装网络的成本[27, 28]。

### 基于医疗物联网的区块链数据存储安全

该平台的开发基于不同的拓扑结构（星型、树型、网状、簇树），具体取决于区域类型（城市、旅游、工业、体育、商业等）。我们还使用了两种安全机制来保护信息：连接安全和负载安全。对于连接安全，我们使用了 SSL，对于负载安全，我们使用了 RSA/AES-SHA256 加密算法，以提供更好的安全性，涉及执行时间、内存空间占用和能源消耗。至于数据存储，区块链用于使信息分散化，因为它通过将信息收集在区块中来工作。我们的平台主要依赖于 CoAP 通信协议，并且使用 FastAPI 框架在 Python 环境中实现了 IoT CoAP 服务器的应用模型。Python 应用程序管理 AT2 区块链和 IPFS 对等网络，向 IPFS 私有网络添加和检索文件，加密文件内容，并通过 REST 服务公开其功能，如图 1 所示。前端展示了 IoT 客户节点和 IoT Web 客户端，它们使用 MQTT 或 CoAP 协议与后端通信；后端包含提供互操作性的 RESTful 服务，允许请求系统通过使用一组预定义的无状态操作来访问和操作 Web 资源的文本表示。此外，后端还包括使用 AT2 桥接和 IPFS API 与区块链和 P2P 网络通信的存储库，并通过 RESTful Web 服务公开应用程序功能；最后，P2P 网络包含部署在 Azure 云中的 AT2 区块链和 IPFS 网络，通过 HTTPS 安全地服务于流量[29]。

对等网络（P2P）是一组节点彼此共享文件的集合。此网络中的每个节点具有相同的优先级，并执行与其他节点相同的任务[7]。此类型的网络不包含管理数据发送和接收的中心节点，因此每个节点可以根据其他节点的情况充当服务器和客户端。

为了确保我们平台的数据安全，我们使用了区块链技术，这被认为是一种可以以高效、透明、可验证和永久的方式记录两个参与方之间交易的开放和分布式账本技术，而这项技术用于在信任不存在或无法证明的不同实体之间建立信任。因此，这些实体愿意参与涉及共享数据的交易，否则他们可能不会这样做，或者他们将需要一个中介来完成这样的交易，因此，在数据交换交易中消除第三方促进了参与者的安全性和隐私性。这种数据去中心化的原则允许数据在一个公司生态系统内共享，而没有一个单一实体是独家负责的[7]，而且区块链通过创建具有端到端加密的不可更改的交易记录，提供了更好的安全性，从而排除了欺诈和未经授权的活动。此外，区块链数据存储在一个计算机网络上，几乎不可能被黑客攻击。此外，区块链可以比传统计算机系统更好地解决隐私问题，通过对数据进行匿名化并要求权限来限制访问。

区块链技术将使我们能够安全、真实、快速、廉价地保存文件共享交易及其详细信息。在我们提出的安全医疗物联网平台中，我们使用了 AT2（异步可信转移）区块链，这是一类无共识算法。

## 讨论

这项工作的目标是通过使用诸如 RSA/AES/SHA256 等加密算法在我们的平台上应用安全层，以及查看每种拓扑对我们平台的影响，另外实现最适合平台需求的最佳通信协议。因此，图表展示了在我们平台上实现 CoAP 协议的执行时间和内存占用的比较结果。我们采用了簇-**树**拓扑以确保我们平台的正常运行，并且应用了 RSA 和 AES 加密方法，最终采用了尽可能节省能量且非常难以破解的方法。![](img/513458_1_En_15_Fig3a_HTML.png)![](img/513458_1_En_15_Fig3b_HTML.png)![](img/513458_1_En_15_Fig3c_HTML.png)

图 3

所有场景的平均执行时间

根据之前的结果，我们注意到 MQTT 不支持消息标签化，这迫使客户端事先知道发送的消息的类型和格式以建立通信。与 CoAP 协议不同，后者提供了默认支持并提供了内置消息处理，节点可以连接。MQTT 也以其比 CoAP 更快的执行时间而闻名。MQTT 运行在基于连接建立和关闭的 TCP 上，这增加了开销并导致高内存使用。另一方面，CoAP 使用 UDP 协议，根据发送和忘记的原则工作，减少了消息的大小，从而减少了内存的使用。结果还显示，CoAP 需要更少的能量，因此消耗的资源比 MQTT 少。

为了安全起见，我们选择了 CoAP，因为 MQTT 是一种仅支持基于用户名和密码的最低级别安全性的协议。同时，CoAP 使用了多种加密和身份验证方法。

从这些结果（图 3 和 4; 表 1, 2, 和 3）中，我们可以观察到这种消耗是因为 RSA 是一种使用两个大密钥进行加密和解密（公钥和私钥）的非对称算法，这使得它能够提供很高的安全性，并且使其对任何攻击都非常坚固和强大。然而，这并不适合我们的平台，因为它的资源消耗很高。至于 AES，它是一种对称算法，只使用一个密钥进行加密和解密，这就是为什么它消耗的资源比 RSA 少得多（表 1, 2, 和 3），并且在通信、速度和数据安全方面都是物有所值的，因此在 IoT 平台上最值得推荐。

第一种情景的时间消耗和 RAM 占用

|   | 星形 | 树形 | 网状 | 群状 |
| --- | --- | --- | --- | --- |
| 时间（秒） | RSA | 10.13 | 17.46 | 20.12 | 12.47 |
| AES | 6.71 | 7.72 | 9.56 | 7.70 |
| RAM（Mb） | RSA | 244.6 | 249.4 | 268.0 | 251.0 |
| AES | 222.3 | 225.6 | 237.4 | 230.2 |

表 2

第二种情景的时间消耗和 RAM 占用

|   | 星形 | 树形 | 网状 | 群状 |
| --- | --- | --- | --- | --- |
| 时间（秒） | RSA | 13.38 | 17.46 | 21.38 | 14.91 |
| AES | 6.42 | 7.92 | 9.76 | 7.71 |
| RAM（Mb） | RSA | 189.3 | 179.5 | 207.5 | 199.5 |
| AES | 162.9 | 167.3 | 175.1 | 171.1 |

表 3

第三种情景的时间消耗和 RAM 占用

|   | 星形 | 树形 | 网状 | 群状 |
| --- | --- | --- | --- | --- |
| 时间（秒） | RSA | 11.93 | 15.72 | 18.95 | 11.89 |
| AES | 7.07 | 7.52 | 8.51 | 7.61 |
| RAM（Mb） | RSA | 200.7 | 204.8 | 219.0 | 208.7 |
| AES | 173.9 | 179.4 | 190.0 | 181.9 |

当涉及到安全算法 RSA 和 AES 时，AES 被认为是安全的。AES 密钥的大小几乎为 256 位，而 RSA 只有 112 位的安全性，这使得 AES 更加强大，抵御攻击。AES 的优点是它在处理过程中更快速和更强大。RSA 是一种非对称算法，因此它使用加密和解密密钥，而 AES 是一种对称算法，只使用一个密钥。

AES 是一种对称算法，只使用一个密钥进行加密和解密，这正是它比 RSA 消耗更少的原因。我们还发现，AES 可以在硬件和软件中实现。它使用更高长度的密钥大小，如 128、192 和 256 位进行加密。因此，它使 AES 算法更加强大，可以抵御黑客攻击，对于 128 位，大约需要 2128 次尝试才能破解。这使得它非常难以被破解；因此，它是一个非常安全的协议。

## 4 结论与展望

该开发平台将使我们能够通过控制公民进入公共区域来最小化 covid-19 的传播，并牢记有三种类型的公民：接种了疫苗的公民、进行了 PCR 测试的公民以及只有 RFID 标签的公民。该平台依赖于约束应用程序协议，以确保节点之间可靠的通信，它还依赖于簇树拓扑作为主要的网络拓扑结构。为了进一步保护节点之间的通信，我们选择了 AES-SHA256 加密算法来加密数据和信息的交换。

在未来的工作中，我们将实现其他安全方法，如 ECIES，并讨论诸如 6LoWPAN、Zigbee 和 LoRa 等射频协议，这些协议以其在物联网网络中的效率而闻名。![](img/513458_1_En_15_Fig4a_HTML.png)![](img/513458_1_En_15_Fig4b_HTML.png)![](img/513458_1_En_15_Fig4c_HTML.png)

图 4

所有场景的平均内存占用
