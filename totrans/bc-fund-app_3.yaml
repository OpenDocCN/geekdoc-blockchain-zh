- en: © The Author(s), under exclusive license to Springer Nature Switzerland AG 2022X.
    Yi et al.Blockchain Foundations and ApplicationsSpringerBriefs in Applied Sciences
    and Technology[https://doi.org/10.1007/978-3-031-09670-9_3](https://doi.org/10.1007/978-3-031-09670-9_3)
  id: totrans-0
  prefs: []
  type: TYPE_NORMAL
  zh: © 作者（们），在瑞士 Springer Nature AG 独家授权下 2022X. Yi 等。《区块链基础与应用》Springer 应用科学与技术简报[https://doi.org/10.1007/978-3-031-09670-9_3](https://doi.org/10.1007/978-3-031-09670-9_3)
- en: 3. Distributed Consensus
  id: totrans-1
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 3. 分布式共识
- en: 'Xun Yi^([1](#Aff6) [ ](#ContactOfAuthor6)), Xuechao Yang^([1](#Aff6) [ ](#ContactOfAuthor7)),
    Andrei Kelarev^([1](#Aff6) [ ](#ContactOfAuthor8)), Kwok Yan Lam^([2](#Aff7) [ ](#ContactOfAuthor9))
    and Zahir Tari^([1](#Aff6) [ ](#ContactOfAuthor10))(1)School of Computing Technologies,
    RMIT University, Melbourne, VIC, Australia(2)School of Computer Science and Engineering,
    Nanyang Technological University, Singapore, SingaporeXun Yi (Corresponding author)Email:
    [xun.yi@rmit.edu.au](mailto:xun.yi@rmit.edu.au)Xuechao YangEmail: [xuechao.yang@rmit.edu.au](mailto:xuechao.yang@rmit.edu.au)Andrei KelarevEmail:
    [andrei.kelarev@gmail.com](mailto:andrei.kelarev@gmail.com)Kwok Yan LamEmail:
    [kwokyan.lam@ntu.edu.sg](mailto:kwokyan.lam@ntu.edu.sg)Zahir TariEmail: [zahir.tari@rmit.edu.au](mailto:zahir.tari@rmit.edu.au)'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: Xun Yi^([1](#Aff6) [ ](#ContactOfAuthor6))，Xuechao Yang^([1](#Aff6) [ ](#ContactOfAuthor7))，Andrei
    Kelarev^([1](#Aff6) [ ](#ContactOfAuthor8))，Kwok Yan Lam^([2](#Aff7) [ ](#ContactOfAuthor9))
    和 Zahir Tari^([1](#Aff6) [ ](#ContactOfAuthor10))（1）澳大利亚皇家墨尔本理工大学计算技术学院，维多利亚州，墨尔本（2）新加坡南洋理工大学计算机科学与工程学院，新加坡，新加坡Xun
    Yi（通讯作者）电子邮件： [xun.yi@rmit.edu.au](mailto:xun.yi@rmit.edu.au)Xuechao Yang电子邮件：
    [xuechao.yang@rmit.edu.au](mailto:xuechao.yang@rmit.edu.au)Andrei Kelarev电子邮件：
    [andrei.kelarev@gmail.com](mailto:andrei.kelarev@gmail.com)Kwok Yan Lam电子邮件： [kwokyan.lam@ntu.edu.sg](mailto:kwokyan.lam@ntu.edu.sg)Zahir
    Tari电子邮件： [zahir.tari@rmit.edu.au](mailto:zahir.tari@rmit.edu.au)
- en: 3.1 Introduction
  id: totrans-3
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 3.1 引言
- en: Blockchain technology relies on several technical ingredients. Distributed consensus
    protocol is the key building block enabling blockchain’s decentralization. It
    allows all participants to establish agreement on the current state of the common
    ledger keeping a record of all transactions of the system without the assistance
    of any trusted central authority. A distributed consensus protocol determines
    conditions for communication of messages among the nodes and the decision-making
    process in blockchain community. The performance of the consensus protocol being
    employed is crucial for the effectiveness of the whole blockchain system, as it
    influences the communication capability, reliability, and scalability.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 区块链技术依赖于几个技术组成部分。分布式共识协议是实现区块链去中心化的关键构建块。它允许所有参与者对共同账本当前状态达成一致，记录系统所有交易，而无需任何可信任的中心权威机构的帮助。分布式共识协议确定节点之间消息通信的条件和区块链社区中的决策过程。所采用共识协议的性能对整个区块链系统的有效性至关重要，因为它影响通信能力、可靠性和可扩展性。
- en: 'The Bitcoin network applies the original Nakamoto consensus procedure, which
    relies on its *proof-of-work* (PoW) mining algorithm. This protocol helped Bitcoin
    to be established as a reliable digital currency effectively resisting the so-called
    double-spending attacks in a peer-to-peer decentralized network. The exponential
    growth of the Bitcoin network has led to the realization of several bottlenecks
    hindering the performance of the Bitcoin consensus and creating significant sustainability
    problems. In a large-scale cryptocurrency network, the Nakamoto consensus and
    its reliance on PoW mining inevitably lead to the following problems:'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 比特币网络采用原始中本聪共识过程，该过程依赖于其*工作量证明*（PoW）挖矿算法。这一协议帮助比特币有效地建立起一种可靠数字货币，在点对点去中心化网络中有效抵抗所谓的双重支付攻击。比特币网络的指数级增长导致了几个瓶颈的出现，阻碍了比特币共识的性能，并造成了重大的可持续性问题。在大规模加密货币网络中，中本聪共识及其对PoW挖矿的依赖不可避免地导致了以下问题：
- en: (1) unsustainable energy consumption,
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: （1）不可持续的能源消耗，
- en: (2) poor scalability and low throughput,
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: （2）可扩展性差和低吞吐量，
- en: (3) security weaknesses that may grow with the decreasing mining rewards.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: （3）可能随挖矿奖励减少而增长的安全弱点。
- en: For example, the transaction capacity of Bitcoin is approximately 7 transactions
    per second (TPS) and can be increased to at most 25 TPS by adjusting parameters
    without jeopardizing security [[13](#CR13)]. The Bitcoin network currently comprises
    approximately 10,000 nodes [[7](#CR7)]. If we compare these data to other financial
    networks, we see that, for example, the VISA network consists of over 50 million
    participants and processes up to 65,000 TPS [[36](#CR36)]. In 2019, it was noted
    that a single Bitcoin transaction consumed the amount of electricity equivalent
    to the daily power consumption of 21 average U.S. households [[15](#CR15)].
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，比特币的交易能力大约是每秒7笔交易（TPS），通过调整参数而无需危及安全，最多可以增加到25 TPS [[13](#CR13)]。目前比特币网络由大约10,000个节点组成
    [[7](#CR7)]。如果我们把这些数据与其他金融网络进行比较，我们会发现，例如，VISA网络由超过5000万参与者组成，处理速度可以达到65,000 TPS
    [[36](#CR36)]。2019年，有人指出，一个比特币交易消耗的电能相当于21个美国家庭一天的电力消耗 [[15](#CR15)]。
- en: In order to tackle these problems intrinsic in the PoW mining, the researchers
    have been investigating ways to reduce energy consumption by applying numerous
    alternative distributed consensus techniques such as proof-of-stake (PoS), proof-of-authority
    (PoA), and proof-of-elapsed-time (PoET), to name just of few examples. Cryptographic
    methods can be applied to achieve trust among the participants, enable more robust
    schemes for handling new blocks such as round-robin and committee-based block
    generation.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 为了解决PoW挖矿中固有的这些问题，研究人员一直在研究应用多种替代分布式共识技术，如权益证明（PoS）、权威证明（PoA）和流逝时间证明（PoET）等，以减少能源消耗，这只是举几个例子。密码学方法可以应用于实现参与者之间的信任，使处理新块的方案更加健壮，例如循环和基于委员会的块生成。
- en: Appropriate incentives that encourage honest participation in the blockchain
    network are another key components of a consensus protocol. Novel block processing
    schemes often encompass new incentive mechanisms promoting fairness for all participants
    and increasing the sustainability of the whole system. Examples of popular blockchain
    consensus protocols include Peercoin [[20](#CR20)], Bitcoin-NG [[17](#CR17)],
    Ouroboros (Cardano) [[19](#CR19)], Snow White [[14](#CR14)], EOSIO [[16](#CR16)],
    POA Network [[30](#CR30)], etc.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 适当的激励措施，鼓励诚实在区块链网络中的参与，是共识协议的另一个关键组成部分。新的区块处理方案通常包含新的激励机制，促进所有参与者的公平性，并提高整个系统的可持续性。流行的区块链共识协议的例子包括Peercoin
    [[20](#CR20)]、Bitcoin-NG [[17](#CR17)]、Ouroboros (Cardano) [[19](#CR19)]、Snow
    White [[14](#CR14)]、EOSIO [[16](#CR16)]、POA Network [[30](#CR30)] 等。
- en: 3.2 History of Consensus
  id: totrans-12
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 3.2 共识机制的历史
- en: Fault-tolerant (FT) distributed consensus algorithms have been actively investigated
    for a long time. A consensus in a distributed system corresponds to a situation
    where all participants agree on the same current values of a collection of variables.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 容错（FT）分布式共识算法已经得到了积极的研究很长时间。在分布式系统中，共识对应于所有参与者对一组变量的相同当前值达成一致的情况。
- en: 3.2.1 Byzantine Fault-Tolerant Consensus
  id: totrans-14
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 3.2.1 容错共识机制
- en: The concept of a Byzantine fault tolerance is central to the blockchain technology,
    since every blockchain must be protected against the broadest type of malicious
    behaviour and faults of the nodes. Recall that a *crash* of a network node occurs,
    when the node stops operating and fails to respond to the network messages. A
    *Byzantine fault* is a broad term describing a node, which is trying to conceal
    its malicious behaviour and may be carrying out some of the required step correctly,
    but at the same time and on its own discretion it can also exhibit any imaginable
    type of incorrect responses or malicious behaviour. It may be quite difficult
    for the honest participants in a consensus protocol to identify the Byzantine
    nodes and exclude their input from the outcomes, since these faulty nodes are
    doing their best to remain undetected and at the same time to subvert the outcomes
    of the protocol.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 拜占庭容错的概念是区块链技术的中心，因为每个区块链都必须保护节点最广泛的恶意行为和故障。回想一下，网络节点的*崩溃*是指节点停止运行，无法响应网络消息。拜占庭错误是一个广泛的术语，描述了一个试图隐藏其恶意行为的节点，它可能正确执行一些所需的步骤，但同时根据自己的判断，它也可以展示任何可以想象的不正确响应或恶意行为。对于共识协议中的诚实的参与者来说，识别拜占庭节点并从结果中排除他们的输入可能相当困难，因为这些有故障的节点正在尽其所能地保持不被发现，同时颠覆协议的结果。
- en: A consensus protocol is said to be *crash fault tolerant* (CFT) if it can tolerate
    a certain number of crash failures and achieve correct outcome despite these failures.
    Likewise, a consensus protocol is *Byzantine fault tolerant* (BFT) if it can remain
    resilient against a certain number of Byzantine failures and can continue normal
    operation achieving correct consensus outcome. Every BFT consensus protocol is
    also CFT, since the Byzantine nodes can imitate crashes at these nodes too.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 如果一个共识协议可以容忍一定数量的崩溃故障并在这些故障下取得正确的结果，则该协议被称为*崩溃容错*（CFT）。同样，如果一个共识协议可以抵抗一定数量的拜占庭故障并继续正常运行取得正确的共识结果，则该协议被称为*拜占庭容错*（BFT）。每个BFT共识协议也是CFT的，因为拜占庭节点也可以模仿这些节点的崩溃。
- en: In order for a consensus protocol to be a BFT consensus, the inequality ![$$N
    \ge 3f + 1$$](../images/516136_1_En_3_Chapter/516136_1_En_3_Chapter_TeX_IEq1.png)
    has to be satisfied in the corresponding network, where *N* is the number of the
    nodes in the network, and *f* is the number of the Byzantine nodes. This fundamental
    theorem was first proved by Pease et al. [[29](#CR29)] in 1980 and was later adapted
    to the BFT consensus framework. The proof uses induction starting with the induction
    base ![$$N = 3$$](../images/516136_1_En_3_Chapter/516136_1_En_3_Chapter_TeX_IEq2.png).
    In the proof, one or two nodes are left aside to make the number *N* divisible
    by 3, and then all the remaining nodes are partitioned into three groups of equal
    size so that all faulty nodes belong to one of the three groups. The readers are
    referred to [[4](#CR4), [29](#CR29)] for a complete proof.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 为了使共识协议成为一个BFT共识，相应的网络中必须满足不等式 ![$$N \ge 3f + 1$$](../images/516136_1_En_3_Chapter/516136_1_En_3_Chapter_TeX_IEq1.png)，其中
    *N* 是网络中的节点数，*f* 是拜占庭节点的数量。这个基本定理最早是由Pease等人于1980年证明的[[29](#CR29)]，后来被适应到BFT共识框架中。证明使用了归纳法，从归纳基础
    ![$$N = 3$$](../images/516136_1_En_3_Chapter/516136_1_En_3_Chapter_TeX_IEq2.png)
    开始。在证明中，留下一个或两个节点使得 *N* 可以被3整除，然后将所有剩余的节点划分为三个大小相等的小组，使得所有故障节点都属于这三个小组中的一个。读者可以参考[[4](#CR4),
    [29](#CR29)]获取完整的证明。
- en: 3.2.2 Practical Byzantine Fault Tolerance (PBFT)
  id: totrans-18
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 3.2.2 实用拜占庭容错协议（PBFT）
- en: 'Practical Byzantine fault tolerance (PBFT) was proposed by Castro and Liskov [[9](#CR9)]
    in the context of general distributed systems. Previous BFT consensus algorithms
    did not scale up well. The PBFT was the first BFT consensus protocol that was
    recognized for its practicality and has become broadly adopted. It applies state
    machine replication. The algorithm for processing messages is represented as a
    finite state machine, and all the nodes keep identical copies or replicas of the
    state machine. One node is chosen as a primary, and other nodes are called clients.
    The PBFT includes three subprotocols:'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 实用拜占庭容错协议（PBFT）是由Castro和Liskov在一般分布式系统的背景下提出的[[9](#CR9)]。之前的BFT共识算法扩展性不佳。PBFT是第一个被认为具有实用性的BFT共识协议，并得到了广泛采用。它采用了状态机复制。消息处理算法被表示为一个有限状态机，所有节点都保持状态机的相同副本或复制品。选择一个节点作为主节点，其他节点称为客户端。PBFT包括三个子协议：
- en: (1) Normal operation,
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: （1）正常运行，
- en: (2) Checkpoint,
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: （2）检查点，
- en: (3) View change.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: （3）视图变更。
- en: The normal-operation protocol is shown in Algorithm 3.1\. If there are no faulty
    nodes, then all values in the messages received by the node as responses are equal.
    Otherwise, the nodes choose the value that occurs in the majority of the responses,
    since this value corresponds to the replies from the honest nodes.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 正常运行协议如算法3.1所示。如果没有故障节点，那么节点收到的消息响应中的所有值都相等。否则，节点选择在响应中出现大多数的值，因为该值对应于诚实节点的回复。
- en: The checkpoint protocol serves as a logging tool that keeps a sliding window
    to track active operation requests. The latest stable checkpoint is used for safely
    discarding older requests in the operation log and facilitating the view-change
    protocol.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 检查点协议作为一种日志工具，保持一个滑动窗口以跟踪活动操作请求。最新的稳定检查点用于安全地丢弃操作日志中的旧请求，并促进视图变更协议。
- en: View-change messages are used to identify if the primary node is Byzantine,
    in which case the view-change protocol is activated. In the case of a primary
    failure, the view-change protocol is triggered at every replica that detects the
    timeout of the primary’s message. They expel the current primary and broadcast
    view-change messages to each other and count receptions. After receiving view-change
    messages from 2*f* peers, the next replica becomes the new primary and informs
    the rest to resume the normal operation.![](../images/516136_1_En_3_Chapter/516136_1_En_3_Figa_HTML.png)
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 视图变更消息用于确定主节点是否拜占庭式，如果是，则激活视图变更协议。在主节点失败的情况下，每个检测到主节点消息超时的副本都会触发视图变更协议。它们驱逐当前的主节点，并向彼此广播视图变更消息并进行接收计数。在接收到来自2*f*个同伴的视图变更消息后，下一个副本成为新的主节点并通知其余副本恢复正常操作。![](../images/516136_1_En_3_Chapter/516136_1_En_3_Figa_HTML.png)
- en: An algorithm depicts the operational protocol, with a request phase, pre-preparation
    phase, the preparation phase, the commit phase, and the reply phase.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 一个算法描述了操作协议，包括请求阶段、预准备阶段、准备阶段、承诺阶段和回复阶段。
- en: The message complexity of PBFT normal operation is ![$$O(N^2)$$](../images/516136_1_En_3_Chapter/516136_1_En_3_Chapter_TeX_IEq3.png)
    because of the messages in the prepare and commit phases. Every node requires
    receiving more than ![$$2f + 1$$](../images/516136_1_En_3_Chapter/516136_1_En_3_Chapter_TeX_IEq4.png)
    prepare or commit messages in the prepare or commit phase in order to process
    the next requested operation. This relies on at least ![$$2f + 1$$](../images/516136_1_En_3_Chapter/516136_1_En_3_Chapter_TeX_IEq5.png)
    honest nodes in the same state, in view of the assumption that ![$$N \ge 3f +
    1$$](../images/516136_1_En_3_Chapter/516136_1_En_3_Chapter_TeX_IEq6.png). Therefore,
    the remaining *f* Byzantine nodes cannot change the value accepted by the consensus
    of the majority. It follows that PBFT can tolerate *f* Byzantine faults when the
    inequality ![$$N \ge 3f + 1$$](../images/516136_1_En_3_Chapter/516136_1_En_3_Chapter_TeX_IEq7.png)
    holds. According to the fundamental 1/3 BFT threshold, this is the very best BFT
    performance that can be achieved. The readers are referred to [[9](#CR9), [37](#CR37)]
    for more details and rigorous proofs.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: PBFT正常操作的消息复杂度是![$$O(N^2)$$](../images/516136_1_En_3_Chapter/516136_1_En_3_Chapter_TeX_IEq3.png)，这是由于准备和承诺阶段的消息。每个节点都需要在准备或承诺阶段接收超过![$$2f
    + 1$$](../images/516136_1_En_3_Chapter/516136_1_En_3_Chapter_TeX_IEq4.png)个准备或承诺消息，以便处理下一个请求的操作。这依赖于至少![$$2f
    + 1$$](../images/516136_1_En_3_Chapter/516136_1_En_3_Chapter_TeX_IEq5.png)个诚实的节点在相同的状态下，考虑到假设![$$N
    \ge 3f + 1$$](../images/516136_1_En_3_Chapter/516136_1_En_3_Chapter_TeX_IEq6.png)。因此，剩余的*f*个拜占庭式节点不能改变大多数共识接受的价值。因此，当不等式![$$N
    \ge 3f + 1$$](../images/516136_1_En_3_Chapter/516136_1_En_3_Chapter_TeX_IEq7.png)成立时，PBFT可以容忍*f*个拜占庭式错误。根据基本1/3
    BFT阈值，这是可以达到的最佳BFT性能。读者可以参考 [[9](#CR9), [37](#CR37)] 获取更多详细信息和严格的证明。
- en: PBFT has inspired the development of various other consensus protocols enhancing
    the performance and security. The well-known examples of such protocols include
    Quorum/Update (QU) [[1](#CR1)], Hybrid Quorum (HQ) [[12](#CR12)], Zyzzyva (using
    speculative execution) [[21](#CR21)], FaB [[25](#CR25)], Spinning [[35](#CR35)],
    Robust BFT SMR [[10](#CR10)], and Aliph [[5](#CR5)]. The readers are referred
    to the tutorial [[6](#CR6)] for an overview of these protocols.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: PBFT激发了各种其他共识协议的发展，这些协议增强了性能和安全。这些协议中知名的例子包括Quorum/Update (QU) [[1](#CR1)]，混合Quorum
    (HQ) [[12](#CR12)]，使用投机执行的Zyzzyva (Zyzzyva) [[21](#CR21)]，FaB [[25](#CR25)]，Spinning
    [[35](#CR35)]，健壮的BFT SMR [[10](#CR10)]，和Aliph [[5](#CR5)]。读者可以参考教程 [[6](#CR6)]
    了解这些协议的概览。
- en: 3.3 An Overview of Blockchain Consensus
  id: totrans-29
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 3.3 区块链共识概览
- en: A blockchain network allows every participant to be both a client issuing transactions
    and a server validating and finalizing transactions. The data structure of the
    ledger in the blockchain consists of chronologically ordered and hash-chained
    blocks, each of which requires consensus to be included in the ledger. Each block
    contains a collection of valid transactions. The transactions across the blockchain
    should be consistent with each other to prevent double spending, overspending,
    and misappropriation.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 区块链网络允许每个参与者既可以是发出交易的客户端，也可以是验证和最终确定交易的服务器。区块链账本的数据结构由按时间顺序排列且通过哈希链链接的区块组成，每个区块都需要共识才能包含在账本中。每个区块包含一组有效的交易。区块链上的交易应与其他交易保持一致，以防止双重花费、过度花费和挪用。
- en: Blockchain systems are often associated with financial applications responsible
    for transaction processing and validating. Therefore, the objectives and responsibilities
    of a blockchain consensus protocol may be more enhanced that those of the traditional
    distributed consensus protocols.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 区块链系统通常与负责交易处理和验证的金融应用相关联。因此，区块链共识协议的目标和责任可能比传统分布式共识协议的目标和责任更为增强。
- en: 3.3.1 The Objective of Blockchain Consensus
  id: totrans-32
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 3.3.1 区块链共识的目标
- en: The objective of a blockchain consensus protocol is to ensure that all participating
    nodes agree on a common network transaction history, which is serialized in the
    form of a ledger. Based on the previous discussion on BFT consensus and the consensus
    goal abstraction provided in [[37](#CR37)], we define the following requirements
    for blockchain consensus.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 区块链共识协议的目标是确保所有参与节点对一个共同的网络交易历史达成一致，该历史以账本形式序列化。根据之前对BFT共识的讨论和[[37](#CR37)]中提供的共识目标抽象，我们为区块链共识定义了以下要求。
- en: '**Termination.** At every honest node, a new transaction is either discarded
    or accepted into the blockchain within the content of a block.'
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**终止**。在每一个诚实节点，一个新的交易要么被丢弃，要么被纳入区块接受进入区块链。'
- en: '**Agreement**. Every new transaction and its holding block should be either
    accepted or discarded by all honest nodes. An accepted block should be assigned
    the same sequence number by every honest node.'
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**协议**。每一个新交易及其持有区块应该被所有诚实节点接受或丢弃。被接受的区块应该被每一个诚实节点分配相同的序列号。'
- en: '**Validity**. If every node receives the same valid transaction/block, it should
    be accepted into the blockchain.'
  id: totrans-36
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**有效性**。如果每个节点都接收到相同的有效交易/区块，它应该被纳入区块链。'
- en: '**Integrity**. At every honest node, all accepted transactions should be consistent
    with each other and should prevent double spending. All accepted blocks should
    be correctly generated and hash-chained in chronological order.'
  id: totrans-37
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**完整性**。在每一个诚实节点，所有接受的交易应该彼此一致，并应防止双重花费。所有接受的区块应该正确生成并以时间顺序进行哈希链结。'
- en: 3.3.2 Components of Blockchain Consensus Protocol
  id: totrans-38
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 3.3.2 区块链共识协议的组件
- en: The five key components of a blockchain consensus protocol correspond to the
    main requirements of the preceding subsection as follows.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 区块链共识协议的五个关键组件如下对应于前一小节的主要要求。
- en: '**Block Proposal**. Generating blocks and attaching generation proofs.'
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**块提议**。生成区块并附上生成证明。'
- en: '**Information Propagation**. Disseminating blocks and transactions across network.'
  id: totrans-41
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**信息传播**。在网络中传播区块和交易。'
- en: '**Block Validation**. Checking blocks for generation proofs and transaction
    validity.'
  id: totrans-42
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**区块验证**。检查区块生成证明和交易的有效性。'
- en: '**Block Finalization**. Reaching agreement on the acceptance of validated blocks.'
  id: totrans-43
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**块最终化**。对验证过的区块达成接受协议。'
- en: '**Incentive Mechanism**. Promoting honest participation and creating network
    tokens.'
  id: totrans-44
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**激励机制**。促进诚实参与并创建网络代币。'
- en: These five ingredients provide essential functionality for the blockchain consensus.
    Nevertheless, some of the new blockchain consensus algorithms do not include all
    of these components. For example, the incentive mechanism is absolutely necessary
    for permissionless blockchains. However, permissioned blockchains, where all participation
    are identified and are officially authorized to participate, the incentive mechanisms
    are not necessary, since the administrator may simply require all participants
    to operate correctly without an additional incentive. Many new public blockchain
    proposals only cover the process of block proposal and included the remaining
    components from the Nakamoto consensus algorithm. This is explained by the fact
    that the PoW block proposal is so computationally intensive that it is paramount
    to improve it for sustainability.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 这五个要素为区块链共识提供了基本功能。然而，一些新的区块链共识算法并不包括所有这些组件。例如，激励机制对于无权限区块链是绝对必要的。然而，对于所有参与者都被识别并正式授权参与的授权区块链，激励机制是不必要的，因为管理员可能简单地要求所有参与者正确操作，而不需要额外的激励。许多新的公有区块链提案只涵盖块提议的过程，并从Nakamoto共识算法中包含了其余组件。这是因为PoW块提议计算强度如此之大，以至于改进它是可持续性的首要任务。
- en: 3.4 Proof-of-Work Consensus Protocol
  id: totrans-46
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 3.4 工作量证明共识协议
- en: The Nakamoto proof-of-work (PoW) [[28](#CR28)] consensus protocol is the key
    innovation that made Bitcoin possible. It can be summarized as follows.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: Nakamoto工作量证明（PoW）[[28](#CR28)]共识协议是使比特币成为可能的的关键创新。它可以总结如下。
- en: '**Proof-of-Work (PoW)**. Block generation requires finding a preimage to a
    hash function so that the hash result satisfies a difficulty target, which is
    dynamically adjusted to maintain an average block generation interval.'
  id: totrans-48
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**工作量证明（PoW）**。区块生成需要找到一个哈希函数的预图像，使得哈希结果满足一个难度目标，该目标动态调整以保持平均区块生成间隔。'
- en: '**Gossiping Rule**. Every new received or generated transaction or block should
    be advertised and broadcast to all peers immediately.'
  id: totrans-49
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**八卦规则**。每个新接收或生成的交易或区块应立即广告并向所有对等节点广播。'
- en: '**Validation Rule**. A block or transaction needs to be validated before being
    broadcast to peers or appended to the blockchain. The validation includes the
    verification that there is no double spending in the transactions and the validity
    of the condition of the proof-of-work in the block header.'
  id: totrans-50
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**验证规则**。在向对等节点广播或添加到区块链之前，区块或交易需要进行验证。验证包括检查交易中没有双重花费，并验证区块头中工作量证明的有效性条件。'
- en: '**Longest-Chain Rule**. The longest chain represents the network consensus,
    which should be accepted by any node who sees it. Mining should always extend
    the longest chain.'
  id: totrans-51
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**最长链规则**。最长的链代表网络共识，任何看到它的节点都应接受它。挖矿应始终扩展最长的链。'
- en: '**Block Rewards and Transaction Fees**. The generator of a block can claim
    a certain amount of new tokens plus fees collected from all the enclosed transactions,
    in the form of a coin transaction.'
  id: totrans-52
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**区块奖励和交易费**。区块的生成者可以声称一定数量的新代币以及从所有包含的交易中收集的费用，以硬币交易的形式。'
- en: The computationally intensive PoW procedure is designed for mitigating the Sybil
    attacks. Bitcoin’s network is permissionless with all participants allowed to
    join in a pseudonymous fashion. The Sybil attack occurs when one member creates
    multiple identities and several accounts. The PoW procedure requires solving difficult
    tasks using real hardware and cannot be forged.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 计算密集型PoW过程旨在缓解Sybil攻击。比特币网络是无需许可的，所有参与者都可以以伪匿名方式加入。Sybil攻击发生在一个成员创建多个身份和几个账户的情况下。PoW过程要求使用真实硬件解决困难任务，并且无法伪造。
- en: The longest-chain rule ensures that the longest chain of the ledger remains
    stable with possible modifications allowed only to a few last items. Therefore,
    the longest chain can serve as a commonly accepted record of the system history.
    The Bitcoin community does not envisage any authoritative entities and is decentralized.
    Block rewards and transaction fees are used as incentives for the miners to participate
    and create new Bitcoins.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 最长链规则确保账本的最长链在可能允许对最后几项进行修改的情况下保持稳定。因此，最长链可以作为系统历史的普遍接受的记录。比特币社区不预见任何权威实体，并且是去中心化的。区块奖励和交易费用于激励矿工参与并创建新的比特币。
- en: A high-level version of the Nakamoto protocol is presented in Algorithm 3.2\.
    During block generation, more stringent level of the mining difficulty demands
    more brute force trials in order to find a nonce fulfilling the requirements.
    To ensure that every block is sufficiently propagated before the next block comes
    out, the mining difficulty is adjusted every 2016 blocks so that the expected
    block interval remains a constant value (10 min in Bitcoin) no matter how the
    gross hashing power of the miners fluctuates.![](../images/516136_1_En_3_Chapter/516136_1_En_3_Figb_HTML.png)
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: Nakamoto协议的高级版本在算法3.2中给出。在区块生成期间，更高的挖矿难度要求进行更多的暴力试验，以找到满足要求的nonce。为确保每个区块在新区块产生之前都得到充分传播，每2016个区块调整一次挖矿难度，使预期区块间隔保持恒定值（比特币中为10分钟），无论矿工的总计算能力如何波动。![](../images/516136_1_En_3_Chapter/516136_1_En_3_Figb_HTML.png)
- en: An algorithm on Nakamoto Consensus protocol general procedure, with the network
    joining phase, the main loop phase, the gossiping rule phase, the longest-chain
    validation phase, P o W-based block generation phase, P o W hashing puzzle phase,
    and the final condition.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: Nakamoto共识协议的算法流程包括网络加入阶段、主循环阶段、八卦规则阶段、最长链验证阶段、基于POW的区块生成阶段、POW散列谜题阶段以及最终条件。
- en: 3.5 Proof-of-Stake Consensus Protocols
  id: totrans-57
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 3.5 股份证明共识协议
- en: Proof-of-stake (PoS) is an energy efficient alternative to PoW mining. The stake
    of a participant is the set of the coins or network tokens which are owned by
    the node and can be invested to support the blockchain consensus process. Thereby
    token ownership is applied in PoS in order to prevent Sybil attacks. It follows
    that the probability of a PoS miner to propose a block for the ledger is proportional
    to the value of the stake owned by the miner, whereas the chances of a PoW miner
    proposing a block are proportional to the brute force computational power of the
    equipment owned by the miner. From the point of view of sustainability, PoS eliminates
    the waste of computational power and electricity and instead required the miners
    to invest or deposit their stake [[31](#CR31)]. Since PoW consensus does not require
    real mining work and is more similar to investing in capital markets, PoS miners
    are also often called the *validators*, *minters*, or *stakeholders*.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 权益证明（PoS）是PoW挖矿的能量高效的替代方案。参与者的质押是其节点拥有的硬币或网络代币的集合，可以投入以支持区块链共识过程。因此，在PoS中应用代币所有权以防止Sybil攻击。因此，PoS矿工提议账本块的概率与矿工拥有的质押价值成比例，而PoW矿工提议账本块的概率与矿工设备拥有的暴力计算能力成比例。从可持续性的角度来看，PoS消除了计算能力和电能的浪费，并要求矿工投入或质押他们的代币[[31](#CR31)]。由于PoW共识不要求真正的挖矿工作，而更类似于投资资本市场，因此PoS矿工也常被称为*验证者*、*发行者*或*代币持有者*。
- en: 'We identify four classes of PoS protocols: chain-based PoS, committee-based
    PoS, BFT-based PoS, and delegated PoS (DPoS). Chain-based PoS inherits many of
    the components of the Nakamoto consensus protocol such as information propagation,
    block validation, and block finalization (i.e. longest-chain rule). The difference
    is that the block generation mechanism is replaced with PoS. Committee-based PoS
    leverages a multiparty computation (MPC) scheme to enable a committee to generate
    blocks in unison. BFT-based PoS combines staking with BFT consensus which guarantees
    deterministic finality of blocks. DPoS employs a social voting mechanism that
    elects a fixed-size group of delegates for transaction validation and blockchain
    consensus on behalf of the voters.'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 我们确定了四种权益证明（PoS）协议的类别：基于链的PoS、基于委员会的PoS、基于BFT的PoS和委托PoS（DPoS）。基于链的PoS继承了 Nakamoto
    共识协议的许多组件，如信息传播、区块验证和区块最终确定（即最长链规则）。区别在于，区块生成机制被 PoS 所替代。基于委员会的PoS利用多方计算（MPC）方案，使委员会能够协同生成区块。基于BFT的PoS将质押与BFT共识结合，确保块的确定性最终性。DPoS采用一种社会投票机制，选举一定数量的代币持有者代表投票者进行交易验证和区块链共识。
- en: 3.5.1 Chain-Based PoS
  id: totrans-60
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 3.5.1 基于链的PoS
- en: Chain-based PoS is an early PoS scheme proposed as an alternative block generation
    mechanism. The gossiping rule of the message passing, the block validation rule,
    the longest-chain rule, and the probabilistic finality remain the same as in the
    Nakamoto consensus framework. Early chain-based PoS blockchain systems include
    Peercoin and Nxt.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 基于链的PoS是一种早期的PoS方案，作为块生成机制的替代方案。消息传递的八卦规则、区块验证规则、最长链规则和概率性最终性与其他Nakamoto共识框架保持一致。早期的基于链的PoS区块链系统包括
    Peercoin 和 Nxt。
- en: The general procedure of a chain-based PoS minter is summarized in Algorithm 3.3\.
    A PoS minter can solve the hashing puzzle only once for a clock tick. Since the
    role of the minter increases with the growth of the minter’s stake value, the
    expected number of hashing attempts for a minter can be reduced in order to prevent
    one minter from dominating the system. In this way PoS avoids the brute force
    competition of the miners and reduces energy usage.![](../images/516136_1_En_3_Chapter/516136_1_En_3_Figc_HTML.png)
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 基于链的PoS发行者的通用流程总结在算法3.3中。一个PoS发行者只能在时钟滴答一次的情况下解决哈希谜题。由于发行者的角色随着发行者质押值的增长而增加，因此可以减少发行者解决哈希谜题的预期次数，以防止一个发行者主导系统。这样，PoS避免了矿工的暴力竞争，减少了能源消耗。![](../images/516136_1_En_3_Chapter/516136_1_En_3_Figc_HTML.png)
- en: An algorithm on the chain-based general procedure, with joining network phase,
    the main loop segment, the PoS-based block generation, PoS hashing puzzle phase,
    and the final condition.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 关于基于链的通用流程算法，包括加入网络阶段、主循环段、基于PoS的块生成、PoS哈希谜题阶段和最终条件。
- en: 3.5.2 Committee-Based PoS
  id: totrans-64
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 3.5.2 基于委员会的PoS
- en: A committee-based PoS determines a committee of stakeholders based on their
    stakes and allows the committee members to take turns and generate blocks. A secure
    multiparty computation (MPC) technique is often used to derive such a committee
    in the distributed network. MPC is a genre of distributed computing in which multiple
    parties with individual inputs compute the outcome securely without revealing
    the values of their individual entries [[32](#CR32)]. The MPC process in the committee-based
    PoS essentially realizes the functionality that takes in the current blockchain
    state with the stake values from all stakeholders, and outputs a pseudo-random
    sequence of stakeholders called the *leader sequence*. The leaders then populate
    the committee according to their order in the sequence. The same leader sequence
    is known to all nodes. The participants with higher stakes are allowed to occupy
    earlier places and can occur more frequently in the sequence. A general procedure
    for a node of a committee-based PoS is shown in Algorithm 3.4\. In this algorithm,
    the CommitteeElect() function can also be implemented in a privacy-preserving
    way with a verifiable random function (VRF) [[26](#CR26)] so that only the nodes
    themselves know whether they are elected into the committee.![](../images/516136_1_En_3_Chapter/516136_1_En_3_Figd_HTML.png)
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 基于委员会的PoS根据他们的股份确定一个利益相关者委员会，并允许委员会成员轮流产生区块。在分布式网络中，通常使用安全多方计算（MPC）技术来导出这样的委员会。MPC是一种分布式计算类型，其中多个拥有各自输入的各方安全地计算出结果，而不揭示他们各自条目的值
    [[32](#CR32)]。基于委员会的PoS中的MPC过程实际上实现了这样一种功能：输入当前区块链状态以及所有利益相关者的股份值，输出一个称为*领导者序列*的伪随机利益相关者序列。然后根据序列中的顺序填充委员会。所有节点都知道相同的领导者序列。股份较高的参与者被允许占据更早的位置，在序列中可以更频繁地出现。基于委员会PoS的节点的一般程序在算法3.4中显示。在这个算法中，CommitteeElect()函数也可以通过可验证的随机函数（VRF）[[26](#CR26)]以隐私保护的方式实现，这样只有节点本身知道它们是否被选入委员会。![](../images/516136_1_En_3_Chapter/516136_1_En_3_Figd_HTML.png)
- en: An algorithm on the committee-based P o S general procedure, with the phase
    of joining network and stalking, the main loop phase, the committee election phase,
    the phase to block proposing and broadcast, the longest-chain and validation rule
    phase, the PoS-based committee selection phase, and the final condition.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 基于委员会 PoS 的通用程序上的算法，包括加入网络和跟踪阶段，主循环阶段，委员会选举阶段，区块提议和广播阶段，最长链和验证规则阶段，基于 PoS 的委员会选择阶段，以及最终条件阶段。
- en: 3.5.3 BFT-Based PoS
  id: totrans-67
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 3.5.3 基于BFT的PoS
- en: 'Chain-based PoS and committee-based PoS largely follow the Nakamoto consensus
    framework in that the longest-chain rule is still used to provide probabilistic
    finality of blocks. In comparison, BFT-based PoS (or hybrid PoS-BFT) incorporates
    an extra layer of BFT consensus that provides fast and deterministic block finalization.
    Algorithm 3.5 shows the general procedure of a BFT-based PoS for every participant.
    The process of proposing blocks can be organized using any PoS mechanism: round-robin,
    committee-based, or other methods. The only requirement is for the process to
    guarantee a stable flow of new blocks into the ledger.'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 基于链的PoS和基于委员会的PoS在很大程度上遵循Nakamoto共识框架，即仍然使用最长链规则来提供块的概率性最终性。相比之下，基于BFT的PoS（或混合PoS-BFT）包含了一个额外的BFT共识层，提供了快速和确定性的块最终性。算法3.5显示了每个参与者的基于BFT的PoS的一般程序。提出块的过程可以使用任何PoS机制组织：循环，基于委员会或其他方法。唯一的要求是该过程保证新的块稳定流入账本。
- en: A verification mechanism can be used to confirm the finality of the blockchain
    ledger. This option is not included in Algorithm 3.5\. Then, the longest-chain
    rule can be replaced by the most-recent-verification rule for determining the
    stable main chain. Popular BFT-based PoS blockchain protocols include Tendermint,
    Algorand, and Casper FFG. DPoS protocols such as EOSIO also use BFT consensus
    for block finalization among the delegates.![](../images/516136_1_En_3_Chapter/516136_1_En_3_Fige_HTML.png)
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 一种验证机制可以用来确认区块链账本的最终性。这个选项不包括在算法3.5中。然后，最长链规则可以被最新的验证规则所取代，以确定稳定的主链。流行的基于BFT的PoS区块链协议包括Tendermint、Algorand和Casper
    FFG。像EOSIO这样的DPoS协议也使用BFT共识来进行委托之间的区块最终确定。![](../images/516136_1_En_3_Chapter/516136_1_En_3_Fige_HTML.png)
- en: An algorithm on the B F T based PoS general procedure, with joining network
    and stalking, the main loop segment, block proposing and broadcast, block validation
    phase, the consensus layer of B F T, PoS-based block generation, B F T-based block
    finalization, and the final condition.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 基于 B F T 的 PoS 通用流程的算法，包括加入网络和追踪，主循环段，区块提议和广播，区块验证阶段，B F T 的共识层，基于 PoS 的区块生成，基于
    B F T 的区块最终确定，以及最终的条件。
- en: 3.5.4 Delegated PoS (DPoS)
  id: totrans-71
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 3.5.4 委托 PoS（DPoS）
- en: Delegated PoS (DPoS) employs a democratic form of creating committees for PoS.
    The consensus committee is chosen via stake delegation made publicly. The DPoS
    is used by BitShares 2.0 [[8](#CR8)], Lisk [[24](#CR24)], EOSIO [[16](#CR16)],
    and Cosmos [[33](#CR33)]. DPoS is designed to control the size of the consensus
    group so that the messaging overhead of the consensus protocol remains manageable.
    Members of the consensus group are also called *delegates*. The election of delegates
    is also called the delegation process.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 委托 PoS（DPoS）采用一种民主形式的 PoS 委员会创建方式。共识委员会是通过公开的股份委托方式选出的。DPoS 被 BitShares 2.0
    [[8](#CR8)]、Lisk [[24](#CR24)]、EOSIO [[16](#CR16)] 和 Cosmos [[33](#CR33)] 使用。DPoS
    旨在控制共识组的大小，以便共识协议的消息开销保持可管理。共识组的成员也被称为*代表*。代表的选举也称为委托过程。
- en: In order to be elected as a delegate, each candidate has to attract enough votes
    from the token holders. This is often accomplished by offering a popular application
    and building up reputation through propaganda campaigns. By casting a vote to
    a delegate via a blockchain transaction, a token holder entrusts the delegate
    with the holder’s own stake. As a result, the delegate amalgamates the stake voting
    power from the voters and acts as their proxy in the consensus process. A token
    holder can switch vote to another delegate via a new delegation transaction. For
    example, the EOSIO protocol mandates that anyone can be a delegate and solicit
    votes, but only those rising to top 21 join the consensus group, among whom the
    right of block proposal is equally shared. EOSIO employs a pipelined PBFT-style
    consensus scheme to finalize the proposed blocks across the 21 delegates [[22](#CR22)].
    Specially, the physical time is divided into slots and the 21 delegates take turns
    to propose a block in a round-robin fashion. At each slot when a delegate proposes
    a block, the consensus scheme goes through pre-commitment and commitment phases
    and declares a decision on the proposed block. Because of the small size of the
    consensus group and the well-ordered PBFT-style process, every new valid transaction
    can be promoted to the consensus group and finalized in the blockchain almost
    instantly.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 为了当选为代表，每个候选人必须从代币持有者那里获得足够的票数。这通常是通过提供一个受欢迎的应用程序并通过宣传运动建立声誉来实现的。通过区块链交易向代表投票，代币持有者将自己的股份委托给代表。因此，代表合并了来自投票者的股份投票权，在共识过程中作为他们的代理人。代币持有者可以通过新的委托交易将投票切换给另一个代表。例如，EOSIO
    协议规定任何人都可以成为代表并寻求票数，但只有排名前 21 的加入共识组，其中块提议权平等共享。EOSIO 采用了一种流水线式的 PBFT 风格的共识方案，以便在
    21 名代表之间最终确定提出的区块 [[22](#CR22)]。特别是，物理时间被划分为槽，21 名代表轮流以循环方式提出区块。在每个代表提议块的槽中，共识方案经历预提交和提交阶段，并在提出的块上宣布决定。由于共识组规模较小，以及井然有序的
    PBFT 风格过程，每个新的有效交易都可以迅速推广到共识组并在区块链上最终确定。
- en: To enforce transaction validation and consensus safety, the DPoS’s incentive
    mechanism is designed to encourage honest delegation and consensus participation.
    Every delegate receives a daily reward proportional to the votes the delegate
    has. After rising to the consensus group, delegates also receive rewards for the
    validation of every block.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 为了执行交易验证和共识安全，DPoS 的激励机制旨在鼓励诚实的委托和共识参与。每位代表每天获得的奖励与代表获得的投票成比例。成为共识小组成员后，代表还会因为验证每个区块而获得奖励。
- en: 3.6 Other Blockchain Consensus Protocols
  id: totrans-75
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 3.6 其他区块链共识协议
- en: The majority of the modern blockchain consensus procedures apply the established
    techniques such as PoW, PoS, and BFT with only minor modifications and improvements.
    However, there are also numerous other promising proposals of novel blockchain
    consensus algorithms investigated in the academic literature addressing the needs
    of various application domains. Many of these novel schemes remain conceptual
    and describe only one or two of the five blockchain consensus protocol components.
    Next, we review the proof-of-authority (PoA), proof-of-elapsed-time (PoET), proof-of-TEE-stake
    (PoTS), and proof-of-retrievability (PoR).
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 现代大多数区块链共识机制都采用了PoW、PoS和BFT等成熟的技术，并进行了一些小的修改和改进。然而，在学术文献中也有许多其他有前景的新颖区块链共识算法提案，这些提案针对的是各种应用领域。这些新颖方案中的许多仍然是概念性的，只描述了区块链共识协议的五大部分中的一个或两个。接下来，我们将回顾权威证明（PoA）、时间消耗证明（PoET）、安全区股份证明（PoTS）和可检索性证明（PoR）。
- en: 3.6.1 Proof-of-Authority (PoA)
  id: totrans-77
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 3.6.1 权威证明（PoA）
- en: The term proof-of-authority (PoA) was introduced by the Ethereum co-founder
    Gavin Wood as an replacement for PoW and PoS. It is currently deployed in Ethereum’s
    Rinkeby (2017) and Kovan (2017) testnets, and POA Network (2018) [[30](#CR30)].
    The PoA protocol is a modification of PoS. The validators use their authorized
    identities as stakes instead of tokens of monetary value. In order to be accepted
    as a PoA validator in the consensus team, each candidate has to pass a mandatory
    certification procedure that assigns an approved value of the authority to the
    candidate. During the process, the identity of the candidate may be verified,
    and previous history of operation may be taken into account since it demonstrates
    the ability to contribute to the operation of the consensus team. The official
    certification document can then be made publicly available. The consensus team
    should be stable and relatively small in size. It is reviewed publicly by all
    participants ensuring that the users can trust the team with reliable transaction
    processing and blockchain management. The validators who show incompetence or
    misbehaviour in these tasks are to be vetted and excluded by the users and peer
    validators.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 权威证明（PoA）这一术语是由以太坊联合创始人Gavin Wood提出的，作为一种替代PoW和PoS的机制。它目前部署在以太坊的Rinkeby（2017）和Kovan（2017）测试网上，以及POA网络（2018）[[30](#CR30)]。PoA协议是对PoS的一种改进。验证者使用他们的授权身份作为股份，而不是具有货币价值的代币。为了被接受为PoA验证者参与共识团队，每个候选人必须通过一个强制性的认证程序，该程序为候选人分配一个批准的身份值。在这个过程中，候选人的身份可能会被验证，并且可以考虑之前的操作历史，因为这证明了他们为共识团队做出贡献的能力。官方认证文件随后可以公开提供。共识团队应该是稳定且相对较小的，它通过公开审查，确保用户可以信任团队进行可靠的交易处理和区块链管理。在执行这些任务时表现出无能或不正当行为的验证者应该被用户和同行验证者审查并排除。
- en: 3.6.2 Proof-of-Elapsed-Time (PoET)
  id: totrans-79
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 3.6.2 时间消耗证明（PoET）
- en: PoET was proposed by Intel as an alternative mining mechanism in 2016 and subsequently
    used in the Hyperledger Sawtooth family [[34](#CR34)]. Instead of undergoing the
    hashing-intensive mining, PoET simulates the time that would be consumed by PoW
    mining. That is, every node randomly backs off for an exponentially distributed
    period of time before announcing its block. To ensure that the local time truly
    elapses, PoET requires the back-off mechanism to be carried out in a trusted execution
    environment (TEE), which is an isolated area of memory providing confidentiality
    and integrity to the program running inside, against a compromised hosting platform.
    The program included in a TEE is called an *enclave*. Intel SGX [[11](#CR11)]
    and Arm TrustZone [[3](#CR3)] are the two major TEE solutions. Along with a number
    of other facilities, TEE provides a proof of integrity of the enclave program
    via remote attestation, which helps the network to establish trust in the consensus
    nodes.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 时间消耗证明（PoET）是由英特尔在2016年提出的一种替代挖矿机制，随后被应用于Hyperledger Sawtooth区块链平台[[34](#CR34)]。PoET不是通过耗费算力的挖矿，而是模拟了消耗工作量证明（PoW）挖矿的时间。也就是说，每个节点在宣布其区块之前，都会随机等待一个指数分布的时间周期。为了确保本地时间真正流逝，PoET要求退避机制在可信执行环境（TEE）中执行，TEE是一个提供对运行其中的程序保密性和完整性的内存隔离区域，以防止被恶意的主机平台侵害。在TEE中包含的程序称为*安全区*。英特尔SGX
    [[11](#CR11)] 和 Arm TrustZone [[3](#CR3)] 是两种主要的TEE解决方案。TEE通过远程证明提供 enclave 程序的完整性证明，帮助网络建立对共识节点的信任，这其中包括了许多其他设施。
- en: 3.6.3 Proof-of-TEE-Stake (PoTS)
  id: totrans-81
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 3.6.3 安全区股份证明（PoTS）
- en: Proof-of-TEE-Stake (PoTS) is one more protocol relying on TEE for blockchain
    consensus. It was proposed by Li et al. [[23](#CR23)] and was formalized by Andreina
    et al. [[2](#CR2)]. Every PoTS node *i* follows the same setup procedure as in
    PoET to set up a TEE enclave, generate the signing key pair ![$$\langle SK_i,
    PK_i \rangle $$](../images/516136_1_En_3_Chapter/516136_1_En_3_Chapter_TeX_IEq8.png),
    and communicate the setup to the network. Instead of simulating the elapsed time
    of the PoW mining, the enclave program of PoTS is analogous to the Algorand’s
    cryptographic scheme that randomly selects a committee according to the stake
    distribution. Every node in the committee is eligible to propose a new block for
    the coming block cycle. To prove that the block proposal is eligible, the block
    includes the eligibility proof signature ![$$\sigma ^{ep}_{SK_i}$$](../images/516136_1_En_3_Chapter/516136_1_En_3_Chapter_TeX_IEq9.png),
    which is produced by the enclave program of the block generating node *i*. Once
    other nodes receive this block, they validate the block content as well as its
    signature ![$$\sigma ^{ep}_{SK_i}$$](../images/516136_1_En_3_Chapter/516136_1_En_3_Chapter_TeX_IEq10.png)
    using the node’s public key ![$$PK_i$$](../images/516136_1_En_3_Chapter/516136_1_En_3_Chapter_TeX_IEq11.png).
    The longest-chain rule is then used to determine whether to accept this block
    into the ledger.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 证明TEE-Stake（PoTS）是另一个基于TEE的区块链共识协议。它由Li等人 [[23](#CR23)] 提出，并由Andreina等人 [[2](#CR2)].
    每个PoTS节点*i*遵循与PoET相同的设置过程来设置一个TEE enclave，生成签名密钥对![$$\langle SK_i, PK_i \rangle
    $$](../images/516136_1_En_3_Chapter/516136_1_En_3_Chapter_TeX_IEq8.png)，并将设置通知网络。而不是模拟PoW挖掘的流逝时间，PoTS的enclave程序类似于Algorand的加密方案，根据股份分布随机选择一个委员会。委员会中的每个节点都有资格为即将到来的区块周期提出一个新的区块。为了证明区块提案是合格的，区块包括资格证明签名![$$\sigma
    ^{ep}_{SK_i}$$](../images/516136_1_En_3_Chapter/516136_1_En_3_Chapter_TeX_IEq9.png)，该签名由区块生成节点的enclave程序产生。一旦其他节点收到这个区块，他们会验证区块内容以及其签名![$$\sigma
    ^{ep}_{SK_i}$$](../images/516136_1_En_3_Chapter/516136_1_En_3_Chapter_TeX_IEq10.png)是否使用节点的公钥![$$PK_i$$](../images/516136_1_En_3_Chapter/516136_1_En_3_Chapter_TeX_IEq11.png)。然后使用最长链规则来确定是否接受这个区块进入账本。
- en: 3.6.4 Proof-of-Retrievability (PoR)
  id: totrans-83
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 3.6.4 证明可检索性（PoR）
- en: Proof-of-Retrievability (PoR) was originally proposed by Juels and Kaliski [[18](#CR18)]
    as a cryptographic cornerstone for a semi-trusted distributed archive. The key
    facility of PoR allows file owners to verify whether their online files or file
    fragments are stored securely and are retrievable by applying a special challenge-response
    protocol. The retrievability of a file *F* at a remote node ![$$n_i$$](../images/516136_1_En_3_Chapter/516136_1_En_3_Chapter_TeX_IEq12.png)
    can prove ![$$n_i$$](../images/516136_1_En_3_Chapter/516136_1_En_3_Chapter_TeX_IEq13.png)
    indeed spends the required amount of storage resources on *F*. Because of the
    space requirement inherent in the retrievability, the PoR is also known as a *proof-of-space*.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 证明可检索性（PoR）最初由Juels和Kaliski [[18](#CR18)] 提出，作为半可信分布式归档的一个加密基础。PoR的关键功能允许文件所有者验证他们的在线文件或文件片段是否被安全地存储并且可以通过应用一个特殊的挑战-响应协议来检索。文件*F*在远程节点![$$n_i$$](../images/516136_1_En_3_Chapter/516136_1_En_3_Chapter_TeX_IEq12.png)的可检索性可以证明![$$n_i$$](../images/516136_1_En_3_Chapter/516136_1_En_3_Chapter_TeX_IEq13.png)确实为*F*分配了所需的存储资源。由于可检索性内在的空间要求，PoR也被称作*空间证明*。
- en: As a distributed consensus protocol, PoR was first used by the cryptocurrency
    Permacoin proposed by Miller et al. [[27](#CR27)]. It was invented as another
    alternative to PoW eliminating the mining work. In the algorithm, a central administrator
    publishes a target dataset *F* and computes the digest of *F* (the Merkle hash
    tree root of all segments of *F*). Then each participant stores some random segments
    of *F* per its storage capability and computes the digest of these segments. For
    every block cycle, the dealer initiates a lottery game with a random puzzle. Then
    every participant derives a lottery ticket consisting of a fixed number of PoR
    challenges from its locally stored segments, public key, and the puzzle.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 作为一种分布式共识协议，PoR首先被Miller等人 [[27](#CR27)] 提出的加密货币Permacoin使用。它被发明作为另一种消除挖矿工作的PoW替代方案。在算法中，一个中心管理员发布一个目标数据集*F*并计算*F*的摘要（所有段落的Merkle哈希树根）。然后每个参与者根据其存储能力存储*F*的一些随机段并计算这些段的摘要。对于每一个区块周期，经销商发起一个带有随机谜题的彩票游戏。然后每个参与者从其本地存储的段、公钥和谜题导出一个包含固定数量PoR挑战的彩票。
- en: Participants with more data stored have higher probability of winning the lottery
    and thus being eligible to generate a block. All PoR challenges are stored in
    the new block and verified by the whole network. Permacoin also implements a signature
    scheme to discourage participants from outsourcing the storage task. Apart from
    employing PoR, the Permacoin inherits the methods of Bitcoin for other components
    of the consensus mechanism.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 存储了更多数据的参与者赢得彩票的概率更高，因此有资格生成一个区块。所有PoR挑战都存储在新区块中，并整个网络进行验证。Permacoin还实现了一个签名方案，以阻止参与者将存储任务外包。除了采用PoR，Permacoin还继承了比特币在共识机制的其他组件方面的方法。
- en: The PoR is more economical that PoW and has advantages. First, the file storage
    of PoR consumes less energy than the brute force mining of PoW. Second, the storage
    space as a resource can be recycled. Third, the PoR can be reprogrammed to perform
    useful and meaningful storage tasks, which are not wasteful but bring other benefits.
    For example, the dataset used in the procedure can be some large but useful public
    dataset, which has to be stored for the benefit of many users.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 与PoW相比，PoR更经济且具有优势。首先，PoR的文件存储比PoW的暴力挖矿消耗的能源更少。其次，作为资源的存储空间可以被回收。第三，PoR可以被重新编程执行有用且有意义的存储任务，这并非浪费而是能带来其他好处。例如，在过程中使用的数据集可以是一些大但实用的公共数据集，为了许多用户的利益必须进行存储。
