© 作者（独家授权给 Springer Nature Singapore Pte Ltd. ）2022T. Dounas, D. Lombardi (编辑)Blockchain for ConstructionBlockchain Technologies[`doi.org/10.1007/978-981-19-3759-0_10`](https://doi.org/10.1007/978-981-19-3759-0_10)

# 用于室内场景注释的私有分布式账本

Vladeta Stojanovic^(1  ), Matthias Trapp^(2  ), Jan Klimke^(2  ), Rico Richter^(2  ) 和 Jürgen Döllner^(2  )(1)德国汉堡市 HafenCity 大学，Henning-Voscherau-Platz 1，20457 Hamburg, Germany(2)哈佛普莱特纳学院，Prof.-Dr.-Helmert-Straße 2-3，14482 Potsdam, GermanyVladeta Stojanovic (通讯作者)Email: vladeta.stojanovic.main@hcu-hamburg.deMatthias TrappEmail: Matthias.Trapp@hpi.deJan KlimkeEmail: Jan.Klimke@hpi.deRico RichterEmail: Rico.Richter@hpi.deJürgen DöllnerEmail: juergen.doellner@hpi.de

## 摘要

通过使用数字室内模型（例如点云、3D 模型、2D 平面图）进行注释记录的可视化，利益相关者可以准确地看到建筑物内部货物或机械设备是如何从一个位置移动到另一个位置的。记录这些行为对于设施管理（FM）的记录和未来决策至关重要，特别是涉及运营和维护（O &M）程序。使用数字账本可以记录与给定室内表示相关的属性，例如将利益相关者的注释记录在点云表示中。我们提出了基于区块链技术（BT）的注释室内场景的概念方法，重点关注这些场景的点云表示。我们提供了一个描述设计和实施私有分布式账本（PDL）作为服务导向软件（SOS）组件的案例研究，在此案例研究中，任何用户的注释都将被记录和验证，以证明不可变性，以增强 FM 利益相关者之间的决策。我们使用基于 Web3D 的客户端查看器和界面来实现可视化组件。我们的方法为注释室内场景的基于 PDL 的系统的发展奠定了基础，这个系统有潜力进一步整合到数字孪生平台中。

## 1 引言

室内环境的数字表示在现代设施管理（FM）中发挥关键作用，特别是在建筑信息建模（BIM）实践的适应中[1]。室内环境的数字表示可以利用现有的 2D 或 3D 平面图、BIM 和 CAD 数据，以及点云。

点云允许捕获和表示建筑环境的当前物理状态，并且具有进一步分析和决策的巨大潜力[2]。 点云在建筑环境和地理空间领域的可视化和分析应用中也非常有用[3]，能够将环境的当前物理状态捕获为“数字快照”。 室内捕获方法依赖于使用摄影测量或光探测与测距（LiDAR）系统（例如，地面激光扫描（TLS））以及包含集成 LiDAR 传感器的现代通用移动设备。 捕获的点云包括在 3D 空间中的空间表示，以及颜色和/或强度属性。

使用这种对室内环境的表示，设施管理人员能够评估室内环境的当前状态，并做出有关操作和维护（O & M）程序的决定，例如，为家具或机械等物品生成清单，并使用深度学习来检测点云中的这些物品[4]。 使用点云对室内环境的准确表示能够记录任何更改和用户注释，使用户能够基于增强的空间环境上下文在特定时间点做出决策。 注释的使用是建立有关室内环境设施管理决策本体论的重要工具，因为它为可能含糊不清的真实环境点云表示添加语义[5]。 然后可以将任何这种注释记录存储为与特定数字表示相关联的文本和/或数值数据（在本例中为点云）。

这对于各种建筑，工程，建筑，业主和占用者（AECOO）领域的不可变数字文档（例如，跟踪施工现场进度，记录大楼翻新/改建过程中的注释等）具有额外重要的意义。 然后可以将这些数字文档用于进一步分析，审查决策，甚至作为与第三方的合同义务的证明。  

### 1.1 动机和贡献

基于数字表示并且以不可修改的方式进行的注释记录，需要使用特定的数据结构来确保当前和先前记录的数据段之间的不可变性。 使用基于*区块链技术*（BT）原则的私有分布式账本（PDL）可以不可变地记录这种*交易*数据。 可以基于用户使用点云（图 1）对常见办公家具和区域进行注释来记录不可变的数据。![](img/504856_1_En_10_Fig1_HTML.png)

图 1

使用 PDL 原型实现对室内点云的注释示例。在此案例中，记录了一个新的沙发对象的提议位置，以及一个任意距离测量的注释。基于用户与点云场景的交互，所有区块都被不可变地记录，并且使用基于 Web3D 的软件组件呈现

尽管可以使用数据库管理系统（DBMS）来存储和查询此类数据，但在服务导向系统（SOS）内尤其需要轻量级软件组件的实现。SOS 的使用允许客户端和服务器之间的硬件要求解耦，并且能够通过灵活的计算和将结果流式传输到各种客户端配置[6]。

尽管公共区块链的一个常见缺点是它们的体积预计会不断增加，但对于私有分布式账本来说，每个新场景可能都会生成并使用一个新的区块链；例如，在此之后，可以安全地存档并保留在服务器上以供将来参考。另一个可能性是为每个利益相关者群体使用一个“主账本”，该账本将用于分享、注释和由利益相关者审查的每个新的操作与维护场景。

这样的 SOS 软件组件不应需要实施和维护传统数据库的开销，并且应适用于在涉及的利益相关者之间安全记录交易，以及通过受信任的利益相关者的共识接受每个新的交易。这对于与数字孪生（DT）平台的集成也很重要，因为这些平台试图将建筑环境的多个数据源结合起来，以创建一个数字孪生，并且通常需要来自多个利益相关者的输入和决策[7]。

我们提出了 PDL 的概念性方法、系统设计和原型实现。我们提出并讨论了一个案例研究，在该研究中，我们使用 PDL 的原型实现作为 SOS 组件，用于记录用户对室内点云的注释。一个基于 Web3D 的客户端软件组件用于可视化点云和用户驱动交互，特别是通过客户端 Web 浏览器在 3D 场景中进行注释记录（图 2）！[](../images/504856_1_En_10_Chapter/504856_1_En_10_Fig2_HTML.png)

图 2

室内点云的基于用户的注释示例。在这个案例研究中，使用了 PDL 的原型软件组件将这些注释操作记录为区块链数据

## 2 相关工作

### 2.1 建筑工程，工程施工，运营与维护（AECOO）应用的区块链技术

BT 基于一个去中心化和分布式的不断增长的记录集合，每加入一个新记录都需要使用指定的共识算法来计算其有效性，从而确保不可变的数字记录保留。BT 最早出现是在比特币的推出时[8]，自那以后已经在各个领域得到了应用，最近的应用重点是智能城市[9]和数字建环境表示[10]的用例。区块链数据结构是默克尔树的一个例子[11]，通过使用哈希验证机制实现不可变的记录保留。BT 从加密货币中脱钩，并随后用于各种真实世界应用，推动了区块链 2.0 的发展，以及基于 BT 关键概念的相关分布式账本技术（DLT）[12]的发展。

分布式账本是一个系统，其中数字账本中的每个记录都分布并与所有相关利益相关者同步，对其进行任何添加都需要计算所有先前记录的有效性，以确保不可变性（例如，之前的记录未被篡改）。这对 AECOO 和相关领域，例如基于 BIM 和智能建筑领域[10, 13, 14]，数字孪生（DTs）[15, 16]，和智能城市[9, 17, 18]都有重要的应用 - 因为对于例如，BIM 或点云表示所做的任何更改都可以被不可变地记录下来，并用作潜在的法律和合同文件。关于 DLT 在 AECOO 中的应用的另一项综合审查由[19]提供。

正如 Turk 和 Klinc 所指出的，基于文档的实践和当前基于 BIM 的实践之间最显著的区别是，任何具有法律约束力的文件以前都是以物理形式保存的，然后通过不同层面的官僚主义程序[20]。由 Gunasekara 等人进行的研究主张使用 BT、DLT 和智能合同来替代 FM 中当前的采购实践，通过提供一个旨在将招标前、招标和中标后阶段的主要瓶颈过程数字化的概念框架[21]。

在使用 BIM 实践，特别是使用共同数据环境（CDEs）概念时，用于建筑所有代表性方面的数字数据共享附带特定挑战，涉及其所有权[1]。 Suliyanti 和 Sari 的研究提供了一种基于 BT 的多方 BIM 管理平台的原型实现，旨在允许多方记录关于整个建筑生命周期的重要交易使用具有许可的区块链[22]。 作者注意到，仍然需要单个“网络管理员”来通过完全授予的访问权限监督区块链的维护和完整性，使用创建、读取、更新和删除（CRUD）操作对代表建筑生命周期关键阶段的资产进行操作。

尽管基于 BT 的 DLT 对 AECOO 行业仍然是新的，但它们的应用已经被研究用于各种与 BIM 相关的应用。 Dounas 和 Lombardi 研究了 BT 与 CAD 和 BIM 应用的多级集成和使用，特别是用于跟踪 BIM 和 CAD 模型的任何更改和注释[23]。 Lemeš和 Lemeš讨论了 BT 可能用于分布式 CAD 和 BIM 软件环境的潜在使用[24]。 Hargaden 等人讨论了使用 BT 进行施工进度监控的好处和挑战，以及与现有 BIM 实践集成此类系统的可行性[25]。

基于 BT 的 DLT 可以是公共财团组织或私有的[26]。例如，在组织内部存在高度信任的情况下通常可以找到私有的 DLT，本研究中称为 PDL。因此，在添加新记录时，无需计算任何工作证明结果即可使用 PDL，但是仍然使用与公共和财团组织区块链相同的方法来确保账本中记录的有效性（例如，账本分发给可信客户，这些客户就加入新数据形成共识）。因此，PDL 的使用适用于集成到 BIM 和 DT 平台[12, 27]。

### 2.2 基于点云的注释记录

点云可以提供建筑环境的 3D 和纹理最新物理表示，达到高分辨率（每平方米数百万点），并展示复杂细节[28]。据 Richter 称，点云可以*“以任何比例和精度代表几乎任何类型的物理对象、场地、地理区域或基础设施…”*[29]。在对点云进行分析和/或可视化之前，捕捉、后处理和语义丰富的过程都是必需的[5]。语义丰富或处理过的点云的最终输出可以为 AECOO 从业者和利益相关者带来巨大的益处，比如希望深入了解建筑环境当前状态的 FM 运营商[30]。

对建筑环境的点云表示进行注释记录是它们的自然延伸的使用，因为经常捕捉的相同区域的点云可以进行空间偏差和随时间变化的比较[31]。对于室内环境，点云为生成语义丰富的表示提供了良好的来源，特别是用于表示复杂的室内空间，如大学校园和办公室[32]。使用用户添加的注释或各种语义丰富过程的结果（例如，使用深度学习方法进行语义分割[33]）对点云进行语义丰富化，可以进一步吸引利益相关者，特别是使用基于 Web 的可视化，其中多个用户能够检查相同的点云场景[34]。

虽然通常需要领域专业知识来审核和基于 BIM 做决策[35]，但使用点云提供了一种更直观的方式来检查“就地”建成环境的物理表示。通过捕捉家具和设备等物体的物理状态，包括它们在扫描时的空间属性，点云可以捕捉通常被忽视或难以使用高水平几何表示（通常在设计/建造的 BIM 中找到）建模的物理特征[36]。因此，由用户进行的对点云的任何更改都可以基于真实世界的表示，而不是基于“按设计”或“按实际建造”的 BIM。

## 3 方法

所提供的 PDL 软件组件基于 BT 原则，唯一的不同之处在于它不使用任何工作证明机制。相反，任何如空间和/或用户注释的变化都记录在一个带有唯一哈希代码的块内，该块由值得信赖的用户在所有利益相关者之间的理论一致后添加（例如，一个 PDL “管理员”或具有特定权限的多个利益相关者）。因此，所有利益相关者均能够通过基于 Web3D 的客户端用户界面检查和查看带有注释的当前场景。通过这种方式，任何变化都可以由利益相关者交流，并作为不可变文档的参考。![](img/504856_1_En_10_Fig3_HTML.png)

图 3

原型 PDL 实现的高级系统设计，以及客户端和服务器组件之间的提议数据流

### 3.1 系统设计和实现

原型 PDL 实现在面向服务的范例中，客户端和服务器处理任务之间解耦（图 3）。PDL 的区块链组件以 Node.js 实现为服务器端软件组件，并负责创建和维护区块链。用户记录点云的任何更改或注释后，区块链将使用特定属性进行更新（Sect. 3.3）。还实现了三个不同的服务器，一个用于向区块链发送数据更新，一个用于更新区块链，一个用于在所有连接的利益相关者之间更新区块链。

### 3.2 服务器设计和实现

处理区块链更新的主服务器是作为一个 express 服务器实现的，^(1) 使用 Sockets.io 框架实现客户端和服务器之间的双向通信。服务器是基于 REST 的，并利用 HTTP POST 和 GET 命令来向区块链添加新块，以及发送当前区块链的内容。次服务器是一个重定向服务器，也是一个同时运行在主服务器旁边的 express 服务器，会将从客户端记录的注释和场景变化作为 HTML 5 隐藏属性表单数据传递。该服务器将 HTML 5 隐藏表单数据属性重定向到主 express 服务器上运行的 HTTP 服务器端口，触发 POST 操作，从而使用解析的表单属性创建一个新块，并向所有连接的对等方广播有一个新块已被添加到区块链的消息。

为了允许多个可信的利益相关者访问区块链，并实现基本的冲突解决机制，使用 WebSockets 实现了第三种点对点（P2P）服务器架构。P2P 服务器同时监听与 HTPP 服务器的连接，不同的是，它不是更新来自客户端界面的区块链，而是检查哪些节点连接到服务器并向它们发送区块链的副本。P2P 服务器还不断检查已连接节点是否具有最新版本的区块链，并通过使用最新交易来更新区块链或者将不及时的节点的当前区块链替换为最长（也是最新的）区块链。P2P 服务器实现的区块链更新频率可以设置为每隔几秒钟进行检查，也可以由某一特定操作触发，例如特定利益相关者向活动场景添加注释。最后，P2P 服务器还可以通过验证当前链中最后一个区块的哈希与从任何已连接节点接收的最新区块的哈希进行添加新区块到当前区块链。通过这种方式，对于用户添加的每个新区块，区块链可以在所有连接的节点之间同步。

### 3.3 块结构

区块链记录特定室内环境的属性，使用其点云表示，在特定时间点。这些属性提供了一个例子，说明对于形成 O &M 决策可能很重要的属性（关于 FM 的属性的详尽列表由 [37] 讨论）。用于存储分类账交易的块结构由以下数据成员组成：

+   *索引*：链中当前块的索引。

+   *上一个哈希*：上一个块的唯一哈希。

+   *时间戳*：当前块的时间戳。

+   *用户 ID*：对场景进行注释的当前用户的 ID 或名称。

+   *场景注释*：用户对当前点云场景的注释。

+   *场景对象*：场景中当前点云群集。

+   *选定对象*：选定的点云群集。

+   *选定对象位置*：选定点云群集的位置。

+   *当前哈希*：当前块的计算哈希。

区块链首先使用初始块（称为 *起源块*）进行组成，起源块设置为默认值。这个起源块然后被用作计算后续添加到区块链的下一个块的哈希值的基础块。块最显著的数据成员是当前哈希，使用所有当前数据成员计算。这个唯一的哈希值通过使用 SHA-256 伪随机数生成器（PRNG） [38] 计算为一个 32 字节的随机字符字符串，并且是使用 CryptoJS 库提供的^(2)。

一旦新区块添加了所有数据成员，并且具有基于上一个区块的哈希值的唯一哈希码，它将添加到全局区块数组中，这个数组在应用程序运行时初始化和使用。对于原型实现，我们使用了一种内存方式来访问和更新区块链。这个区块链数组也与所有连接的对等方共享和同步。

由于我们使用的是“受信任的账本”方法，所以当接受要添加到区块链中的新区块时，我们不计算任何工作证明。受信任的账本旨在供受信任的利益相关者内部使用，其中不需要任何利益相关者“挖掘”任何区块，因为每个生成和添加新区块的人对其他使用区块链的利益相关者都是已知的。在公共和去中心化的账本和区块链实现中，挖矿通常需要大量的计算能力，以便基于计算出的哈希值生成满足特定要求的有效签名（例如，将零作为签名的第一个字符的特定数量）。

### 3.4 区块链验证

区块链有能力以不可变的方式记录交易。这里不可变性的意义是，整个区块链结构的有效性是基于连续区块的计算哈希值和包含先前记录的属性和唯一哈希值的哈希值。因此，通过验证区块链中当前区块和前一个区块的哈希值并将它们进行比较，可以得到对先前插入的区块进行篡改的保证。如果基于前一个区块的哈希值和其当前属性计算得到的当前区块的哈希值与前一个区块的哈希值相同，那么我们可以确定这些区块包含的属性没有被任何方式篡改。![](img/504856_1_En_10_Fig4_HTML.png)

图 4

区块链数据的示例生成，其中每个新区块包含了从当前区块属性和前一个区块的哈希值生成的哈希码。

如果区块链中任何插入的区块中的交易值被篡改，那么新区块的生成哈希将与其他利益相关者使用的区块链副本中的同一区块的哈希不同。由于所有区块对利益相关者都是已知的，因此可以看到哪些区块包含被篡改的属性。在本质上，这个过程假定区块链是受信任的利益相关者共享的，因此每个利益相关者都有一个区块链的副本，并且这个副本会随其他利益相关者更新和同步。

在原型 PDL 实现中，我们实现了三种不同的区块链验证方法，即（1）当前区块和上一个区块的索引验证，（2）上一个区块的哈希验证，以及（3）当前区块的哈希验证。另外，这三种验证方法被用于在所有连接的节点之间同步后验证共识区块链。

## 4 客户端设计和实现

### 4.1 基于 Web3D 的可视化和场景交互

客户端实现采用了 HTML 5 和 Three.js 进行主要可视化和用户输入任务^(3)。通过基于 Web 的用户界面，用户可以加载点云并添加任何注释，这些注释将记录在 PDL 中。

可视化组件能够显示室内场景的完整点云（通常约为每 20 平方米 100,000 个点![$$²$$](img/504856_1_En_10_Chapter_TeX_IEq1.png)）。每场景可视化点数的当前限制约为四百万点（由于非优化的点云渲染）。Three.js 的使用使得可以通过可编程图形管线在点云上执行各种实用的可视化习语[39]，例如广告牌雪碧图渲染（用于显示文本）以及可以通过可编程图形管线对点云执行的各种着色操作（例如更改点簇的颜色或不透明度）。

用户可以为 3D 点云场景添加注释，可以是整个场景，也可以是特定选择的点簇。目前包括文本注释、距离和面积测量（图 2）。为了生成注释，用于生成注释的原始点云的一部分可以在不修改原始数据的情况下进行复制（第 6.1 节）。除了文本注释外，用户还可以选择给定簇并在 3D 场景中转换其位置和旋转。注释和变换操作都可以被捕获为发送到服务器的新区块更新的更新场景属性。由于 PDL 的值得信赖的特性，每个利益相关者都可以添加区块而无需明确许可。

### 4.2 利益相关者区块更新共识

如果某些利益相关者需要添加需要其他利益相关者批准的注释，就需要一种基于共识的方法。我们提出了一种针对这种情况的方法：一旦注释完成，进行更改的用户可以向所有相关利益相关者发送场景和更改的预览图像和文本描述。连接的利益相关者然后可以批准或拒绝更改。如果大多数利益相关者批准更改，那么建议更改的用户就可以将更改上传为区块链的新区块。

## 5 案例研究

我们提供了一个实验案例研究，在该研究中，我们使用了典型办公环境的点云表示。办公环境是使用普通移动设备捕获的，呈现了一个约为 15 m![$$²$$](img/504856_1_En_10_Chapter_TeX_IEq2.png) 的开放办公区域，还有常见的办公家具（如椅子、沙发、桌子）。该点云包含 318,589 个点，具有空间和 RGB 颜色属性。我们进行了注释和转换任务，其中我们注释了常见的办公家具，并将分割的点簇转移到场景中的新位置。这些更改随后被记录在区块链中，并更新到所有连接的对等体。我们在更新后评估了区块链的完整性，使用了三种不同的验证技术（索引、先前和当前哈希验证）。

### 5.1 注释和转换任务

注释和转换任务呈现了 FM 中的典型场景，其中家具必须由 O &M 人员从一个地点移动到另一个地点，并由 O &M 管理人员进行指导和结果检查（图 5）。该场景分为六个不同的任务，任务 1–3 在结果图 6 中有所体现，并显示了三个涉及利益相关者之间已记录注释的交易结果。一旦在这种情况下 O &M 员工完成了任务，该任务的物理结果可以由 O &M 管理人员与包含被注释和同意的椅子移动位置指示的点云场景版本进行比较。如果任务得到了 O &M 管理人员的满意完成，那么 O &M 员工和建筑经理都会收到成功完成的任务的通知，并且这也会被记录在 PDL 中。![](img/504856_1_En_10_Fig5_HTML.png)

图 5

展示了拟议的注释和转换任务，分为六个不同的步骤，并涉及三个不同的利益相关者。

![](img/504856_1_En_10_Fig6_HTML.png)

图 6

任务生成和通信过程的前三个步骤记录在 PDL 中的案例研究结果，使用办公区域的点云表示进行可视化，并传达给所有涉及的利益相关者

### 5.2 区块链计算性能

我们进一步提供了关键区块创建和验证方法的计算性能初步结果（表 1），这些方法是使用 Node.js 在服务器端实现和执行的。用于测试的服务器是一台普通的台式个人电脑，配备了 Intel Core i5-6500 CPU，主频为 3.2 GHz，内存为 8 GB，使用的是 Node.js 版本 14.0.0。

每个性能属性测量完成特定区块链操作所需的平均时间。通过对每个操作连续记录的 15 个样本来测量平均所需时间。所选择的性能属性分为三种不同类型的操作：（1）区块创建，（2）验证和（3）检索。我们使用了 15 个不同区块元素的区块链。

区块创建属性包括生成新区块所需的时间，以及计算新区块的唯一哈希所需的时间。验证属性包括验证当前区块索引，以及验证两个连续区块的前一个和当前哈希。使用所有三种验证方法（索引、当前和前一个哈希验证）执行完整区块链的验证。检索性能属性用于评估检索区块链中第一个区块（*创世区块*）所需的时间，以及选择和检索完整区块链中的随机区块所需的时间。表 1

初步评估 PDL 在关键区块创建和验证方法的性能方面

| 性能属性 | 时间（毫秒） |
| --- | --- |
| 区块创建 | 5.608 |
| 区块哈希计算 | 0.306 |
| 区块索引验证 | 1.072 |
| 上一个区块哈希验证 | 1.031 |
| 当前区块哈希验证 | 1.278 |
| 完整链验证 | 62.431 |
| 创世区块检索 | 7.810 |
| 随机区块检索 | 7.744 |

## 6 讨论

所提供的案例研究展示了使用 PDL 跟踪点云场景中空间和用户注释更改的可行性。基于 BT 原则的 PDL 的使用为存储与 FM 领域内决策相关的不可变数据提供了有前途的替代方案，并且与 DT 平台集成。然而，在考虑将 PDL 用于 FM 相关决策任务时，还有其他重要的考虑点。

### 6.1 数据传输和存储考虑

在所提供的案例研究中，我们专注于简单的注释（例如，测量两点之间的距离或添加简单的工作指令），尽管每个区块记录的属性数量可能增加以包括更多细节，例如，完整的场景编辑或选择的对象变换历史。这将不可避免地增加区块哈希、同步和验证操作的处理开销。

所提出的方法并没有显式地在区块链中存储任何点云数据，而是与给定点云相关联的属性。因此，假定所有利益相关者都可以访问点云的相同和最新版本。由于点云往往非常庞大（可能包含数以百万计或数十亿个点，大小以千兆字节计），它们的传输和存储仍然不切实际，尤其是使用 SOS 实施。

由于点云可能非常庞大，因此在在 PDL（Product Data Labeling）中使用它们做版本控制和决策时，更实际的方法是识别和利用点云的*元数据*。 这可以包括点云创建时间戳、点数、硬盘大小等，并且更重要的是，所使用的点云可以存储在一个安全服务器上，该服务器对基于 PDL 的版本控制提供只读访问。 这样，所有利益相关者可以使用相同且未修改的点云版本记录用户的标注，标注将成为*拟议*更改，一旦达成共识，就可以在更新版本的点云中实施。

但是，为了证明利益相关者使用的是点云的原始版本，可以实施一个使用实际点云数据的初始验证步骤。 使用 SHA-256 计算完整点云的哈希值作为主 PRNG 组件。 然后，在任何进一步的利益相关者使用和标注点云之前，可以比较和验证这个哈希值，从而确保使用的是原始且未修改的点云版本。

值得注意的是，尽管区块链的有效性得到了保证，但实际的点云数据应被视为只读数据，以便不会被任何利益相关者修改。 用于标注的原始点云的一部分可以被复制并临时存储（例如，存储在系统内存或 DBMS 中），并且可以使用这个复制的部分进行任何可以说明与利益相关者交流的重要场景变化的更改（例如，显示在房间内移动机械或家具物品的位置）。

此外，使用临时点云部分制作的标注和插图可以作为基于图像的标注传输给其他利益相关者。 这样，所有利益相关者之间使用单个有效版本的点云，在其中进行各种标注的投影，并捕获和共享用于决策的图像，而原始点云不会被修改。

### 6.2 潜在的利益相关者使用案例

区块链场景标注的一个显着用例是集成到 FM 的 DT 平台中。正如前文所述，将实际点云数据包括在区块链中是不切实际的，因此需要调查包含有用元数据的标准。 对于集成了各种数据源（例如 BIM、CAD、平面图、数字文档、传感器数据—所有这些都是点云数据的补充）的 DT 系统来说，选择适当的元数据变得尤为重要。 例如，在一个假设的 DT 平台中，BIM 模型只会形成关键的“基础数据”来源之一。 多个历史、当前和实时数字数据的合并使用，有助于形成“资产信息模型”（AIM），这基本上是 DT 平台使用和维护的内容[40]。此外，DT 将在数字孪生环境（DTE）中实施，服务导向架构和系统实施的使用将有助于集成各种处理组件[41]。

这与当前的 AECOO 做法形成鲜明对比，其中使用常见数据环境（CDE）（通常使用专有 BIM 软件）生成、共享和维护 BIM 模型及相关数字文档。利益相关者可以在静态状态下查看 BIM 模型（例如通常不会动态更新），可以使用给定的细节层次（LOD）BIM 表示计算时间、成本和空间冲突检测属性[1, 42]。

AIM 可以由多种不同的文件格式组成，这些文件格式有助于捕获、语义丰富化和利益相关者之间的信息交换。用于此类数据交换的常见文件格式包括 IFC，^(4) CoBIE，^(5) 以及 BIM 协作格式。^(6) 由于 BCF 的 API 设计能够通过基于 REST 的 API 共享基于 IFC 模型的重要 BIM 数据，因此 BCF 尤其引人关注。BCF 还是 PDL 中的一个很好的潜在候选，因为它旨在共享 IFC 模型的元数据，而不是 IFC 模型本身。 PDL 的一个可能的用例场景是通过 BCF 格式的规范来跟踪 IFC 模型的任何变化，其中所定义的每个块数据类型和属性都与 BCF 规范中的对应部分相对应。

另一种选择是使用模型视图定义（MVD）^(7) 来选择特定属性，使用 IFC 规范的子集来定义基于预定义使用要求的区块链的块结构（例如，用于机械、电气和管道（MEP）组件跟踪与可以在 LOD-300 IFC 规范下捕获的空间变化跟踪）。

使用区块链技术将有利于利益相关者的情景可能包括，例如，管理向第三方支付建筑维护费用。这可以进一步扩展到使用*智能合约*，其中一项交易可以在区块链内的特定记录后触发脚本化机制[43]。利益相关者还可以使用室内环境的点云表示来与负责方商定空间选取感兴趣区域并进行标注需要做出的更改。一旦所有当事方都同意，这一记录是不可变的，它可以用于跟踪各种建筑清单任务，例如，家具或机械从一个特定位置到另一个位置的移动。

使用提出的方法，利益相关者使用点云表示进行的交互和注释至少需要用户选择一个点簇，并通过添加与之关联的文字说明来注释它。这样可以轻松快速地进行概述和注释，并有可能通过建筑环境的*原貌*点云表示增强决策。虽然点云的使用被提倡为传达建筑环境的关键几何表示的首选手段，但使用基于 PDL 的注释的方法可以应用于其他几何表示（例如三角网格、边界表示、2D 平面图等）。

此外，建策经理和分包商可以使用区块链来跟踪改变，例如正在进行的翻新和改建工作，例如，可以捕捉区域的多个点云，以及相关文档，并将其存储为元数据，其中唯一的哈希与特定时间捕获的特定点云相关联。这样，相关利益相关者就可以使用区块链来跟踪这种翻新或改建工作的改变和监测进展。

### 6.3 与数据库管理系统的比较

可以将 PDL 看作是数据库，因为它能够使用区块链 API 或协议记录、检索和验证基于块的数据结构中的信息。但是，传统数据库被设计用于存储不仅可以检索，还可以修改的数据（即 CRUD 操作）。数据库管理系统通常安装在单个服务器上，并且其副本不打算分布在用户之间 - 除非他们有特殊的数据库管理员权限。由于区块链是分布式的，所以它比传统的数据库管理系统具有更好的容错能力，因为所有连接的利益相关者都拥有它的副本，而传统的数据库管理系统通常具有有限的特权访问权限的副本。

另外，DBMS 被设计用来存储任何类型的数据，包括非常大的空间数据集，如点云、图像、CAD 模型和相关数字数据。 在专门的 DBMS 中检索此类数据的速度也是至关重要的，因此它们是围绕先进的数据检索算法设计的，例如在 GIS 中使用的空间哈希索引[44]。 相比之下，区块链被设计用来存储“轻量级”数据，大部分是与交易相关的文本和数字数据或与数据库或远程服务器上的较大数据集相关的元数据。 就存储需求而言，我们单个场景的 PDL 的平均大小为 5.69 kb，使用 JSON 数据格式存储和解析指定的块属性（第 3.3 节）。

DBMS 也被设计用来处理可以根据使用情况和数据存储要求进行更改的数据类型。 区块链块具有硬编码的数据类型和属性，除非全新实施一个新的区块链，否则这些属性不可更改。 PDL 也不像非关系型 DBMS 面对处理非结构化数据或在使用后属性发生变化的数据那样具有相同的灵活性。 因此，在部署和使用 PDL 之前必须确保决策参与者决定在初始块设计中需要包含哪些数据属性。

就安全性而言，可以将 PDL 视为始终安全的——因为所有相关利益相关者都有它的副本，且在受信任的环境中，只有得到大部分利益相关者或指定管理员批准的块才能被添加到区块链中。 通常，DBMS 需要一个或多个管理员来控制谁可以访问它，并在创建或修改数据时授予用户所需的凭证来对其完整或选择部分进行访问。 因此，与使用 PDL 相比，使用 DBMS 的安全性和维护开销往往更高。

### 6.4 区块链可能存在的攻击可能性

公共区块链的一个明显的假设性弱点是其容易受到“51%”或“双重支付”攻击的影响[45]。 在经典的分散式区块链架构中，如果攻击者成功挖出更多的区块（比其他用户多出 51%），那么区块链的所有连入用户将会使用攻击者版本的区块链，因为这将成为“共识”或者最更新版本。 攻击者可以使用他们的区块链副本来使先前记录的交易失效或修改，而其他节点将使用。

这主要是一个存在于去中心化和公共区块链中的问题，在那里有许多匿名用户，并且在添加每个新区块之前需要工作证明。 对于 PDLs，每个区块通常会由受信任的人或团体验证和添加，并依赖于社会控制而不是技术保护。负责验证的受信任的利益相关者可以在尝试或拒绝添加记录交易的每个新区块时（Sect。 第 4.2 节）形成共识。 这阻止了复制区块链并向其添加区块，除非由受信任的客户端或团体执行此操作。

防止修改 PDL 的另一种可能性是创建其快照，并将其备份到具有强加密的安全服务器上。这些快照可以在干系重要会议之后生成，在这些会议中， PDL 和点云场景用于注释经过协商的讨论项目，这可能是合同义务的一部分。 这样一个机制会减少任何一方声称篡改过的 PDL 为有效的可能性（如果有效的 PDL 安全地存储为快照，并在需要时可以作为证据提供）。

## 7 结论和展望

在本文中，我们描述了一种概念性方法，用于使用原型 PDL 软件组件跟踪室内点云用户注释，用于 FM 应用。所提供的实验结果证明了我们方法的可行性，并演示了它在典型的 O&M 场景中的应用。我们还讨论了区块链在 FM 相关用途中的潜在用途，考虑了这样一个系统需要记录不可变地用于 O&M 相关任务的数据类型和属性，以及利益相关者如何能够通过使用基于 Web3D 的用户界面和可视化来查看或添加新数据与之交互。案例研究结果还表明，原型 PDL 能够不可变地记录利益相关者的注释，并且区块链的有效性无法被不知情地破坏。此外，初步的性能结果表明 PDL 作为一个轻量级 SOS 组件能够高效地执行关键的区块链计算的可行性。此外，所提出的方法并不明确地与使用点云进行表示绑定，并且可以用于使用不可变用户注释的各种环境的数字表示的所有情景（例如，使用基于 CityGML 的城市规划）。

对于原型 PDL 实现，点云保存在服务器上，并由客户端用户界面加载（复制到客户端系统内存中）。我们将研究一种更有效的基于流式传输的方法，该方法提供对在服务器上安全存储的点云的只读访问。我们还提出了一种用于利益相关者共识的方法，用于向区块链添加新数据，我们的目标是实施和测试未来的工作。最后，我们计划扩展区块链的属性以匹配 BCF 规范的属性，并使用多个利益相关者测试这种方法。

致谢

第一作者 Vladeta Stojanovic 在德国波茨坦大学数字工程学院 Hasso Plattner 研究所服务导向系统工程研究学校的博士研究奖学金的资助下完成了所呈现的工作和出版文本。本文的初始版本于 2020 年 12 月 13 日完成并提交给编辑。Hasso Plattner 学院的作者所做的工作部分资助来自德国经济和能源部（BMWi）ZIM 计划，以及德国波茨坦大学数字工程学院 Hasso Plattner 研究所服务导向系统工程研究学校的资助。对于本出版物的开发，HafenCity 大学汉堡没有参与其中。
