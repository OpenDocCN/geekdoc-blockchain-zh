- en: 1   Introduction to Blockchain
  id: totrans-0
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 1   区块链简介
- en: For the world of technology users, blockchain represents a dramatic improvement
    to the landscape of information collection, distribution, and governance. That
    point has been espoused these past few years in the books and presentations that
    hype and imagine this new world. This book is one of the first to address the
    development of blockchain applications. As such, we will present a development
    road map to the emerging options and trends. That said, this is the first edition
    of what will be a series following the blockchain development evolution. This
    book is aimed at all levels of developers, software engineers, and anyone interested
    in the basics of blockchain technology, as well as the languages and tools required
    to build decentralized applications. We will introduce everything needed to understand
    the technology, write “smart contracts,” build applications that interact with
    them, and deploy and maintain these applications on a host of emerging platforms.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 对于技术用户的世界来说，区块链代表了信息收集、分发和治理景观的巨大改进。这一点在过去几年的书籍和演讲中被提倡，这些书籍和演讲炒作并想象这个新世界。这本书是第一本讨论区块链应用开发的书籍。因此，我们将呈现一个发展路线图，介绍新兴的选项和趋势。话说回来，这是将跟随区块链发展演变的一系列书籍的第一版。这本书面向所有级别的开发人员、软件工程师以及任何对区块链技术基础和构建去中心化应用所需的编程语言和工具感兴趣的人。我们将介绍理解技术、编写“智能合约”、构建与它们交互的应用程序以及在这些新兴平台上部署和维护这些应用程序所需的一切。
- en: 'So, let’s begin. Simply put, a blockchain is a database encompassing a physical
    chain of fixed-length blocks that include 1 to N transactions, where each transaction
    added to a new block is validated and then inserted into the block. When the block
    is completed, it is added to the end of the existing chain of blocks. Moreover,
    the only two operations—as opposed to the classic CRUD—are add transaction and
    view transaction. So the basic blockchain processing consists of the following
    steps, which are numbered 3, 4, and 5 in [Figure 1-1](ch1.xhtml#ch1fig1):'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 那么，让我们开始吧。简单来说，区块链是一个包含固定长度块的物理链数据库，这些块包括1到N笔交易，每笔添加到新块中的交易都被验证，然后插入到块中。当块完成后，它被添加到现有块链的末尾。此外，与经典的CRUD相比，只有两个操作——添加交易和查看交易。因此，基本的区块链处理包括以下步骤，这在图1-1中编号为3、4和5：[图1-1](ch1.xhtml#ch1fig1)）：
- en: '![Images](fig1-1.jpg)'
  id: totrans-3
  prefs: []
  type: TYPE_IMG
  zh: '![Images](fig1-1.jpg)'
- en: '**FIGURE 1-1   Public blockchain transaction flow**'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: '**图1-1   公共区块链交易流程**'
- en: 1.   Add new and undeletable transactions and organize them into blocks.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 1.   添加新的不可删除的交易并将它们组织成块。
- en: 2.   Cryptographically verify each transaction in the block.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 2.   对块中的每笔交易进行加密验证。
- en: 3.   Append the new block to the end of the existing immutable blockchain.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 3.   将新块附加到现有不可变的区块链的末尾。
- en: More comprehensively, a blockchain is also a distributed database that maintains
    a doubly linked list of ordered blocks. Each block averages 1 megabyte (see [https://blockchain.info/charts/avg-block-size](https://blockchain.info/charts/avg-block-size))
    and contains control data of approximately 200 bytes, such as a timestamp, a link
    to a previous block, some other fields (as depicted in [Figure 1-2](ch1.xhtml#ch1fig2),
    to be discussed later), and 1 to N transactions as can fit in the remaining space.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 更全面地说，区块链也是一个分布式数据库，它维护着一个有序的块的双向链表。每个块平均包含约1兆字节（参见[https://blockchain.info/charts/avg-block-size](https://blockchain.info/charts/avg-block-size)），并包含大约200字节的控制数据，例如时间戳、前一个块的链接、一些其他字段（如图1-2所示，将在后面讨论），以及1到N笔交易，这些交易可以填满剩余的空间。
- en: '![Images](fig1-2.jpg)'
  id: totrans-9
  prefs: []
  type: TYPE_IMG
  zh: '![Images](fig1-2.jpg)'
- en: '**FIGURE 1-2   Blockchain data layout**'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: '**图1-2   区块链数据布局**'
- en: The blocks once recorded are designed to be resistant to modification; the data
    in a block cannot be altered retroactively. Through the use of a peer-to-peer
    network and a distributed timestamping server, a public blockchain database is
    managed autonomously. Blockchains are an open, distributed ledger that can record
    transactions between two parties efficiently and in a verifiable and permanent
    way as depicted in [Figure 1-1](ch1.xhtml#ch1fig1).
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦记录，区块被设计为难以修改；块中的数据不能被追溯性地更改。通过使用点对点网络和分布式时间戳服务器，公共区块链数据库被自主管理。区块链是一种开放、分布式的账本，可以高效、可验证且永久地记录两个交易方之间的交易，如图1-1所示：[图1-1](ch1.xhtml#ch1fig1)。
- en: 'The ledger itself can also be programmed to trigger transactions automatically.
    Blockchains are secure by design and an example of a distributed computing system
    with high byzantine fault tolerance. Decentralized consensus can therefore be
    achieved with a public blockchain. As we shall discuss in detail later, these
    features make blockchains ideal for recording events, medical records and other
    records management activities, identity management, transaction processing, and
    a host of emerging applications. Moreover, blockchain technologies allow us to
    achieve large-scale and systematic cooperation in an entirely distributed and
    decentralized manner. This can be considered and implemented as a global governance
    tool, capable of managing social interactions on a large scale and dismissing
    traditional central authorities. For example, in 2015, libertarian political activist
    Vit Jedlička declared Gornja Siga—a seven-square-kilometer patch of uninhabited
    forest between Croatia and Serbia—to be the “Free Republic of Liberland.” He used
    the Bitcoin blockchain as a provisional government and released a constitutional
    document setting out how this new country would be governed: voluntary taxation,
    an almost nonexistent government, and zero restrictions whatsoever on speech and
    information.'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 账本本身也可以被编程来触发自动交易。区块链因其设计而安全，并且是一个具有高拜占庭容错性的分布式计算系统的例子。因此，可以通过公有区块链实现去中心化共识。正如我们稍后详细讨论的，这些特性使区块链成为记录事件、医疗记录和其他记录管理活动、身份管理、交易处理以及一系列新兴应用的理想选择。此外，区块链技术使我们能够以完全分布式和去中心化的方式实现大规模和系统的合作。这可以被考虑并实施为一个全球治理工具，能够管理大规模的社会互动并摒弃传统的中心权威。例如，2015年，自由主义政治活动家Vit
    Jedlička宣布克罗地亚和塞尔维亚之间一片7平方公里的无人口森林地区为“自由共和国利伯兰”。他使用比特币区块链作为临时政府，并发布了一份宪法文件，概述了这个新国家将如何治理：自愿征税、几乎不存在的政府，对言论和信息没有任何限制。
- en: Let’s look at some analogies that illustrate what is different about the public
    blockchain. It’s both a database and the software that envelops it. As software,
    it is like BitTorrent, a program that allows you to upload and download files
    directly with others also running the BitTorrent software. So instead of uploading
    a file to a file-sharing service, such as Dropbox, and then sending your friend
    a link to download the file, you just upload the file directly to your friend’s
    computer. This is what we mean by a peer-to-peer (p2p) program (see [Figure 1-3](ch1.xhtml#ch1fig3)).
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看看一些说明公有区块链不同之处的类比。它既是一个数据库，也包含了 enveloping 它的软件。作为软件，它类似于BitTorrent，一个允许你直接与其他运行BitTorrent软件的人上传和下载文件的程序。所以，不是把文件上传到像Dropbox这样的文件共享服务，然后把下载文件的链接发送给你的朋友，你只需直接把文件上传到你的朋友的电脑上。这就是我们所说的点对点（p2p）程序（见[图1-3](ch1.xhtml#ch1fig3)）。
- en: '![Images](fig1-3.jpg)'
  id: totrans-14
  prefs: []
  type: TYPE_IMG
  zh: '![Images](fig1-3.jpg)'
- en: '**FIGURE 1-3   Decentralized versus centralized data stores**'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: '**图1-3   去中心化与中心化数据存储**'
- en: 'The public blockchain is also a peer-to-peer program with one very important
    difference: not only does it move files (data) from peer to peer, it also ensures
    that all the peers have the same exact data. It enforces this. If the data changes
    on one machine, it changes on all the machines. There are rules specifying exactly
    how a change can be made, and if someone doesn’t follow them and modifies their
    copy illegally, they’re ignored. It’s no different from an email program trying
    to send an email without the proper SMTP headers—it won’t be recognized by other
    email programs. By the same token, if your version gets deleted or corrupted,
    it’s not a problem, just re-sync with your peers and you get a fresh valid copy.'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 公有区块链也是一个点对点的程序，但有一个非常重要的区别：它不仅将文件（数据）从点对点移动，还确保所有节点都有完全相同的数据。它会强制执行这一点。如果一台机器上的数据发生变化，所有机器上的数据都会发生变化。有明确的规则说明如何进行更改，如果有人不遵守这些规则而非法修改他们的副本，那么他们的修改将被忽略。这和试图发送电子邮件而不包含正确的SMTP头的电子邮件程序没有区别——其他电子邮件程序将不会认可它。同样地，如果你的版本被删除或损坏，这不是问题，只需与你的同伴重新同步，你就可以获得一份全新的有效副本。
- en: As noted, the way current public blockchains like Bitcoin and Ethereum work
    is that instead of changing data within the dataset, new data is just appended
    onto the old. In other words, data is only written, never deleted. This is how
    it gets the name *blockchain*, because new data is added in batches, or blocks,
    and appended to the existing blocks, forming a chain of blocks. Not only does
    everyone have the same database (blockchain), but everyone gets a locker within
    the blockchain that only they can access. Normally, exclusive access to something
    is managed with usernames and passwords. The public blockchain has no central
    authority to manage usernames and passwords, so instead it uses cryptography.
    Each user is able to generate a locker address and a private key code that allows
    them to unlock the locker. The locker is only an analogy, of course. In reality
    it’s just an ID number (referred to as an address), which is tagged to a user’s
    data. The private key is a code that allows the user to prove they’re the creator
    (or owner) of that *address*. Only the person who generated the address would
    have the private key, and no one can ever determine what the private key is from
    the address alone.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
- en: So while everyone can see the data tagged with your address in the blockchain,
    no one is allowed to modify it. It can only be modified by the person who can
    prove they’re the owner via the private key. For example, if bitcoins are tagged
    with your address, they cannot be moved (i.e., tagged with another address) unless
    the private key is used.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
- en: What’s also amazing about this system is that anyone can generate an address
    by themselves, in isolation, without concern that it will clash with anyone else’s
    address. The reason for this is that there are so many possible addresses, it
    is essentially impossible to clash with another address, even if you tried.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
- en: It gets better. Not only is static data stored in the dataset, but you can store
    executable code in it too. Say you have a piece of code written in JavaScript-type
    language, such as Ethereum Solidity, sitting there on everyone’s machine waiting
    to be executed. Remember that data is only written to the blockchain, never erased,
    so you now have a piece of code no one can change. Everyone can be certain the
    way it’s written is the way it will always run.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
- en: This code is also tagged with someone’s address. The owner of that address gets
    to decide what operations are open to the public and what only they can execute.
    They only get to make this decision at the time the code is written. Once written,
    it cannot be changed. Everyone will still be able to see the code and what it’s
    doing, but can only interact with it in the ways specified by the owner.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
- en: 'Let’s start with the original motivation to create a blockchain: money. Our
    current monetary system is based on records of how much money is out there and
    who has how much of it. We rely on our governments and banks to maintain these
    records. But a blockchain allows us to keep these records ourselves, since it
    guarantees that the record is the same for everyone. We each keep this dataset—that
    is, the blockchain that contains a record of every single transaction that happens
    in the particular monetary system. Since everyone’s copy is synchronized with
    everyone else’s, no one has to worry about fraudulent or conflicting entries.
    There’s now no need for a bank to manage our records. The blockchain does it instead.
    As far as how money gets created and distributed in the first place, that is another
    story, but the Bitcoin network as well as other cryptocurrencies handle that as
    well.'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们从创建区块链的原始动机开始：货币。我们目前的货币系统基于记录市场上有多少货币以及谁拥有多少货币。我们依赖我们的政府和银行来维护这些记录。但是，区块链允许我们自己维护这些记录，因为它保证记录对每个人来说都是一样的。我们每个人都保存这个数据集——即包含特定货币系统中发生的每一笔交易记录的区块链。由于每个人的副本都与别人的副本同步，所以没有人需要担心欺诈或冲突的条目。现在不再需要银行管理我们的记录。区块链取而代之。至于货币是如何最初产生和分配的，那是另一个故事，但是比特币网络以及其他加密货币也处理这方面的事务。
- en: 'That is just on the data, or ledger, side of things. It gets far more interesting
    when computer code is managed in that way too. Let’s imagine a legal contract:
    Certain actions are taken under certain conditions. Even after the parties sign,
    they must still rely on the good faith of the other or our justice system to carry
    out their side of the agreement. Let’s take an example. Donald hates flight delays.
    AIGore Insurance tells him if he pays them $5 and his flight is delayed by more
    than an hour, AIGore will return his $5 and pay him an additional $20\. A simple
    insurance scheme, or perhaps it’s a bet. In any case, when Donald gives AIGore
    $5 he has to trust them that they will carry out their end of the bargain. However,
    by using a blockchain he can eliminate this risk. Collectively, they write the
    conditions of their agreement in computer code, and initialize the contract with
    enough funds to make good on either side: Donald sends $5 worth of cryptocurrency,
    and AIGore Insurance sends $20\. Then an hour after Donald’s flight is scheduled
    to arrive, the computer code contract will do the following:'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 这只是关于数据或账本方面的事情。当计算机代码也以这种方式管理时，它会变得更加有趣。让我们想象一个法律合同：在某些条件下采取某些行动。即使在各方签署之后，他们仍然必须依赖对方的善意或我们的司法系统来执行他们的协议。让我们举一个例子。唐纳德讨厌航班延误。AIGore保险公司告诉他，如果他支付给他们5美元，并且他的航班延误超过一个小时，AIGore将退还他5美元，并额外支付给他20美元。一个简单的保险计划，或者也许是一场赌注。无论如何，当唐纳德给AIGore支付5美元时，他必须相信他们会履行他们的交易。然而，通过使用区块链，他可以消除这种风险。他们共同将协议的条件写入计算机代码，并注入足够的资金以履行双方的协议：唐纳德发送5美元的加密货币，AIGore保险公司发送20美元。然后，在唐纳德的航班预定到达时间一个小时后，计算机代码合同将执行以下操作：
- en: 1.   Look up Donald’s flight on [www.flightstats.com](http://www.flightstats.com).
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 1.   在[www.flightstats.com](http://www.flightstats.com)上查找唐纳德的航班。
- en: 2.   If it was delayed more than an hour, send Donald $25.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 2.   如果延误超过一个小时，发送给唐纳德25美元。
- en: 3.   Otherwise, send AIGore Insurance $25.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 3.   否则，发送给AIGore保险公司25美元。
- en: This code, once it’s written to the blockchain, cannot be removed or altered.
    Neither party can unilaterally remove the money. Donald and AIGore are guaranteed
    that the terms of the contract will be executed. In the Ethereum blockchain, this
    is termed a *smart contract*; much more on that as we proceed. We will examine
    the code for an application that does just that. See [http://fdd.etherisc.com/](http://fdd.etherisc.com/)
    for details on how this type of insurance is implemented using the blockchain.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦代码被写入区块链，就无法删除或更改。双方都无法单方面移除资金。唐纳德和AIGore可以确保合同条款得到执行。在以太坊区块链中，这被称为*智能合约*；关于那方面的内容我们后面会详细介绍。我们将检查一个应用程序的代码，该程序正是如此操作的。详情请参阅[http://fdd.etherisc.com/](http://fdd.etherisc.com/)，了解如何通过区块链实现这种保险。
- en: 'Blockchain: An Information Technology'
  id: totrans-28
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '[区块链：一种信息技术](http://fdd.etherisc.com/)'
- en: As mentioned, a blockchain is a distributed ledger of transactions implemented
    as data batched into blocks that use cryptographic validation to link the blocks
    together. Each block references and identifies the previous block using a hashing
    function which forms an unbroken chain (i.e., blockchain).
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 如前所述，区块链是一个分布式交易账本，作为数据批量打包成区块，使用加密验证将区块链接在一起。每个区块通过哈希函数引用和标识前一个区块，形成一个不断链（即区块链）。
- en: A public blockchain is not stored in one central computer. Nor is it managed
    by any central entity. Instead, it is distributed and maintained by multiple computers
    or nodes that compete to validate the newest block entries before the other nodes
    to gain a reward for doing so.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 公有区块链并不存储在单一的中心计算机中。它也不由任何中央实体管理。相反，它由多台计算机或节点分布式维护，这些节点相互竞争，在其它节点之前验证最新的区块条目以获得奖励。
- en: The block validation system is designed to be immutable. That is to say, all
    transactions old and new are preserved forever with no ability to delete. Anyone
    on the network can browse via a designated website and see the ledger. This provides
    a way for all participants to have an up-to-date ledger that reflects the most
    recent transactions or changes. In this way, blockchain establishes trust, which
    as we shall see facilitates transactions and brings many cost-saving efficiencies
    to all types of transactional interactions.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 区块验证系统被设计为不可变。也就是说，所有新旧交易都被永久保存，没有任何能力被删除。网络上的任何一个人都可以通过指定的网站浏览并查看账本。这为所有参与者提供了一种方式，以反映最新的交易或变更的实时账本。正是这样，区块链建立了信任，如我们将看到的，这促进了交易并为各种交易互动带来了许多节省成本的效率。
- en: A Distributed Trusted Information Technology
  id: totrans-32
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 分布式可信信息技术
- en: From a technical point of view, the blockchain is a distributed, transparent,
    immutable, validated, secured, and pseudo-anonymous database existing as multiple
    nodes such that if 51 percent of the nodes agree then trust of the chain is guaranteed.
    The blockchain is distributed because a complete copy lives on as many nodes as
    there are in the system. The blockchain is immutable because none of the transactions
    can be changed. The blockchain is validated (e.g., in the Bitcoin space) by the
    miners who are compensated for building the next secure block. The blockchain
    is pseudo-anonymous because the identity of those involved in the transaction
    is represented by an address key in the form of a random string.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 从技术角度来看，区块链是一个分布式、透明、不可变、验证、安全和伪匿名的数据库，存在于多个节点中，如果51%的节点达成共识，那么链的信任就得到保证。区块链是分布式的，因为完整的副本存储在系统中的尽可能多的节点上。区块链是不可变的，因为没有任何交易可以被更改。区块链是验证的（例如，在比特币领域），由矿工验证，他们因构建下一个安全区块而获得补偿。区块链是伪匿名的，因为参与交易的各方身份由一个随机字符串形式的地址密钥表示。
- en: That said, this is an evolving space and, like the cloud computing paradigm,
    there are public, private, and even hybrid blockchains, which we will explore
    in detail later in this chapter. These blockchain variations on the basic theme
    are the result of enterprise architects looking to implement blockchain applications
    to save time and fees. Enterprise requirements around scaling, performance, the
    need to know the identity of those involved in the transaction, and other things
    provide its emerging variations. Blockchain evangelists reckon distributed ledger
    technology has the potential to upend centralized database practices in institutional
    finance and most other transaction-based technology. In 2017, the technology shifted
    from hype to commercial reality. For blockchain to succeed, the application development
    life cycle, which facilitated large web applications using tools like HTML, CSS,
    JavaScript, REST web services, Java, SQL, and NOSQL data stores, will have to
    be amended to integrate the blockchain onto that stack. We will need integrated
    development environments (IDEs) and continuous integration and testing procedures
    to move applications and their attendant code from development to QA and ultimately
    reliable production implementations. Additionally, because blockchains cannot
    access data outside their network on their own, third-party services (known as
    oracles, agents, or data feeds) will also need to be integrated. These oracles
    or agents typically access and verify real-world occurrences and submit this information
    to a blockchain to be used by smart contracts. They provide external data when
    needed and push it onto the blockchain. Such conditions could be anything, such
    as the flight delay information we saw in the insurance example. The blockchain
    will have to operate efficiently, scale well, handle the know-your-client (KYC)
    process, create the aforementioned oracles or APIs that produce and consume off-chain
    services to verify events and data and handle/convert real-world money to and
    from cryptocurrencies, and integrate well with different chains. This is all in
    progress, and we will explore some of these IDEs and development processes in
    detail as we proceed.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 话说回来，这是一个不断发展变化的领域，和云计算一样，存在着公有、私有，甚至混合型区块链，我们将在本章后面详细探讨这些区块链的变体。这些基于基本主题的区块链变体，是企业架构师试图实施区块链应用以节省时间和费用的结果。企业关于扩展性、性能、需要知道交易参与者的身份，以及其他方面的需求，为其新兴变体提供了驱动力。区块链的忠实拥护者认为，分布式账本技术有潜力颠覆机构金融中的集中数据库做法，以及大多数其他基于交易的科技。2017年，这项技术从炒作转向了商业现实。为了使区块链成功，支持大型网络应用的软件开发生命周期，它使用HTML、CSS、JavaScript、REST
    web服务、Java、SQL和NoSQL数据存储等工具，将不得不修改以整合区块链。我们将需要集成开发环境（IDEs）和持续集成与测试流程，以便将应用程序及其相关代码从开发转移到QA，并最终实现可靠的生产实施。此外，因为区块链无法自行访问其网络外的数据，所以还需要整合第三方服务（称为预言机、代理或数据馈送）。这些预言机或代理通常访问并验证真实世界的事件，并将这些信息提交给区块链，供智能合约使用。当需要外部数据时，它们将其推送到区块链上。这种情况可能是任何事物，比如我们在保险示例中看到的航班延误信息。区块链必须高效运行、良好扩展、处理了解你的客户（KYC）过程、创建前述预言机或API，以产生和消费链下服务来验证事件和数据，以及处理/转换现实世界货币与加密货币之间的转换，并且与不同的链良好整合。这一切都正在进行中，我们将详细探讨一些IDE和开发过程。
- en: Implementation Trends
  id: totrans-35
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 实施趋势
- en: A lot has changed since blockchain first emerged as the technology underpinning
    the cryptocurrency Bitcoin as a distributed ledger of transactions and asset ownership
    that is maintained by a network of computers over the Internet. More proof of
    its ability to reduce costs and speed up post-trade processes has emerged in the
    past year. We will explore this in detail.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 自区块链最初作为加密货币比特币背后的技术出现以来，已经发生了许多变化。它是一种分布式账本，记录交易和资产所有权，由互联网上的一组计算机维护。过去一年里，关于其降低成本和加快交易后流程的能力，又有更多的证据出现。我们将详细探讨这一点。
- en: A key factor to its rapid growth is the backdrop against which it has launched.
    Financial institutions and infrastructures are under pressure both to comply with
    regulation and to reduce cost. That pressure coincided with this technology coming
    into existence. It’s the intersection of requirement and opportunity that’s causing
    the rapid growth. The technology will make moves from “proof-of-concept” technology
    into production, especially in cross-border payments and trade finance. In this
    book, we will examine the development life cycle that is emerging with the blockchain.
    Having been developers for over 30 years, we have witnessed lots of changes in
    technology starting from the IBM Assembler/COBOL days. We like to kid our colleagues
    with the fact that we may have worked on the first blockchain.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 其快速增长的关键因素是它所推出的背景。金融机构和基础设施正面临既要遵守监管又要降低成本的双重压力。这种压力与这项技术的出现恰好相吻合。正是需求与机会的交汇点导致了快速增长。技术将从“概念验证”进入生产，特别是在跨境支付和贸易金融方面。在这本书中，我们将探讨与区块链一起出现的开发生命周期。作为一名超过30年的开发者，我们见证了从IBM汇编器/COBOL时代开始的技术的许多变化。我们喜欢跟同事们开玩笑，说我们可能参与过第一个区块链。
- en: Back in 1974, no Wall Street firm had its own computer. All processing was done
    by the famous payroll firm Automatic Data Processing (ADP), located a few blocks
    away from the heart of Wall Street. The licensed securities exchange firms would
    drop their stack of punch cards containing the transactions into a designated
    dropbox. They also dropped off one of their master data magnetic tapes containing
    the sort of “blockchain”—that is, all transactions to date for that particular
    organization in sequential order stored in IBM’s QSAM format. The programs written
    in Fortran, COBOL, or IBM assembler could only read data sequentially front to
    back. The cards representing the transactions would be added to the end of the
    existing chain of QSAM records, creating/writing a new tape file and hence a new
    state of the database or simple blockchain. Next came the emergence of early database
    technology like IBM IMS, IDMS, and ADABAS, followed by the dawn of the ever-enduring
    SQL in the mid-1980s. Then the open source revolution led to the Linux/Python/Java/SQL/NOSQL/HTML/JavaScript
    technology stack where web development and database development have matured to
    create the big data/web-enabled world we live in. Blockchain will further disrupt
    this evolution to bring trust firmly back into the picture. That said, it will
    have to be integrated into this existing development paradigm. These changes are
    emerging. Early adopters of blockchain used first-generation IDEs to develop applications
    and, as we shall see, JavaScript-type languages for things like smart contracts,
    to be discussed in a later chapter. Moreover, integrating blockchain with existing
    applications will also present challenges that we will examine.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 在1974年，华尔街没有一家公司有自己的计算机。所有的处理工作都由位于华尔街心脏地带几街之外的著名工资单公司自动数据处理（ADP）完成。持有经营许可证的证券交易公司会把包含交易记录的穿孔卡片堆放在一个指定的投放箱中。他们还会放下一条包含其“区块链”的磁带——即按顺序存储在IBM的QSAM格式中的该组织迄今为止的所有交易。用Fortran、COBOL或IBM汇编器编写的程序只能按顺序从前向后读取数据。代表交易的卡片会被添加到QSAM记录链的末尾，创建/编写新的磁带文件，从而产生数据库或简单区块链的新状态。接着，早期数据库技术如IBM
    IMS、IDMS和ADABAS问世，随后是1980年代中期SQL的诞生。开源革命催生了Linux/Python/Java/SQL/NoSQL/HTML/JavaScript技术栈，其中网络开发和数据库开发已经成熟，共同创造了我们现在所生活的大数据/网络驱动的世界。区块链将进一步颠覆这一演变，将信任重新带回到图中。话说回来，它必须整合到这个现有的发展范式中。这些变化正在出现。区块链的早期采用者使用第一代集成开发环境（IDE）来开发应用程序，正如我们将在后面章节中讨论的那样，使用JavaScript类型的语言来编写智能合约等。此外，将区块链与现有应用程序集成也将带来挑战，我们将进行探讨。
- en: 'As further impetus to the rise of blockchain, we expect 2018 will be dominated
    by last-minute preparations for the incoming revised European Union Revised Payment
    Services Directive (PSD2) effective in May of that year. As PSD2 becomes implemented,
    banks’ monopoly on their customers’ account information and payment services will
    disappear. PSD2 enables bank customers—both consumers and businesses—to use third-party
    providers to manage their finances. That means you may be using Google to pay
    your bills, make transfers, and analyze your spending. Banks will provide these
    third parties access to their customers’ accounts through open APIs (application
    program interfaces). The EU directive opens the door to any interested company,
    with provisions that will make it easier for startups to access data from banks.
    This will allow the startups to use blockchain to better penetrate some functions
    currently performed by banks. With the creation of open banking platforms, there
    will be opportunities for financial technology (fintech) firms to partner with
    banks to create new wave customer experiences and provide increased transparency
    on performance and fee structures. We believe that 2018 is the year that fintech
    catches up with the hype: validating blockchain-based technologies with promise,
    scale, customers, and adoption. We are all seeing signs that are consistent with
    a technology going mainstream in the next five years and changing the transactional
    landscape for many more years to follow.'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 随着区块链的兴起，我们预计2018年将充斥着为即将到来的修订版欧盟支付服务指令（PSD2）做最后时刻的准备，该指令将于同年5月生效。随着PSD2的实施，银行对其客户账户信息和支付服务的垄断将消失。PSD2允许银行客户——无论是消费者还是企业——使用第三方提供商管理他们的财务。这意味着你可能使用谷歌来支付账单、进行转账和分析你的支出。银行将通过开放API（应用程序编程接口）向这些第三方提供访问其客户账户的方式。欧盟指令为任何有兴趣的公司打开大门，其条款将使初创公司更容易从银行获取数据。这将允许初创公司使用区块链更好地渗透银行目前执行的一些功能。随着开放银行平台的创建，将有机会让金融科技（fintech）公司与银行合作，创造新的客户体验并提供性能和费用结构方面的更大透明度。我们相信2018年是金融科技赶上炒作的时候：验证具有前景、规模、客户和采用的基于区块链的技术。我们都在看到与一项技术在未来五年内走向主流并改变许多后续交易格局一致的迹象。
- en: 'Trust: The Byzantine Generals Problem'
  id: totrans-40
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 信任：拜占庭将军问题
- en: Back in early days of business computing, circa 1980, computer scientists began
    to examine reliability and computers. It was determined that a reliable computer
    system must be able to cope with the failure of one or more of its components.
    A failed component may exhibit a type of behavior that is overlooked and problematic,
    namely, sending conflicting information to different parts of the system. The
    problem of coping with this type of failure is expressed abstractly as the *Byzantine
    Generals Problem*, from the 1982 scholarly paper by Leslie Lamport, Robert Shostak,
    and Marshall Pease ([www-inst.eecs.berkeley.edu/~cs162/fa12/hand-outs/Original_Byzantine.pdf](http://www-inst.eecs.berkeley.edu/~cs162/fa12/hand-outs/Original_Byzantine.pdf)).
    This abstract problem and the solutions thereof are used in developing highly
    reliable and trusted blockchain implementations.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 在商业计算机的早期，大约1980年左右，计算机科学家开始研究计算机的可靠性。人们认为一个可靠的计算机系统必须能够应对其一个或多个组件的故障。一个失败的组件可能会表现出一种被忽视且具有问题的行为，即向系统的不同部分发送冲突信息。应对这种故障的问题被抽象地表述为*拜占庭将军问题*，来自1982年Leslie
    Lamport，Robert Shostak和Marshall Pease的学术论文 ([www-inst.eecs.berkeley.edu/~cs162/fa12/hand-outs/Original_Byzantine.pdf](http://www-inst.eecs.berkeley.edu/~cs162/fa12/hand-outs/Original_Byzantine.pdf))。这个抽象问题及其解决方案被用于开发高可靠性和值得信赖的区块链实现。
- en: 'The Byzantine Generals Problem Explained: Why Trust Is So Important'
  id: totrans-42
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 拜占庭将军问题解释：为什么信任如此重要
- en: The Byzantine Generals Problem (BGP) is one of many in the field of agreement
    protocols. Lamport framed his paper around a story problem. This was the style
    of the day as evidenced by the attention received by another computer scientist,
    Edsger Dijkstra and his dining philosophers problem, based on a classic operating
    system synchronization problem.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 拜占庭将军问题（BGP）是众多一致性协议问题中的一个。Lamport在他的论文中围绕一个故事问题进行了阐述。这是当时的一种风格，正如由另一位计算机科学家Edsger
    Dijkstra提出的哲学家就餐问题所引起的关注，该问题基于一个经典的操作系统同步问题。
- en: To set the table for this problem—and as the musical *Hamilton* will be on Broadway
    long after this book is out of print—we see that the BGP problem was relevant
    in the American Revolution. At the start of the conflict, the Continental Congress
    ordered an oath of allegiance to be administered to all army officers. George
    Washington, the commander-in-chief, administered it to the general officers. When
    Washington began to read the oath to Major General Charles Lee, Lee withdrew his
    hand from the Bible. When Washington demanded a reason for the strange conduct,
    according to *The Writings of George Washington*, Lee replied, “As to King George,
    I am ready enough to absolve myself from all allegiance to him; but I have some
    scruples about the Prince of Wales.” This odd reply elicited much laughter. Lee
    was then playing a desperate game of treason, and probably had some problems with
    his conscience about taking such an oath which he (and later Major General Benedict
    Arnold) would violate.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 为了阐述这个问题，以及因为这本书出版后，音乐剧《汉密尔顿》将在百老汇长期上演，我们看到BGP问题在美国独立战争时期是相关的。冲突开始时，大陆会议命令对所有军队军官进行忠诚誓言。乔治·华盛顿，总司令，给将军们举行了誓言仪式。当华盛顿开始向查尔斯·李将军读誓言时，李将军把手从圣经上缩了回去。当华盛顿要求李解释这种奇怪的行为时，据《乔治·华盛顿的著作》记载，李回答说：“至于乔治国王，我完全准备免除我对他的所有忠诚；但对于威尔士亲王，我有些犹豫。”这个奇怪的回答引起了很多笑声。李当时正在玩一场危险的叛国游戏，而且可能对自己的良心有些问题，因为他（和后来的大卫·伯纳德将军）将违反这种誓言。
- en: 'The BGP is built around a similar story line: the commanding general who makes
    a decision to attack or retreat, and must communicate the decision to his lieutenant
    generals. A given number of these actors are traitors (possibly including the
    general). Traitors cannot be relied upon to properly communicate orders; worse
    yet, they may actively alter messages in an attempt to subvert the process.'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: BGP围绕一个类似的情节构建：做出决定进攻或撤退的指挥将军，必须将决定传达给他的副将军们。有一定数量的角色是叛徒（可能包括将军）。叛徒不能保证正确地传达命令；更糟糕的是，他们可能会试图颠覆过程
    actively alter messages。
- en: 'In the analogy, the generals are collectively known as processes, the general
    who initiates the order is the source process, and the orders sent to the other
    processes are messages. Traitorous generals and lieutenant generals are faulty
    processes, and loyal generals and lieutenant generals are correct processes. The
    order to retreat or attack is a message with a single bit of information: a one
    or a zero.'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个类比中，将军们统称为进程，发起命令的将军是源进程，发送给其他进程的命令是消息。叛徒将军和副将军是故障进程，忠诚的将军和副将军是正确进程。撤退或进攻的命令是一条带有单一信息位的消息：一或零。
- en: 'A solution to an agreement problem must pass three tests: termination, agreement,
    and validity. As applied to the Byzantine Generals Problem, these three tests
    are:'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 解决一个协议问题的方案必须通过三项测试：终止性、一致性和有效性。应用于拜占庭将军问题时，这三项测试是：
- en: 1.   A solution has to guarantee that all correct processes eventually reach
    a decision regarding the value of the order they have been given.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 1.   解决方案必须保证所有正确的进程最终就所给命令的值达成决定。
- en: 2.   All correct processes have to decide on the same value of the order they
    have been given.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 2.   所有正确的进程必须对所给命令的同一值做出决定。
- en: 3.   If the source process is a correct process, all processes must decide on
    the value that was original given by the source process.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 3.   如果源进程是正确的进程，所有进程必须就源进程最初给出的值达成决定。
- en: The best way we know to implement a reliable trustworthy computer system (e.g.,
    blockchain) is to use many different processors to compute the same result, and
    then to perform a majority vote on their outputs to obtain a single value. See
    [Figure 1-4](ch1.xhtml#ch1fig4), which views the BGP and blockchain issues in
    a side-by-side analogy.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 我们所知的最可靠的可信计算机系统（例如，区块链）实现方法是使用许多不同的处理器计算相同的结果，然后对他们输出的结果进行多数投票以获得一个值。参见[图1-4](ch1.xhtml#ch1fig4)，该图从并列的角度看待BGP和区块链问题。
- en: '![Images](fig1-4.jpg)'
  id: totrans-52
  prefs: []
  type: TYPE_IMG
  zh: '![图像](fig1-4.jpg)'
- en: '**FIGURE 1-4   BGP and blockchain compared**'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: '**图1-4   BGP与区块链比较**'
- en: This is true whether one is implementing a blockchain using distributed nodes
    to protect against the failure of reaching a consensus on the next block, or a
    missile defense system using redundant computing sites to protect against the
    destruction of individual sites by a nuclear attack. The only difference is in
    the size of the replicated processor. The use of majority voting to achieve reliability
    is based upon the assumption that all the nonfaulty processors will produce the
    same output. This is true so long as they all use the same input. However, any
    single input message comes from a single physical component, and a malfunctioning
    component can give different values to different processors. Moreover, different
    processors can get different values even from a nonfaulty input unit if they read
    the value while it is changing. The solution is a trust mechanism of value verification
    and acceptance for each input/transaction recorded by a majority of processors
    and synchronization of the input transaction across the distributed processors.
    The quality of trust is a foundational element of business. Trust, particularly
    in the global economy where every link in the transaction requires a separate
    ledger, is expensive, time-consuming, and inefficient. The application of blockchain
    as it matures will provide a viable alternative to the current procedural, organizational,
    and technological infrastructure required to create institutionalized trust.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 无论是在实现使用分布式节点来防止达成下一个区块共识失败的区块链，还是使用冗余计算站点来防止个别站点因核攻击而遭到破坏的导弹防御系统，这一点都是正确的。唯一不同的是复制品的大小。使用多数投票来实现可靠性的基础假设是所有非故障处理器将产生相同的输出。只要它们都使用相同的输入，这就是正确的。然而，任何单一的输入消息都来自一个物理组件，一个故障组件可以给不同的处理器不同的值。此外，不同的处理器即使从一个非故障输入单元读取值，也可能得到不同的值，如果他们在值变化时读取的话。解决方案是一个信任机制，对每个处理器记录的输入/交易进行值验证和接受，并在分布式处理器之间同步输入交易。信任的质量是商业的基础元素。特别是在全球经济中，每一笔交易都需要单独的账本，信任是昂贵、耗时且低效的。随着区块链的成熟应用，将提供一个可行的替代当前所需的程序、组织和技术基础设施，以创建制度化的信任。
- en: 'Byzantine Fault Tolerance in Use Today: Why Airplanes Are Safe'
  id: totrans-55
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 当今使用的拜占庭容错：为什么飞机是安全的
- en: '*Byzantine fault tolerance* (BFT) refers to the aforementioned BGP. One example
    of BFT in use is Bitcoin. The Bitcoin network works in parallel to generate a
    chain of hashcash-style proof-of-work. The proof-of-work chain is the key to overcoming
    Byzantine failures and reaching a coherent global view of the system state.'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 拜占庭容错（BFT）是指前面提到的BGP。拜占庭容错的一个应用实例是比特币。比特币网络并行工作，生成一个哈希现金风格的证明工作链。工作量证明链是克服拜占庭失败和达到系统状态一致的全球视图的关键。
- en: Some aircraft systems, such as the Boeing 777 Aircraft Information Management
    System (via its ARINC 659 SAFEbus® network), the Boeing 777 flight control system,
    and the Boeing 787 flight control systems, use Byzantine fault tolerance (see
    [Figure 1-5](ch1.xhtml#ch1fig5)). Because these are real-time systems, their Byzantine
    fault tolerance solutions must have very low latency. For example, SAFEbus can
    achieve Byzantine fault tolerance on the order of a microsecond of added latency.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 一些飞机系统，如波音777飞机信息管理系统（通过其ARINC 659 SAFEbus®网络）、波音777飞行控制系统以及波音787飞行控制系统，使用了拜占庭容错（见[图1-5](ch1.xhtml#ch1fig5)）。因为这些是实时系统，它们的拜占庭容错解决方案必须具有非常低的延迟。例如，SAFEbus可以在增加微秒级的延迟的情况下实现拜占庭容错。
- en: '![Images](fig1-5.jpg)'
  id: totrans-58
  prefs: []
  type: TYPE_IMG
  zh: '![Images](fig1-5.jpg)'
- en: '**FIGURE 1-5   BFT and airplane safety ARINC 659 SAFEbus**'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: '**图1-5   BFT与飞机安全ARINC 659 SAFEbus**'
- en: Some spacecraft, such as the SpaceX Dragon flight system, consider Byzantine
    fault tolerance in their design. Byzantine fault tolerance mechanisms use components
    that repeat an incoming message (or just its signature) to other recipients of
    that incoming message. All these mechanisms make the assumption that the act of
    repeating a message blocks the propagation of Byzantine symptoms. For systems
    that have a high degree of safety or security criticality, these assumptions must
    be proven to be true to an acceptable level of fault coverage. When providing
    proof through testing, one difficulty is creating a sufficiently wide range of
    signals with Byzantine symptoms. Such testing likely will require specialized
    fault injectors.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 一些航天器，如SpaceX的龙飞船系统，在其设计中考虑了拜占庭容错性。拜占庭容错机制使用重复传入消息（或仅是其签名）到该传入消息的其他接收者的组件。所有这些机制都假设重复消息的行为阻止了拜占庭症状的传播。对于那些安全或安全关键性程度高的系统，这些假设必须被证明为真，以达到可以接受的故障覆盖水平。在通过测试提供证明时，一个困难是创建具有拜占庭症状的足够广泛的信号。这样的测试可能需要专门的故障注入器。
- en: Satoshi Nakamoto’s Blockchain Breakthrough
  id: totrans-61
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 中本聪的区块链突破
- en: Satoshi Nakamoto is the name used by the unknown person or persons who designed
    Bitcoin and created its original reference implementation, Bitcoin Core. As a
    part of the implementation, they also devised the first blockchain database and
    solved the double-spending problem for digital currency. They were active in the
    development of Bitcoin up until December 2010.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 中本聪是设计比特币并创建其原始参考实现比特币核心的未知个人或个人的名字。作为实现的一部分，他们还设计了第一个区块链数据库，并解决了数字货币的双重支付问题。他们一直活跃在比特币的开发中，直到2010年12月。
- en: 'Satoshi Nakamoto: The Man, the Myth, the Mystery'
  id: totrans-63
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 中本聪：这个人，神话，谜团
- en: If the mystery is of interest, we suggest you view the film *Banking on Bitcoin*.
    The film reviews the life stories and public misconceptions surrounding the cryptocurrency’s
    rise. The movie is well paced and informative, using interviews with financial
    columnists from the *Wall Street Journal* and the *New York Times*, early adopting
    Bitcoin entrepreneurs like Charlie Shrem and Erik Voorhees, and establishment
    figures such as the Winklevoss brothers and former New York State Superintendent
    of Financial Services Benjamin Lawsky. It is a pretty good tour of the history
    of cryptographic technology. Like lots of new technology, blockchain and Bitcoin
    are the work of a small group of coders known as cypherpunks. They contributed
    to the ideas that became the building blocks of Bitcoin. In the mid-1990s, just
    a handful of people had the knowledge necessary to develop a blockchain currency.
    The movie explores theories that Satoshi Nakamoto, the unknown creator of Bitcoin,
    may well have been one the original cypherpunks as he is rumored to have lived
    within a few city blocks of other cypherpunks, such as cryptographer Hal Finney.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 如果这个谜团引起了你的兴趣，我们建议你观看电影《Banking on Bitcoin》。该电影回顾了加密货币崛起周围的生活故事和公众误解。这部电影节奏紧凑且富有信息量，使用了《华尔街日报》和《纽约时报》的金融专栏作家、早期采用比特币的企业家如Charlie
    Shrem和Erik Voorhees，以及Winklevoss兄弟和前纽约州金融服务 Superintendent Benjamin Lawsky等 Establishment
    figures。它是密码技术历史的很好的游览。像许多新技术一样，区块链和比特币是被称为密码朋克的一小群程序员的工作。他们对成为比特币建筑块的想法做出了贡献。在1990年代中期，只有少数人具备开发区块链货币所需的必要知识。电影探讨了理论，即比特币的未知创造者中本聪可能是最初的密码朋克之一，因为据传闻他住在其他密码朋克，如密码学家Hal
    Finney的几条街之遥。
- en: The narrative contrasts the differences between centralized banking systems
    and the public ledger at the heart of Bitcoin that removes the need for a central
    authority. It highlights Bitcoin’s power to reduce remittance fees, serve the
    two and a half billion people on the planet who remain unbanked, and put financial
    control back into the hands of the individual.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 该叙述对比了集中银行系统和比特币核心的公共账本之间的区别，后者消除了对中央权威的需求。它突显了比特币减少汇款费用、为地球上剩下的25亿未银行人口提供服务，以及将财务控制权交还给个人的力量。
- en: 'Erik Voorhees, the founder of ShapeShift, communicates this sentiment in one
    of the film’s first interviews: “I discovered Bitcoin’s power when I understood
    it was not controlled by a central company or central person. I knew that meant
    it couldn’t be shut down. And if it can’t get shut down, all it needs is to do
    something useful, and it will become more and more adopted.”'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: ShapeShift的创始人Erik Voorhees在电影中的第一次采访中表达了这种情绪：“当我明白比特币不受任何中央公司或中央个人的控制时，我发现了比特币的力量。我知道这意味着它不能被关闭。如果它不能被关闭，它只需要做一些有用的事情，它就会越来越多地被采用。”
- en: Nakamoto has claimed to be a man living in Japan, born in 1975\. However, speculation
    about the true identity of Nakamoto has mostly focused on a number of cryptography
    and computer science experts of non-Japanese descent, living in the United States
    and Europe. It became a bit of “I’m Spartacus” as Australian programmer Craig
    Steven Wright has claimed to be Nakamoto, though he has not yet offered proof
    of this. As of February 2017, Nakamoto is believed to own up to roughly 1 million
    bitcoins (valued at about $4 billion USD) but has never spent even a single BTC.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 中本聪自称是一个住在日本的1975年出生的人。然而，关于中本聪真实身份的猜测主要集中在一些非日本血统的密码学和计算机科学专家身上，这些人居住在美国和欧洲。这成为了一种“我是斯巴达人”的现象，因为澳大利亚程序员Craig
    Steven Wright声称自己是中本聪，尽管他还没有提供证明。截至2017年2月，中本聪被认为拥有大约100万个比特币（价值约40亿美元），但从未花费过一个BTC。
- en: 'Satoshi Nakamoto: Timing Is Everything'
  id: totrans-68
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 中本聪：时机至关重要
- en: Curiously, Bitcoin’s emergence was around the same time as the financial crisis
    of 2008\. According to [https://bitcoin.org](https://bitcoin.org), a purely peer-to-peer
    version of electronic cash allows online payments to be sent directly from one
    party to another without going through a central financial institution. Digital
    signatures provide part of the solution, but the main benefits are lost if a trusted
    third party is still required to prevent double-spending. Bitcoin is a solution
    to the double-spending problem using a peer-to-peer network. The network timestamps
    transactions by hashing them into an ongoing chain of hash-based proof-of-work,
    forming a record that cannot be changed without redoing the proof-of-work. The
    longest chain not only serves as proof of the sequence of events witnessed, but
    proof that it came from the largest pool of CPU power. As long as the majority
    of CPU power is controlled by nodes that are not cooperating to attack the network,
    they’ll generate the longest chain and outpace attackers. The network itself requires
    minimal structure. Messages are broadcast on a best-effort basis, and nodes can
    leave and rejoin the network at will, accepting the longest proof-of-work chain
    as proof of what happened while they were gone. If people lose faith in a currency,
    the typical reaction is to start using another one.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 有趣的是，比特币的出现恰逢2008年的金融危机。根据[https://bitcoin.org](https://bitcoin.org)的说法，一种纯粹的点对点电子现金版本允许在线支付直接从一方发送到另一方，而无需通过中央金融机构。数字签名提供了部分解决方案，但如果仍然需要一个可信赖的第三方来防止双重支付，那么主要的好处就会丧失。比特币通过点对点网络解决了双重支付问题。网络通过将交易哈希到一个基于工作量证明的持续哈希链中来时间戳交易，形成一条不能在不重新执行工作量证明的情况下更改的记录。最长的链不仅作为见证事件序列的证明，也是来自最大CPU能力池的证明。只要大多数CPU能力由不合作攻击网络的节点控制，它们就会生成最长的链并超越攻击者。网络本身要求的最小结构。消息是以最佳努力的方式广播的，节点可以随时离开和重新加入网络，接受最长的工作量证明链作为他们离开时发生的事情的证明。如果人们失去对一种货币的信任，典型的反应是开始使用另一种货币。
- en: Traditionally, money has moved to the most stable currency, which has typically
    been the US dollar. But Bitcoin has a couple of advantages. The first advantage
    is that it is not controlled by any central authority. In countries where people
    are distrustful of how central banks and governments manage the economy, Bitcoin
    may seem like a more sensible alternative.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 传统上，货币流向最稳定的货币，这通常是美元。但比特币有两个优势。第一个优势是它不受任何中央权威的控制。在一些人们对中央银行和政府如何管理经济持怀疑态度的国家，比特币可能看起来像是一个更合理的替代品。
- en: The second is that bitcoins may be easier to obtain than other fiat currencies.
    It can be bought and sold via Bitcoin exchanges online but also in direct transactions
    via websites. Evidence suggests that during times of crisis, people are looking
    to Bitcoin as an alternative to their own problematic currencies. As the Greek
    debt crisis unfolded, Bitcoin exchanges reported an increase in volume as people
    traded the cryptocurrency around the world. The price of bitcoins also rose significantly
    as the Greece crisis deepened, lending further credence to the idea of Bitcoin
    as a “panic” currency.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 第二个原因是，获取比特币可能比其他法定货币更容易。它可以通过在线比特币交易所买卖，也可以通过网站进行直接交易。迹象表明，在危机时刻，人们正在寻求比特币作为他们问题缠身的货币的替代品。随着希腊债务危机的爆发，比特币交易所报告的交易量有所增加，人们在全球范围内交易这种加密货币。比特币的价格也在希腊危机加深时显著上涨，进一步证实了比特币作为“恐慌”货币的观点。
- en: 'Blockchain: Underpinning of Cryptocurrency'
  id: totrans-72
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 区块链：加密货币的基础
- en: As we all know by now, blockchain provides the technology underpinnings of Bitcoin,
    which has been the subject of much interest and speculation within the technical,
    business, and law enforcement communities. It got a bad rap when Bitcoin became
    the exchange currency for dark-web sites like Silk Road. According to Coinmap
    ([http://coinmap.org](http://coinmap.org)), a crowdsourced website that tracks
    businesses that accept Bitcoin as a method of payment, the number of such businesses
    is on a constant and growing rise. While the revenues from Bitcoin are still a
    fraction of overall revenue, wider adoption of Bitcoin and other cryptocurrencies
    is pretty much a given, especially as the financials see the savings of time and
    money gained in global transactions. For example, Rand Merchant Bank research
    ([https://news.bitcoin.com/south-africa-bank-blockchain-40-revenue/](https://news.bitcoin.com/south-africa-bank-blockchain-40-revenue/))
    found that cryptocurrencies could make up to 40 percent of banks’ revenue if they
    become a global standard. Both IBM and Microsoft offer their own versions of Blockchain-as-a-Service
    (BaaS) as part of their cloud platforms, and Donald Tapscott in his book *BlockChain
    Revolution* says that “blockchains, the technology underpinning the cryptocurrency,
    have the potential to revolutionize the world economy.”
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 正如我们所知，区块链为比特币提供了技术基础，比特币在技术、商业和法律执行社区中引起了极大的兴趣和猜测。当比特币成为暗网网站如丝绸之路的交换货币时，它饱受诟病。根据Coinmap网站（[http://coinmap.org](http://coinmap.org)）的数据，这是一个追踪接受比特币作为支付手段的企业的众包网站，这类企业的数量正在不断增长。虽然比特币带来的收入仍然只是总收入的一小部分，但比特币及其他加密货币的更广泛采用几乎是必然的，特别是在金融领域，全球交易中节省时间和金钱的效益日益显现。例如，rand
    Merchant Bank的研究（[https://news.bitcoin.com/south-africa-bank-blockchain-40-revenue/](https://news.bitcoin.com/south-africa-bank-blockchain-40-revenue/)）发现，如果比特币成为全球标准，加密货币可能会占到银行收入的40%。IBM和微软都提供自己的区块链即服务（BaaS）版本，作为其云平台的一部分，唐纳德·塔普斯科特在其著作《区块链革命》中称：“加密货币的底层技术——区块链，有潜力改变世界经济。”
- en: Types of Blockchain
  id: totrans-74
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 区块链的类型
- en: 'As people began to understand how blockchain works, they started using it for
    other purposes: as data storage for things of value, identities, agreements, property
    rights, and a host of other things. Ethereum, which will be one of the main focuses
    of this book, is to date the most comprehensive blockchain innovation after Bitcoin.
    Like cloud computing implementations, different types or categories of blockchain
    have emerged. Analogous to the cloud, you have public blockchains that everyone
    can access and update, you have private blockchains for just a limited group within
    an organization to be able to access and update, and you have a third kind, a
    consortium of blockchains that are used in collaboration with others. While working
    on Wall Street, we saw this consortium type of arrangement as very common between
    five of the larger investment banking firms. The consortium facilitated trades
    at an institutional level among the members, so it makes sense that blockchain
    as a financial technology tool would emerge in this way. The following sections
    are a quick exploration of each blockchain type.'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 当人们开始了解区块链如何工作，他们开始用它来服务于其他目的：作为有价值事物的数据存储、身份、协议、产权以及许多其他事物。以太坊，将是本书的主要关注点之一，迄今为止，在比特币之后，是以太坊带来了最具
    comprehensive 的区块链创新。与云计算实现类似，不同的区块链类型或类别已经出现。与云计算类似，您有公有链，所有人都可以访问和更新，您有私链，只有组织内有限的一组人可以访问和更新，还有第三种，即联盟链，是与他人合作使用的。在华尔街工作时，我们看到五家较大的投资银行之间的这种联盟类型的安排非常普遍。这个联盟为成员之间的机构级交易提供了便利，因此，区块链作为一种金融技术工具以这种方式出现是有意义的。接下来的部分将是对每种区块链类型的一次快速探索。
- en: Public Blockchains
  id: totrans-76
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 公有链
- en: 'A public blockchain is one that initial creators envisioned as: a blockchain
    for all to be able to access and transact with; a blockchain where transactions
    are included if and only if they are valid; a blockchain where everyone can contribute
    to the consensus process. As discussed, the consensus process determines what
    blocks get added to the chain and what the current state is. On the public blockchain,
    instead of using a central server the blockchain is secured by cryptographic verification
    supported by incentives for the miners. Anyone can be a miner to aggregate and
    publish those transactions. In the public blockchain, because no user is implicitly
    trusted to verify transactions, all users follow an algorithm that verifies transactions
    by committing software and hardware resources to solving a problem by brute force
    (i.e., by solving the cryptographic puzzle). The miner who reaches the solution
    first is rewarded, and each new solution, along with the transactions that were
    used to verify it, forms the basis for the next problem to be solved. The verification
    concepts are proof-of-work or proof-of-stake.'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 公有区块链是初始创造者设想的一种区块链：所有人都可以访问和进行交易；只有当交易有效时，交易才会被包含在内；每个人都可以参与到共识过程中。如前所述，共识过程决定了哪些区块将被添加到链上以及当前状态是什么。在公有区块链上，区块链的安全性是由矿工支持的对加密验证的激励机制来保证的，而不是使用中心服务器。任何人都可以成为矿工，聚集并发布这些交易。在公有区块链中，由于没有用户被默认为验证交易，所有用户都遵循一种算法，通过提交软件和硬件资源来解决一个通过暴力方法（即解决加密谜题）的问题。首先达到解决方案的矿工将得到奖励，每个新的解决方案以及用于验证它的交易，都构成了下一个要解决问题的基础。验证概念包括工作量证明或权益证明。
- en: Consortium Blockchains
  id: totrans-78
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 联盟链
- en: A consortium blockchain such as R3 ([www.r3cev.com](https://www.r3cev.com))
    is a distributed ledger where the consensus process is controlled by a preselected
    set of nodes—for example, a consortium of nine financial institutions, each of
    which operates a node, and of which five (like the US Supreme Court) must sign
    every block in order for the block to be valid. The right to read the blockchain
    may be public or restricted to the participants, and there are also hybrid routes
    such as the root hashes of the blocks being public together with an API that allows
    members of the public to make a limited number of queries and get back cryptographic
    proofs of some parts of the blockchain state. These sort of blockchains are distributed
    ledgers that may be considered “partially decentralized.”
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 像R3这样的联盟区块链是一个分布式账本，其共识过程由一组预先选定的节点控制——例如，一个由九家金融机构组成的联盟，每家机构都运行一个节点，其中五家（类似于美国最高法院）必须签署每个区块，才能使区块有效。读取区块链的权利可能是公开的或限制在参与者之间，还有一些混合模式，如块的根哈希是公开的，同时还有一个API，允许公众进行有限次数的查询并获得区块链状态某些部分的加密证明。这类区块链是分布式账本，可以被认为是“部分去中心化”。
- en: Private Blockchains
  id: totrans-80
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 私有区块链
- en: A fully private blockchain is a blockchain where write permissions are kept
    centralized to one organization. Read permissions may be public or restricted
    to an arbitrary extent. Likely applications include database management and auditing
    internal to a single company, so public readability may not be necessary in many
    cases at all, though in other cases public auditability is desired. Private blockchains
    could provide solutions to financial enterprise problems, including compliance
    agents for regulations such as the Health Insurance Portability and Accountability
    Act (HIPAA), anti–money laundering (AML), and know-your-customer (KYC) laws. The
    Hyperledger project from the Linux Foundation and the Gem Health network are private
    blockchain projects under development. See [Chapter 8](ch8.xhtml#ch8) for a detailed
    description of Hyperledger and other private and consortium blockchain technology.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 完全私有的区块链是一个区块链，其写入权限保持集中在一个组织手中。读取权限可能是公开的或限制在任意程度。可能的应用包括单一公司内部的数据库管理和审计，所以在许多情况下，公开可读性根本不是必要的，尽管在其他情况下，公开可审计性是所需的。私有区块链可以为包括健康保险便携性和责任法（HIPAA）、反洗钱（AML）和了解你的客户（KYC）法规在内的金融企业问题提供解决方案。Linux基金会旗下的Hyperledger项目和Gem
    Health网络是正在开发的私有区块链项目。请参阅[第8章](ch8.xhtml#ch8)以详细了解Hyperledger和其他私有及联盟区块链技术。
- en: Comparing Blockchains
  id: totrans-82
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 比较区块链
- en: The distinction between public, consortium, and private blockchains is important.
    Even for “old school” distributed ledger adopters who prefer a traditional centralized
    system, they still get the addition of cryptographic auditability attached. As
    compared to public blockchains, private blockchains have a number of advantages.
    The private blockchain operator can change the rules of a blockchain. If it is
    a blockchain among financial partners, then where errors are discovered they will
    be able to change transactions. Likewise, they will be able to modify balances
    and generally undo anything. That said, there is a trail. In some cases, this
    functionality is necessary, as with property registry if a mistaken transaction
    is issued or some nefarious type has gained access and made themselves the new
    owner. This is also true on a public blockchain if the government has backdoor
    access keys like they did in the Clinton era. On the private blockchain, transactions
    are less expensive, since they only need to be verified by a few nodes that can
    be trusted to have very high processing power. Public blockchains tend to have
    more expensive transaction fees, but this will change as scaling technologies
    emerge and bring public-blockchain costs down to create an efficient blockchain
    system.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 公共、联盟和私有区块链之间的区别是重要的。即使对于偏好传统集中式系统的“老派”分布式账本采用者来说，他们仍然获得了附加的加密可审计性。与公共区块链相比，私有区块链具有一系列优势。私有区块链的运营者可以更改区块链的规则。如果它是在金融机构之间的区块链，那么在发现错误时，它们将能够更改交易。同样，它们将能够修改余额，通常可以撤销任何操作。话说回来，这里有痕迹。在某些情况下，这种功能是必要的，比如在财产登记处，如果发出了错误的交易，或者某些邪恶的人获得了访问权限并成为新的所有者。如果政府像克林顿时代那样拥有后门访问密钥，这同样适用于公共区块链。在私有区块链上，交易成本较低，因为它们只需要由几个可以信任具有非常高的处理能力的节点进行验证。公共区块链的交易费用通常更高，但随着扩展技术的出现，并将公共区块链成本降低，以创建有效的区块链系统，这将发生变化。
- en: Nodes can be trusted to be very well connected, and faults can quickly be fixed
    by manual intervention, allowing the use of consensus algorithms that offer finality
    after much shorter block times. Improvements in public blockchain technology,
    such as Ethereum’s proof-of-stake, can bring public blockchains much closer to
    the “instant confirmation” ideal, but private blockchains will always be faster,
    and the latency difference will never disappear as unfortunately the speed of
    light does not increase by 2x every two years like Moore’s law. If read permissions
    are restricted, private blockchains can provide a greater level of privacy.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 节点可以被信任，连接得非常好，而且通过手动干预可以迅速修复故障，这使得可以使用在更短区块时间后提供最终性的共识算法。公共区块链技术的改进，比如以太坊的权益证明（proof-of-stake），可以让公共区块链更接近“即时确认”的理想状态，但私有区块链始终会更快，不幸的是，光速不会像摩尔定律预测的那样每两年增加一倍，延迟差异也不会消失。如果阅读权限受到限制，私有区块链可以提供更高水平的隐私。
- en: 'Given all of this, it may seem like private blockchains are unquestionably
    a better choice for institutions. However, even in an institutional context, public
    blockchains still have a lot of value. In fact, this value lies to a substantial
    degree in the philosophical virtues that advocates of public blockchains have
    been promoting all along, among the chief of which are freedom, neutrality, and
    openness. The advantages of public blockchains generally fall into two major categories:'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 考虑到所有这些因素，私有区块链似乎无疑是机构更好的选择。然而，即使在机构背景下，公共区块链仍然具有很大的价值。实际上，这种价值在很大程度上在于支持公共区块链的哲学美德，其中最重要的是自由、中立和开放。公共区块链的优势通常可以分为两大类：
- en: •   Public blockchains provide a way to protect the users of an application
    from the developers, establishing that there are certain things that even the
    developers of an application have no authority to do.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 公共区块链提供了一种保护应用程序用户免受开发者侵害的方法，确立了某些即使是应用程序的开发者也无权做的事情。
- en: '•   Public blockchains are open, and therefore used by many entities, This
    provides some networking effects. If we have asset-holding systems on a blockchain,
    and a currency on the same blockchain, then we can cut costs to near-zero with
    a smart contract: Party A can send the asset to a program which immediately sends
    it to Party B which sends the program money, and the program is trusted because
    it runs on a public blockchain. Note that in order for this to work efficiently,
    two completely heterogeneous asset classes from completely different industries
    must be on the same database. This can also be used by other asset holders such
    as land registries and title insurance.'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: •   公共区块链是开放的，因此被许多实体使用，这带来了一些网络效应。如果在区块链上建立资产持有系统，并在同一区块链上设立货币，那么我们可以通过智能合约将成本降至近乎零：甲方可以将资产发送到一个程序，该程序立即将其发送给乙方，乙方再将资金发送给该程序，由于该程序运行在公共区块链上，因此是被信任的。请注意，为了高效地实现这一点，两个完全异质的资产类别，来自完全不同的行业，必须存储在同一个数据库中。这也可以被其他资产持有者使用，比如土地登记处和产权保险。
- en: Blockchain Implementations
  id: totrans-88
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Blockchain Implementations
- en: The concept of decentralized digital currency, as well as alternative applications
    like property registries, has been around for decades, but none has produced viable
    production implementations until now. The anonymous e-cash protocols of the 1980s
    and 1990s were mostly reliant on a cryptographic primitive known as Chaumian blinding
    (after its developer, David Chaum). Chaumian blinding provided these new currencies
    with high degrees of privacy, but their underlying protocols largely failed to
    gain traction because of their reliance on a centralized intermediary. In 1998,
    Wei Dai’s b-money became the first proposal to introduce the idea of creating
    money through solving computational puzzles as well as decentralized consensus,
    but the proposal was scant on details as to how decentralized consensus could
    actually be implemented. In 2005, Hal Finney introduced a concept of “reusable
    proofs of work,” a system that uses ideas from b-money together with Adam Back’s
    computationally difficult Hashcash ([http://hashcash.org](http://hashcash.org))
    puzzles to create a concept for a cryptocurrency, but this once again fell short
    of the ideal by relying on trusted computing as a backend. As we all know, the
    blockchain concept was implemented as a core component of the digital currency
    Bitcoin. This critical and perhaps first production implementation of the blockchain
    made it the first digital currency to solve the double-spending problem, without
    the use of a trusted authority or central server. The Bitcoin design, which we
    examine briefly in the next section, has been the inspiration for other implementations
    we will explore in the chapters to come.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 去中心化数字货币的概念，以及像财产登记册这样的替代应用，已经存在了几十年，但直到现在，没有一种产生了可行的生产实施。20世纪80年代和90年代的匿名电子现金协议主要依赖于一种被称为Chaumian
    blinding（以其开发者David Chaum命名）的密码学原语。Chaumian blinding为这些新货币提供了高度的隐私性，但它们的底层协议由于依赖于中心化的中介而未能获得牵引力。1998年，Wei
    Dai的b-money成为第一个引入通过解决计算难题以及去中心化共识来创建货币的想法的提案，但该提案在去中心化共识的实际实施细节上缺乏足够的信息。2005年，Hal
    Finney提出了一种“可重用的工作量证明”的概念，该系统使用了b-money的想法以及Adam Back的计算上困难的Hashcash（[http://hashcash.org](http://hashcash.org)）难题，创造了一个加密货币的概念，但这又再次因为依赖于可信计算作为后端而未能达到理想的效果。正如我们所知，区块链概念作为数字货币Bitcoin的核心组件得到实现。这种关键的，或许是第一个区块链生产实施，使它成为第一个解决双重支付问题的数字货币，而无需可信权威或中心服务器。我们在下一节简要检查的Bitcoin设计，为我们将要探索的其他实施提供了灵感。
- en: Bitcoin
  id: totrans-90
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: Bitcoin
- en: As we mentioned, when the financial crisis of 2008 was in full throttle, Bitcoin
    (BTC), a decentralized currency, was implemented for the first time in practice
    by Satoshi Nakamoto. Bitcoin combines established primitives for managing ownership
    through public key cryptography with a consensus algorithm for keeping track of
    who owns coins, known as proof-of-work. The mechanism behind proof-of-work simultaneously
    solves two problems. First, it provides an effective consensus algorithm, allowing
    nodes in the network to collectively agree on a set of updates to the state of
    the Bitcoin ledger. Second, it provides a mechanism for allowing free entry into
    the consensus process, solving the political problem of deciding who gets to influence
    the consensus, while simultaneously preventing Sybil attacks—that is, attacks
    where a reputation system is subverted by forging identities in peer-to-peer networks.
    It is named after a case study of a woman diagnosed with dissociative identity
    disorder. It works by substituting a formal barrier to participation, such as
    the requirement to be registered as a unique entity on a particular list, with
    an economic barrier—the weight of a single node in the consensus voting process
    is directly proportional to the computing power that the node brings. More recently,
    an alternative approach has been proposed called proof-of-stake, calculating the
    weight of a node as being proportional to its currency holdings and not its computational
    resources. The discussion concerning the relative merits of the two approaches
    will be examined in the chapters that address the Ethereum-based blockchain and
    derivatives thereof. At this junction in 2018, all blockchain platforms are still
    evolving and will continue to do so for the foreseeable futures. As Bitcoin is
    the most widely used, we will explore it in some detail in the next sections.
    For in-depth details for developers, see [https://bitcoin.org/en/developer-documentation](https://bitcoin.org/en/developer-documentation).
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 如我们所提及的，当2008年的金融危机达到高潮时，比特币（BTC），一种去中心化的货币，第一次在实践中由中本聪（Satoshi Nakamoto）实施。比特币结合了通过公钥加密管理所有权的成熟原语和一个用于跟踪谁拥有硬币的共识算法，称为工作量证明（proof-of-work）。工作量证明背后的机制同时解决了两个问题。首先，它提供了一个有效的一致性算法，允许网络中的节点集体同意比特币账本状态的一组更新。其次，它提供了一种允许自由进入共识过程的机制，解决了决定谁可以影响共识的政治问题，同时防止
    Sybil 攻击——即在点对点网络中通过伪造身份来破坏声誉系统的攻击。它的名称来源于一个被诊断为解离性身份障碍的女性的案例研究。它通过用一种经济障碍替代正式的参与障碍，例如要求在特定列表上注册为唯一实体，来起作用——在共识投票过程中，单个节点的影响力与节点带来的计算能力成正比。最近，一种名为权益证明（proof-of-stake）的替代方法已经被提出，计算节点的权重与其货币持有量成比例，而不是其计算资源。关于这两种方法的相对优点的讨论将在讨论基于以太坊的区块链及其衍生品的章节中进行。到了2018年的这个节点，所有的区块链平台仍在不断发展，并将在可预见的未来继续发展。由于比特币使用最广泛，我们将在接下来的部分详细探讨它。对于开发者的详细信息，请参阅[https://bitcoin.org/en/developer-documentation](https://bitcoin.org/en/developer-documentation)。
- en: Bitcoin State Transition
  id: totrans-92
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 比特币状态转换
- en: 'From a technical standpoint, the ledger of a cryptocurrency such as Bitcoin
    can be thought of as a state transition system, where there is a state S consisting
    of the ownership status of all existing bitcoins (or any asset for that matter)
    and a state transition function—that is, the API: `EXECTX`, which takes a state
    `S` and a transaction `TX` and outputs a new state `S’` which is the result. In
    a standard banking system, for example, the state is a balance sheet, a transaction
    is a request to move $cash money from A to B, and the state transition function
    reduces the value of A’s account by X amount of $cash money and increases the
    value of B’s account by X amount of $cash money. If A’s account has less than
    X amount of $cash money in the first place, the state transition function returns
    an error. We define an API:'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 从技术角度来看，像比特币这样的加密货币的账本可以被看作是一个状态转换系统，其中有一个状态 S，它包括所有现有比特币（或任何资产）的所有权状态和一个状态转换函数——即
    API：`EXECTX`，它接受一个状态 `S` 和一个交易 `TX`，输出一个新的状态 `S’`，即结果。在一个标准的银行系统中，例如，状态是一个资产负债表，一个交易是一份将现金从
    A 转移到 B 的请求，状态转换函数通过减少 A’ 账户中 X 金额的现金并增加 B’ 账户中 X 金额的现金来减少 A 账户的值。如果 A 的账户原本就少于
    X 金额的现金，状态转换函数将返回一个错误。我们定义了一个 API：
- en: '`EXECTX(S,TX) results in S’ (new state) or ERROR and S (no change to state)`'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: '`EXECTX(S,TX) 结果为 S’（新状态）或 ERROR 和 S（状态不变）`'
- en: 'If A has enough $cash money:'
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 如果 A 有足够的现金：
- en: '`EXECTX({ A:$1000, B:$500},“send $500 :A to B”) results in { A:$500, B:$1000
    }`'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: '`EXECTX({ A:$1000, B:$500},“send $500 :A to B”) results in { A:$500, B:$1000
    }`'
- en: 'But if A does not have enough $cash money:'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 但是，如果A没有足够的现金：
- en: '`EXECTX({ A:$1000, B:$500 },“send $1001 from A to B”) results in ERROR`'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: '`EXECTX({ A:$1000, B:$500 },“send $1001 from A to B”) results in ERROR`'
- en: The state in a blockchain is the “consensus view” of all transactions at any
    given moment borne out by the existing authenticated ledger distributed among
    all nodes. In the world of Bitcoin, it is the collection of all unspent transaction
    outputs (UTXOs) that have been minted and not yet spent, with each UTXO having
    a denomination and an owner (defined by a 20-byte address which is essentially
    a cryptographic public key). With respect to UTXOs, because each output of a particular
    transaction can only be spent once, the outputs of all transactions included in
    the blockchain can be categorized as either unspent transaction outputs (see [https://bitcoin.org/en/glossary/unspent-transaction-output](https://bitcoin.org/en/glossary/unspent-transaction-output))
    or spent transaction outputs. For a payment to be valid, it must only use UTXOs
    as inputs.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 区块链中的状态是所有交易在给定时刻的“共识视图”，由现有身份验证的分布式账本 among所有节点承载。在比特币的世界里，这是一系列尚未花费的、已被铸造的交易输出（UTXO）的集合，每个UTXO都有一个面值和一个所有者（由一个20字节地址定义，该地址本质上是一个加密公钥）。关于UTXO，因为每个特定交易的输出只能花费一次，区块链中的所有交易的输出可以归类为未花费交易输出（请参阅[https://bitcoin.org/en/glossary/unspent-transaction-output](https://bitcoin.org/en/glossary/unspent-transaction-output)）或已花费交易输出。为了使付款有效，它只能使用UTXO作为输入。
- en: If the value of a transaction’s outputs exceed its inputs, the transaction will
    be rejected. But if the inputs exceed the value of the outputs, any difference
    in value may be claimed as a transaction fee by the Bitcoin miner who creates
    the block containing that transaction.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 如果交易的输出的价值超过其输入的价值，则交易将被拒绝。但是，如果输入的价值超过输出的价值，任何价值上的差异都可以由创建包含该交易的区块的比特币矿工作为交易费用声称。
- en: A transaction contains one or more inputs, with each input containing a reference
    to an existing UTXO and a cryptographic signature produced by the private key
    associated with the owner’s address, and one or more outputs, with each output
    containing a new UTXO for addition to the state.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 交易包含一个或多个输入，每个输入包含对现有UTXO的引用和一个由与所有者地址相关联的私钥生成的加密签名，以及一个或多个输出，每个输出包含一个添加到状态的新UTXO。
- en: 'The state transition function `EXECTX(S,TX) -> S’` can be defined as follows:'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 状态转换函数`EXECTX(S,TX) -> S’`可以定义如下：
- en: 'For each input in `TX`:'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 对于`TX`中的每个输入：
- en: 1.   If the referenced UTXO is not in S, return an error; this prevents transaction
    senders from spending coins that do not exist.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 1.   如果引用的UTXO不在S中，返回错误；这可以防止交易发送者花费不存在的币。
- en: 2.   If the provided signature does not match the owner of the UTXO, return
    an error; this prevents transaction senders from spending other people’s coins.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 2.   如果提供的签名与UTXO的所有者不匹配，返回错误；这可以防止交易发送者花费别人的币。
- en: 3.   If the sum of the denominations of all input UTXO is less than the sum
    of the denominations of all output UTXO, return an error.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 3.   如果所有输入UTXO的面值之和小于所有输出UTXO的面值之和，返回错误。
- en: 4.   Return `S’` with all input UTXO removed and all output UTXO added.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 4.   返回`S’`，其中移除了所有输入UTXO，并添加了所有输出UTXO。
- en: That is a simple view of the transaction flow for Bitcoin.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 这就是比特币交易流程的简单视图。
- en: Bitcoin Mining
  id: totrans-109
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 比特币挖矿
- en: Bitcoin combines the state transition system with a consensus system in order
    to ensure that everyone agrees on the order of transactions. Bitcoin’s decentralized
    consensus process requires nodes in the network to continuously attempt to produce
    blocks, i.e., 1 to N transactions. The Bitcoin network is intended to create one
    block approximately every 10 minutes, with each block containing a timestamp,
    a nonce, a reference to (i.e., hash of) the previous block, and a list of all
    transactions that have taken place since the previous block. Every block in the
    Bitcoin network has the exact same structure as shown in [Figure 1-6](ch1.xhtml#ch1fig6).
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 比特币将状态转换系统与共识系统相结合，以确保所有人对交易的顺序达成一致。比特币的去中心化共识过程要求网络中的节点不断尝试生产区块，即1到N笔交易。比特币网络旨在大约每10分钟创建一个区块，每个区块包含一个时间戳、一个nonce、对前一个区块的引用（即前一个区块的哈希）以及自上一个区块以来发生的所有交易列表。比特币网络中的每个区块的结构与[图1-6](ch1.xhtml#ch1fig6)中的结构完全相同。
- en: '![Images](fig1-6.jpg)'
  id: totrans-111
  prefs: []
  type: TYPE_IMG
  zh: '![Images](fig1-6.jpg)'
- en: '**FIGURE 1-6   Bitcoin blockchain schema**'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: '**图1-6   比特币区块链架构**'
- en: 'Each newly created block is “chained” to the last added block of the blockchain
    and stores its digital fingerprint. Let us examine the fields of a block, with
    byte sizes subject to change:'
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 每个新创建的区块都被“链接”到区块链的最后添加的区块，并存储其数字指纹。让我们检查一个区块的字段，字节大小可能会有所变化：
- en: '•   Block identifier (4 bytes): This is an identifier for the Blockchain network.
    It has a constant magic number value of 0xD9B4BEF9\. The magic number is not something
    specific to Bitcoin. It identifies the type of the file or data structure you
    are consuming. The consumer can check the magic number and immediately know the
    supposed type of that file or data structure. In this case, it indicates the start
    of the block, and the data is from a production network.'
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: •   区块标识符（4字节）：这是区块链网络的标识符。它有一个常数魔法数字值为0xD9B4BEF9。魔法数字不是比特币特有的东西。它用于标识你正在消费的文件或数据结构类型。消费者可以检查魔法数字，并立即知道该文件或数据结构的可能类型。在这种情况下，它表示区块的开始，数据来自生产网络。
- en: •   Next block identifier (4 bytes).
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: •   下一个区块标识符（4字节）。
- en: '•   Block size (4 bytes): Indicates how large the block is. Since the very
    beginning, each block has been fixed to 1 MB. This will be increased to 2 MB.
    The maximum capacity is 2 GB, so the scalability factor has already been taken
    care of.'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: •   区块大小（4字节）：表示区块有多大。从开始以来，每个区块都被固定为1 MB。这将被增加到2 MB。最大容量为2 GB，因此已经考虑了可扩展性因素。
- en: '•   Block version (4 bytes): Each node running the Bitcoin protocol has to
    implement the same version and it is mentioned in this field.'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: •   区块版本（4字节）：每个运行比特币协议的节点必须实现相同的版本，并且在此字段中提及。
- en: '•   Previous block hash (32 bytes): This is a digital fingerprint (hash) of
    the block header of the previous (last added) block of the blockchain. It is calculated
    by taking all the fields of the header (version, nonce, etc.) together and applying
    a cryptographic function (SHA-256) twice by rearranging the bytes of the individual
    fields (little-endian format).'
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: •   前一个区块哈希（32字节）：这是区块链上最后一个（最后添加的）区块的区块头的一个数字指纹（哈希）。它通过取所有头字段（版本、Nonce等）在一起，并应用加密函数（SHA-256）两次，重新排列各个字段的字节（小端格式）来计算的。
- en: •   Block Merkle root (64 bytes).
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: •   区块Merkle根（64字节）。
- en: •   Block timestamp (8 bytes).
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: •   区块时间戳（8字节）。
- en: •   Nonce (4 bytes).
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: •   Nonce（4字节）。
- en: The block header is composed of the fields from Version to Nonce.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 区块头由版本到Nonce的字段组成。
- en: '•   Transaction counter (variable: 4 bytes): This is the count of transactions
    that are included with the block.'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: •   交易计数器（变量：4字节）：这是包含在区块中的交易的数量。
- en: '•   Transaction list (variable: total blocksize is 1 MB): Stores the digital
    fingerprint of all the transactions in that block. Each individual transaction
    has its own structure.'
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: •   交易列表（变量：总区块大小为1 MB）：存储该区块中所有交易的数字指纹。每个单独的交易都有自己的结构。
- en: You can also see the height of the block (aka the count of blocks) since the
    first block was created, and genesis block, the first block that was mined.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 您还可以查看自第一个区块创建以来的区块高度（也称为区块计数）和创世区块，即第一个被挖出的区块。
- en: Bitcoin Blocksize and Segregated Witness
  id: totrans-126
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 比特币区块大小和隔离见证
- en: 'So a block has a maximum file size of 1 MB. When this block’s space capacity
    is full, another block is created and added up in the blockchain. As the number
    of Bitcoin transactions is increasing, more blocks are created. This is stressing
    the Blockchain network and causing delays in transactions confirmation. Additionally,
    more mining means higher transaction. To address this the Segregated Witness (“SegWit
    “) was proposed. So let’s review—each Bitcoin transaction contains three elements:'
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 所以一个区块的最大文件大小为1 MB。当这个区块的空间容量满时，将创建另一个区块并添加到区块链中。随着比特币交易的增加，将创建更多的区块。这正在压力区块链网络，并导致交易确认延迟。另外，更多的挖矿意味着更高的交易。为了解决这个问题，提出了隔离见证（“SegWit”）方案。所以让我们回顾一下——每个比特币交易包含三个元素：
- en: 1.   Input (sender details)
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 1.   输入（发送者详情）
- en: 2.   Output (recipient details)
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 2.   输出（接收者详情）
- en: '3.   Digital Signature: this signature is called the witness, one who verifies
    that the sender has the right amount of balance to make the transaction'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 3.   数字签名：这个签名被称为见证，验证发送者是否有足够的余额进行交易的见证人。
- en: All of these elements are needed to add the transaction to a block. Of the three
    elements, the file size of Digital Signature is the largest, making the transactions
    heavy in terms of size. As the maximum capacity of each block at present is 1
    MB, therefore more heavy transactions equals less transactions getting added to
    the block for confirmation. SegWit proposes to remove the Digital Signature Element
    from the transaction and add it to another new block called Extended Block. This
    means that any transaction that gets added in the Block for confirmation will
    only contain Input and Output and not the Digital Signature. This will make transactions
    lighter. As a result more space is available in the block, which means more transactions
    can be added into the block. As more transactions will get verified in the same
    amount of time, the Bitcoin network will be faster. Thus, we are removing the
    Witness—the Digital Signature—segregating it to another block (hence the name
    “Segregated Witness”).
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 所有这些元素都是将交易添加到区块所必需的。在这三个元素中，数字签名的文件大小最大，使得交易在大小上显得很重。由于目前每个区块的最大容量是1MB，因此更多的重交易等于更少的交易被添加到区块以供确认。SegWit提议将数字签名元素从交易中移除，并将其添加到另一个名为扩展区块的新区块中。这意味着任何被添加到区块以供确认的交易只包含输入和输出，而不包含数字签名。这将使交易变得更轻。因此，区块中可用的空间更多，这意味着可以添加到区块中的交易更多。由于在相同的时间内验证更多的交易，比特币网络将变得更快。因此，我们移除了证明——数字签名——将其隔离到另一个区块中（因此得名“隔离见证”）。
- en: 'So, the advantages of SegWit are:'
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 所以，SegWit的优势是：
- en: •   it will reduce the file size of transactions,
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: '-   它将减少交易的大小，'
- en: •   there will be faster confirmation of transactions, and
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: '-   交易的确认将更快，并且'
- en: •   transaction fees will be lower.
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: '-   交易费用将更低。'
- en: Thus, SegWit will improve the Bitcoin network scaling ability. Moreover, consensus
    is not required to make SegWit work. SegWit even works where users do not upgrade
    their software versions to the newest version. That said, we will make numerous
    blockchain software improvements as it gains traction in the application development
    world.
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，SegWit将提高比特币网络的可扩展性。此外，使SegWit工作并不需要达成共识。SegWit甚至在用户没有将软件版本升级到最新版本时也能工作。话说回来，随着它在应用开发世界的普及，我们将对区块链软件进行许多改进。
- en: Bitcoin and Merkle Root
  id: totrans-137
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 比特币和Merkle根
- en: Each block contains a list of all transactions. Once the block is part of the
    blockchain it is an immutable record, i.e., the transaction entry in it is permanent.
    It also means that if a transaction is present in one block it will not be present
    in any other block of the blockchain. The transactions are listed as Merkle tree
    or a binary hash tree. It is a very popular data structure used in programming
    languages.
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 每个区块包含所有交易的列表。一旦区块成为区块链的一部分，它就是一个不可变的记录，即其中的交易条目是永久的。这也意味着如果一个交易在一个区块中存在，它将不会存在于区块链的任何其他区块中。交易被列为Merkle树或二进制哈希树。这是在编程语言中使用的一种非常流行的数据结构。
- en: The *root* of the tree is the topmost node. The nodes at the bottom are called
    *leaf* nodes. Each node is simply a cryptographic hash of a transaction. The Merkle
    tree does not contain a list of all the transactions, but rather a hash (digital
    fingerprint) of all transactions as a tree structure (see [Figure 1-7](ch1.xhtml#ch1fig7)).
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 树的*根*是顶节点。底部的节点被称为*叶子*节点。每个节点只是一个交易的加密哈希。Merkle树不包含所有交易的列表，而是一个作为树结构的所有交易的哈希（数字指纹）（参见[图1-7](ch1.xhtml#ch1fig7)）。
- en: '![Images](fig1-7.jpg)'
  id: totrans-140
  prefs: []
  type: TYPE_IMG
  zh: '![Images](fig1-7.jpg)'
- en: '**FIGURE 1-7   Merkle tree**'
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: '**图1-7   Merkle树**'
- en: Hash of Transaction 0 = Hash[Tx(0)] = SHA256 (SHA 256 (Transaction A))
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 交易哈希0 = Hash[Tx(0)] = SHA256 (SHA 256 (Transaction A))
- en: Each hash is calculated by applying the SHA-256 algorithm twice.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 每个哈希都是通过应用两次SHA-256算法计算得到的。
- en: Similarly, to construct a parent node Hash(01), the 32-byte Hash[Tx(0)] and
    32-byte Hash[Tx(1)] is concatenated as a 64-byte hash string and then SHA-256
    is applied twice to give a 32-byte Hash(01).
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 同样，要构建父节点Hash(01)，将32字节的Hash[Tx(0)]和32字节的Hash[Tx(1)]连接成一个64字节的哈希字符串，然后应用两次SHA-256，得到一个32字节的Hash(01)。
- en: This concept can be further expanded to any size. The biggest advantage is that
    it is very easy and highly efficient to determine whether a particular transaction
    has been included within a block (since the block contains the Merkle root—which
    is a digital fingerprint of all transactions contained in it).
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 这个概念可以进一步扩展到任何大小。最大的优点是，它非常容易且高度有效地确定一个特定的交易是否被包含在一个区块中（因为区块包含Merkle根——它是包含在其中的所有交易的数字指纹）。
- en: Bitcoin and Secure Hashing
  id: totrans-146
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 比特币与安全哈希算法
- en: SHA stands for *secure hash algorithm*. It is used to prove data integrity.
    The same input(s) will always produce the exact same output. This output is always
    256 bits or 32 bytes in length regardless of the length of the input (even if
    input is millions of bytes). Any change in the input(s) will result in a change
    of output. The same output can never be derived from different input(s). However,
    from the output we can never determine the inputs, which is why this is highly
    secure. You can test it yourself at a few online SHA-256 tools (such as [www.xorbin.com/tools/sha256-hash-calculator](http://www.xorbin.com/tools/sha256-hash-calculator)).
    The input can be any string, even concatenating many strings. Regardless of the
    input the output remains 256 bits.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 安全哈希算法（SHA）用于证明数据完整性。相同的输入总会产生完全相同的输出。无论输入长度如何（即使输入是数百万字节），这个输出总是256位或32字节长。输入的任何变化都会导致输出的变化。相同的输出永远不可能从不同的输入中得到。然而，从输出我们永远无法确定输入，这就是它高度安全的原因。您可以在一些在线SHA-256工具（如[www.xorbin.com/tools/sha256-hash-calculator](http://www.xorbin.com/tools/sha256-hash-calculator)）上自行测试。输入可以是任何字符串，甚至是连接多个字符串。无论输入如何，输出始终是256位。
- en: Over time, this creates a persistent, ever-growing blockchain that continually
    updates to represent the latest state of the Bitcoin ledger.
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 随着时间的推移，这创建了一个持续增长、不断更新的区块链，用以代表比特币账本最新的状态。
- en: 'The algorithm for checking if a block is valid, expressed in this paradigm,
    is as follows:'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 检查一个区块是否有效的算法，按照这个范式表达如下：
- en: 1.   Check if the previous block referenced by the block exists and is valid.
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 1.   检查区块引用的前一个区块是否存在且有效。
- en: 2.   Check that the timestamp of the block is greater than that of the previous
    block.
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 2.   检查区块的时间戳是否大于前一个区块的时间戳。
- en: 3.   Check that the proof-of-work on the block is valid.
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 3.   检查区块的工作量证明是有效的。
- en: Let S[0] be the state at the end of the previous block.
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 让S[0]是前一个区块结束时的状态。
- en: Suppose TX is the block’s transaction list with n transactions.
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 假设TX是区块的交易列表，包含n笔交易。
- en: For all i in 0...n-1, set S[i+1] = EXECTX({ (S[i],TX[i]) }.
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 对于所有i在0...n-1，设置S[i+1] = EXECTX({ (S[i],TX[i]) }。
- en: If any application returns an error, exit and return false.
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 如果任何应用程序返回错误，退出并返回假。
- en: Return true, and register S[n] as the state at the end of this block.
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 返回真，并注册S[n]为这个区块结束时的状态。
- en: Essentially, each transaction in the block must provide a valid state transition
    from what was the canonical state before the transaction was executed to some
    new state. Note that the state is not encoded in the block in any way; it is purely
    an abstraction to be remembered by the validating node and can only be computed
    for any block by starting from the genesis state and sequentially applying every
    transaction in every block. Additionally, note that the order in which the miner
    includes transactions into the block matters; if there are two transactions A
    and B in a block such that B spends a UTXO created by A, then the block will be
    valid if A comes before B but not otherwise.
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 本质上，区块中的每一笔交易必须提供从交易执行前的一致状态到某种新状态的有效状态转换。请注意，状态在区块中以任何方式编码；它只是一种由验证节点记忆的抽象，并且只能通过对每个区块中的每一笔交易依次应用从创世区块开始计算。另外，请注意矿工将交易包含在区块中的顺序很重要；如果在区块中有两笔交易A和B，且B花费了由A创建的未花费交易输出（UTXO），那么如果A在B之前，区块将是有效的，否则不是。
- en: The one validity condition present is the requirement for proof-of-work. The
    precise condition is that the double SHA-256 hash of every block, treated as a
    256-bit number, must be less than a dynamically adjusted target. The purpose of
    this is to make block creation computationally hard, thereby preventing Sybil
    attackers from remaking the entire blockchain in their favor. Because SHA-256
    is designed to be a completely unpredictable pseudorandom function, the only way
    to create a valid block is simply trial and error, repeatedly incrementing the
    nonce and seeing if the new hash matches.
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 存在的有效性条件是工作量证明的要求。精确条件是，每个区块的双重SHA-256哈希，作为256位数字，必须小于动态调整的目标。这样做是为了使区块创建具有计算难度，从而防止Sybil攻击者将整个区块链重制以利于自己。由于SHA-256被设计成一个完全不可预测的伪随机函数，创建有效区块的唯一方法就是简单地尝试和错误，反复增加nonce，看看新的哈希是否匹配。
- en: 'In order to better understand the purpose of mining, let us examine what happens
    in the event of a malicious attack. Since Bitcoin’s underlying cryptography is
    known to be secure, the attacker will target the one part of the Bitcoin system
    that is not protected by cryptography directly: the order of transactions. The
    attacker’s strategy is a simple double-spend:'
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 为了更好地理解挖矿的目的，让我们来看看恶意攻击事件中会发生什么。由于比特币的基础加密学是被公认安全的，攻击者将会针对比特币系统不受直接加密保护的那部分：交易的顺序。攻击者的策略是一个简单的双重花费：
- en: 1.   Send 1,000 BTC to a merchant in exchange for some product (preferably a
    rapid-delivery digital good).
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 1.   发送1,000 BTC给商家，以换取某些产品（最好是快速交付的数字商品）。
- en: 2.   Wait for delivery of the product.
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 2.   等待产品的交付。
- en: 3.   Produce another transaction sending the same 1,000 BTC to himself.
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 3.   创建另一笔交易，将同样的1,000 BTC发送给自己。
- en: 4.   Convince the network that his transaction to himself was the one that came
    first.
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 4.   让网络相信他发送给自己的那笔交易是最先发生的。
- en: Once step 1 has taken place, after a few minutes some miner will include the
    transaction in a block. After about an hour, five more blocks will have been added
    to the chain after that block, with each of those blocks indirectly pointing to
    the transaction and thus “confirming” it. At this point, the merchant will accept
    the payment as finalized and deliver the product; since we are assuming this is
    a digital good, delivery is instant. Now the attacker creates another transaction
    sending the 1,000 BTC to himself. If the attacker simply releases it into the
    wild, the transaction will not be processed; miners will attempt to run `EXECTX({
    (S, TX) })` and notice that TX consumes a UTXO that is no longer in the state.
    So instead the attacker creates a “fork” of the blockchain, starting by mining
    another version of the block pointing to the same block as a parent but with the
    new transaction in place of the old one. Because the block data is different,
    this requires redoing the proof-of-work. Furthermore, the attacker’s new version
    of the block has a different hash, so the original blocks do not point to it;
    thus, the original chain and the attacker’s new chain are completely separate.
    The rule is that in a fork the longest blockchain is taken to be the truth. In
    order for the attacker to make his blockchain the longest, he would need to have
    more computational power than the rest of the network combined to catch up and
    effect the so-called “51% attack.”
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 当第一步完成之后，几分钟内，某个矿工将会把这笔交易包含在一个区块里。大约一个小时后，会有五个更多的区块被添加到那个区块之后的链上，每个区块都间接地指向那笔交易，从而“确认”它。此时，商家会接受这笔支付为最终完成，并交付产品；由于我们假设这是一个数字商品，所以交付是即时的。现在，攻击者创建另一笔将1,000
    BTC发送给自己的交易。如果攻击者只是将其释放到网络中，这笔交易将不会被处理；矿工会尝试运行`EXECTX({ (S, TX) })`并注意到TX消耗了一个不再处于状态中的UTXO。因此，攻击者创建了一个区块链的“分叉”，起始于挖出另一个版本区块，该区块将相同的旧区块作为父区块，但用新交易替代了旧交易。因为区块数据不同，这需要重新进行工作量证明。此外，攻击者新版本的区块具有不同的散列值，所以原始区块不会指向它；因此，原始链和攻击者的新链完全分离。规则是，在分叉中，最长的区块链被认为是真实的。为了使攻击者的区块链最长，他需要比网络剩余部分的总计算能力还要强，以追赶上并实现所谓的“51%攻击”。
- en: Merkle Trees
  id: totrans-166
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: Merkle Trees（默克尔树）
- en: 'An important scalability feature of Bitcoin is that the block is stored in
    a multilevel data structure. The “hash” of a block is actually only the hash of
    the block header, a roughly 200-byte piece of data that contains the timestamp,
    nonce, previous block hash, and the root hash of a data structure called the Merkle
    tree storing all transactions in the block. A Merkle tree is a type of binary
    tree, composed of a set of nodes with a large number of leaf nodes at the bottom
    of the tree containing the underlying data, a set of intermediate nodes where
    each node is the hash of its two children, and finally a single root node, also
    formed from the hash of its two children, representing the “top” of the tree.
    The purpose of the Merkle tree is to allow the data in a block to be delivered
    piecemeal: a node can download the header of a block from one source, the small
    part of the tree relevant to them from another source, and still be assured that
    all of the data is correct. The reason why this works is that hashes propagate
    upward. If a malicious user attempts to swap in a fake transaction to the bottom
    of a Merkle tree, this change will cause a change in the node above, and then
    a change in the node above that, finally changing the root of the tree and therefore
    the hash of the block, causing the protocol to register it as a completely different
    block and almost certainly with an invalid proof-of-work. The Merkle tree protocol
    is arguably essential to long-term sustainability.'
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: Bitcoin的一个重要可扩展性特点是区块存储在多级数据结构中。一个区块的“哈希”实际上只是该区块头的哈希，这是一个大约200字节的数据，包含了时间戳、随机数（nonce）、前一个区块的哈希以及一个名为Merkle树的哈希结构，该树存储了区块中的所有交易。Merkle树是一种二叉树，由大量位于树底部的叶节点组成，包含底层数据的一组节点、一组中间节点，其中每个节点的值是它的两个子节点的哈希，最后是一个单一的根节点，也是由其两个子节点的哈希形成的，代表树的“顶部”。Merkle树的目的是允许区块中的数据分块传递：一个节点可以从一来源下载区块的头部，与他们相关的树的小部分从另一个来源下载，仍然可以确保所有的数据都是正确的。之所以这样做是因为哈希值向上传播。如果恶意用户试图在Merkle树的底部交换一个假交易，这种变化将导致上面的节点发生变化，然后是上面节点的变化，最终改变树的根和块的哈希，导致协议将其注册为完全不同的块，几乎可以肯定的是，它具有无效的工作量证明（proof-of-work）。Merkle树协议可以说对长期可持续性至关重要。
- en: Bitcoin Scripting
  id: totrans-168
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: Bitcoin Scripting
- en: 'Even without any extensions, the Bitcoin protocol provides a less than robust
    version of the concept of smart contracts. UTXO in Bitcoin can be owned not just
    by a public key but also by a more complicated script expressed in a simple stack-based
    programming language. In this paradigm, a transaction spending that UTXO must
    provide data that satisfies the script. Indeed, even the basic public key ownership
    mechanism is implemented via a script: the script takes an elliptic curve signature
    as input, verifies it against the transaction and the address that owns the UTXO,
    and returns 1 if the verification is successful and 0 otherwise. Other, more complicated
    scripts exist for various additional use cases. For example, one can construct
    a script that requires signatures from two out of a given three private keys to
    validate (multisig), a setup useful for corporate accounts, secure savings accounts,
    and some merchant escrow situations. Scripts can also be used to pay bounties
    for solutions to computational problems, and one can even construct a script that
    says something like “this Bitcoin UTXO is yours if you can provide an SPV proof
    that you sent a Dogecoin transaction of this denomination to me,” essentially
    allowing decentralized cross-cryptocurrency exchange.'
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 即使没有任何扩展，比特币协议也提供了一个智能合约概念的不太健壮的版本。在比特币中，UTXO（未使用的交易输出）不仅可以由公钥拥有，也可以由更复杂的脚本拥有，这些脚本用一种简单的基于栈的编程语言表达。在这种范式中，花费该UTXO的交易必须提供满足脚本的数据。实际上，即使是基本的公钥所有权机制也是通过脚本实现的：脚本接受一个椭圆曲线签名作为输入，将其与交易和拥有UTXO的地址进行验证，如果验证成功则返回1，否则返回0。还存在其他更复杂的脚本，用于各种其他用例。例如，可以构建一个脚本，要求来自给定三个私钥中的两个的签名来验证（多签名），这种设置适用于企业账户、安全储蓄账户以及某些商户托管情况。脚本还可以用于为计算问题的解决方案支付赏金，甚至可以构建一个脚本，其内容类似于“这个比特币UTXO是你的，如果你能提供一个SPV证明，证明你向我发送了这笔特定面额的Dogecoin交易，”这实际上允许去中心化的跨加密货币交换。
- en: Namecoin
  id: totrans-170
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: Namecoin
- en: Created in 2010, Namecoin ([http://namecoin.org](http://namecoin.org)) is a
    decentralized name registration database. In decentralized protocols like Tor,
    Bitcoin, and Bitmessage, there needs to be some way of identifying accounts so
    that other people can interact with them. Namecoin is the oldest and most successful
    implementation of a name registration system using such an idea. It is open-source
    technology which improves decentralization, security, censorship resistance, privacy,
    and speed of certain components of the Internet infrastructure such as DNS and
    identities. Namecoin is a key/value pair registration and transfer system based
    on the Bitcoin technology.
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 创建于2010年的Namecoin([http://namecoin.org](http://namecoin.org))是一个去中心化的名称注册数据库。在像Tor、比特币和Bitmessage这样的去中心化协议中，需要有一种方式来识别账户，以便其他人可以与它们互动。Namecoin是使用这种想法实现名称注册系统的最古老和最成功的实现。它是一种开源技术，可以提高互联网基础设施某些组件（如DNS和身份）的去中心化、安全性、抗审查、隐私和速度。Namecoin是基于比特币技术的键/值对注册和传输系统。
- en: Ripple
  id: totrans-172
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: Ripple
- en: 'Ripple ([www.ripple.com](https://www.ripple.com)) is seen as one of the most
    advanced distributed ledger technology (DLT) companies in the industry. It focuses
    on the using of blockchain-like technology for payments. The Ripple protocol has
    been adopted by an increasing number of financial institutions to offer alternative
    remittance options to consumers. Ripple even has obtained a virtual currency license
    from the New York State Department of Financial Services, making it one of the
    few companies with a BitLicense. As of 2017, Ripple is the third-largest cryptocurrency
    by market capitalization, after bitcoin and ether. Ripple is a financial real-time
    gross settlement solution, currency exchange, and remittance network using distributed
    ledger technology. Ripple is built upon a distributed open-source Internet protocol,
    consensus ledger, and native currency called XRP (ripples) enabling (cross-border)
    payments for retail customers, corporations, and other banks. The Ripple protocol,
    described as “basic (settlement) infrastructure technology for interbank transactions,”
    enables the interoperation of different ledgers and payment networks and brings
    together three aspects of modern payment solutions: messaging, settlement, and
    FX management. It allows banks and non-bank financial services companies to incorporate
    the Ripple protocol into their own systems and thereby allow their customers to
    use the service.'
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: Ripple([www.ripple.com](https://www.ripple.com))被认为是行业内最先进的分布式账本技术（DLT）公司之一。它专注于利用区块链类似技术进行支付。Ripple协议已经被越来越多的金融机构采纳，为消费者提供替代的汇款选项。Ripple甚至从纽约州金融服务部门获得了虚拟货币牌照，使其成为拥有BitLicense的少数公司之一。截至2017年，Ripple按市值计算是第三大加密货币，仅次于比特币和以太坊。Ripple是一个使用分布式账本技术的金融实时全额结算解决方案、货币兑换和汇款网络。Ripple建立在分布式开源互联网协议、共识账本和本地货币XRP（ripples）之上，可实现零售客户、公司和其它银行的跨境支付。Ripple协议被描述为“银行间交易的基本（结算）基础设施技术”，可实现不同账本和支付网络的互操作性，并将现代支付解决方案的三个方面结合在一起：消息传递、结算和外汇管理。它允许银行和非银行金融服务公司将其Ripple协议纳入自己的系统，从而允许他们的客户使用该服务。
- en: The protocol enables the instant and direct transfer of money between two parties.
    As such the protocol can circumvent the fees and wait times of the traditional
    correspondent banking system. Any type of currency can be exchanged, including
    USD, euros, RMB, yen, gold, airline miles, and rupees. Ripple has its own form
    of digital currency (dubbed XRP) in a manner similar to Bitcoin, using the currency
    to allow financial institutions to transfer money with negligible fees and wait
    time. One of the specific functions of XRP is as a bridge currency, which can
    be necessary if no direct exchange is available between two currencies at a specific
    time, for example, when transacting between two rarely traded currency pairs.
    Within the network’s currency exchange, XRP are traded freely against other currencies,
    and their market price fluctuates against dollars, euros, yen, bitcoins, etc.
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 该协议实现了双方之间货币的即时直接转移。因此，该协议可以绕过传统代理银行系统的费用和等待时间。任何类型的货币都可以进行交换，包括美元、欧元、人民币、日元、黄金、航空里程和卢比。Ripple拥有自己的数字货币形式（称为XRP），与比特币类似，使用该货币使金融机构能够以微不足道的费用和等待时间转移资金。XRP的一个特定功能是作为桥梁货币，当两种货币之间没有直接交换时可能需要这种货币，例如，当交易两种很少交易的货币对时。在网络的货币交易所中，XRP可以自由与其他货币交换，并且它们的市场价格会相对于美元、欧元、日元、比特币等波动。
- en: Many financial companies have subsequently announced experimenting and integrations
    with Ripple. A host of major banks have adopted Ripple to improve their cross-border
    payments, and many have completed trial blockchain projects. These banking institutions—including
    Santander, UniCredit, UBS, Royal Bank of Canada, Westpac Banking Corporation,
    CIBC, and National Bank of Abu Dhabi, among others—view Ripple’s payment protocol
    and exchange network as a valid mechanism for offering real-time affordable money
    transfers.
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 许多金融公司随后宣布正在试验与Ripple的集成。许多大型银行采用了Ripple来改进他们的跨境支付，许多已经完成了试点区块链项目。这些银行机构——包括桑坦德、意大利联合信贷银行、瑞士银行、加拿大皇家银行、西太平洋银行、加拿大帝国商业银行和阿布扎比国家银行等——认为Ripple的支付协议和交易所网络是提供实时低成本资金转移的有效机制。
- en: Ethereum
  id: totrans-176
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 以太坊
- en: 'Ethereum ([https://ethereum.org](https://ethereum.org)) is a decentralized
    platform that runs smart contracts: applications that run exactly as programmed
    without any possibility of downtime, censorship, fraud, or third-party interference.
    If Bitcoin was blockchain 1.0, then Ethereum is blockchain 2.0 and beyond. See
    [Figure 1-8](ch1.xhtml#ch1fig8).'
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 以太坊（[https://ethereum.org](https://ethereum.org)）是一个去中心化的平台，运行智能合约：按编程精确运行的应用程序，没有任何可能的中断、审查、欺诈或第三方干预。如果比特币是区块链
    1.0，那么以太坊就是区块链 2.0 和更先进。参见[图 1-8](ch1.xhtml#ch1fig8)。
- en: '![Images](fig1-8.jpg)'
  id: totrans-178
  prefs: []
  type: TYPE_IMG
  zh: '![Images](fig1-8.jpg)'
- en: '**FIGURE 1-8   Ethereum blockchain platform**'
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: '**图 1-8   以太坊区块链平台**'
- en: Ethereum applications run on a custom-built blockchain, a shared global infrastructure
    that can move value around and represent the ownership of property. This enables
    developers to create markets, store registries of debts or promises, and move
    funds in accordance with instructions given long in the past (such as a will)
    or a futures contract without a middleman or counterparty risk. The project was
    bootstrapped via an ether presale in August 2014 by fans all around the world.
    It is developed by the Ethereum Foundation, a Swiss nonprofit, with contributions
    from great minds across the globe. We will explore Ethereum in great detail as
    it will be the focus and implementation of most of the development code we will
    present. From a developer’s point of view, Ethereum is the platform that’s most
    likely to succeed. In March 2017, the Ethereum Enterprise Alliance was formed.
    The list of participating organizations includes Microsoft, Intel, J.P. Morgan,
    BNY Mellon, and a host of others. Some startups have used derivatives of the Ethereum
    platform to produce collaborative and private blockchains that are not even concerned
    with cryptocurrency. The assets they transact with will be securities, insurance,
    title registrations, and so on.
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 以太坊应用运行在自建的区块链上，这是一个共享的全球基础设施，可以移动价值，代表财产所有权。这使得开发者能够创建市场、存储债务或承诺的注册表，并根据很久以前给出的（如遗嘱）或没有中间人或对手风险的期货合约来转移资金。该项目于2014年8月通过以太币预售由世界各地的粉丝启动。它是由一个瑞士非营利组织以太坊基金会开发的，全球各地的伟大思想为其做出了贡献。我们将详细探讨以太坊，因为它将是大多数我们将展示的开发代码的焦点和实现。从开发者的角度来看，以太坊是最有可能成功的平台。2017年3月，成立了以太坊企业联盟。参与组织的名单包括微软、英特尔、摩根大通、纽约梅隆银行等。一些初创公司使用以太坊平台的后代产生了协作和私有的区块链，甚至不关心加密货币。他们交易的资产将是证券、保险、产权登记等。
- en: Blockchain Collaborative Implementations
  id: totrans-181
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 区块链协作实施
- en: As large enterprises have started to take notice of how the blockchain technology
    could save them time and money, their interest in creating enterprise versions
    of the blockchain has led to the creation of some collaborative implementations.
    These collaborative implementations are growing in number. We will examine a few
    of the current ones. We believe these collaborations, although the subject of
    some widespread criticism, will lead to a mature blockchain technology equipped
    with interactive development environments (IDE), debugging techniques, deployment
    techniques, and all the trappings required for enterprise implementations.
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 随着大型企业开始关注区块链技术如何为他们节省时间和金钱，他们对创建企业版本的区块链产生了兴趣，这导致了某些协作实现的创建。这些协作实施正在增加。我们将检查一些当前的实施情况。我们认为这些合作，虽然受到了一些广泛的批评，将导致成熟的区块链技术的出现，这种技术配备了交互式开发环境（IDE）、调试技术、部署技术以及企业实施所需的所有设施。
- en: Hyperledger
  id: totrans-183
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 超级账本
- en: Hyperledger ([https://www.hyperledger.org](https://www.hyperledger.org)) is
    an open-source collaborative effort created to advance cross-industry blockchain
    technologies. It is a consortium of companies working together to develop standardized
    blockchain protocols. The project aims to develop open protocols and standards
    by providing a modular framework that supports different components for different
    uses. This would include a variety of blockchains with their own consensus and
    storage models, and services for identity, access control, and contracts. It is
    a global collaboration hosted by the Linux Foundation (see [Figure 1-9](ch1.xhtml#ch1fig9)).
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 超级账本（[https://www.hyperledger.org](https://www.hyperledger.org)）是一个旨在推进跨行业区块链技术的开源协作努力。它是一个由多家公司组成的联盟，共同开发标准化区块链协议。该项目旨在通过提供一个支持不同组件的模块化框架，为不同用途开发开放协议和标准。这包括具有自己的共识和存储模型的各种区块链，以及用于身份验证、访问控制和合同的服务。这是一个由
    Linux 基金会主办的全球合作（参见[图 1-9](ch1.xhtml#ch1fig9)）。
- en: '![Images](fig1-9.jpg)'
  id: totrans-185
  prefs: []
  type: TYPE_IMG
  zh: '![Images](fig1-9.jpg)'
- en: '**FIGURE 1-9   Hyperledger project branches**'
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: '**图 1-9   Hyperledger 项目分支**'
- en: Hyperledger Fabric is the IBM contribution, a distributed ledger technology
    (DLT) implementation for the enterprise, with capabilities including network security,
    scalability, confidentiality, and performance, in a modular blockchain architecture.
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: 超级账本 Fabric 是 IBM 的贡献，是一个企业分布式账本技术（DLT）实现，具有网络安全、可扩展性、机密性和性能的模块化区块链架构。
- en: Hyperledger Burrow codebase is a contribution by Monax and is an Ethereum Virtual
    Machine–compatible blockchain. Hyperledger Sawtooth Lake codebase is a contribution
    by Intel. They have targeted some applications integrating Internet of Things
    (IoT) sensors to track data on a blockchain, recording data including ownership,
    position, location, temperature, humidity, motion, shock, and tilt. We will examine
    each of these branches in the “use case” chapters to follow.
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 超级账本 Burrow 代码库由 Monax 贡献，是一个与以太坊虚拟机兼容的区块链。超级账本 Sawtooth Lake 代码库由英特尔贡献。他们针对一些集成物联网（IoT）传感器的应用，在区块链上追踪数据，包括所有权、位置、位置、温度、湿度、运动、冲击和倾斜。我们将在随后的“用例”章节中检查这些分支中的每一个。
- en: Hyperledger’s reference architecture is depicted in [Figure 1-10](ch1.xhtml#ch1fig10).
    These categories are a logical structure, not a physical depiction of partitioning
    of components into separate processes, address spaces, or (virtual) machines.
    Some of these components will be built from the ground up, some will use existing
    open-source code, and some will interface with existing services to fulfill the
    required functions.
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 超级账本的参考架构如图 1-10 所示（[图 1-10](ch1.xhtml#ch1fig10)）。这些类别是一种逻辑结构，而不是物理描绘组件分区到不同进程、地址空间或（虚拟）机器中。其中一些组件将从零开始构建，一些将使用现有的开源代码，一些将与现有服务接口以实现所需功能。
- en: '![Images](fig1-10.jpg)'
  id: totrans-190
  prefs: []
  type: TYPE_IMG
  zh: '![Images](fig1-10.jpg)'
- en: '**FIGURE 1-10   Hyperledger’s reference architecture**'
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: '**图 1-10   超级账本的参考架构**'
- en: Corda
  id: totrans-192
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 科达拉
- en: Corda ([www.corda.net](https://www.corda.net)) is a distributed ledger platform
    designed to record, manage, and automate legal agreements between business partners.
    It is a collaborative effort by R3, a group of more than 100 financial companies.
    The development team is made up of financial industry veterans, technologists,
    new tech entrepreneurs, and subject matter experts, bringing together expertise
    to reengineer the financial markets ecosystem. Corda is a distributed ledger made
    up of mutually distrusting nodes that would allow for a single global database
    that records the state of deals and obligations between institutions and people.
    This would eliminate much of the time-consuming manual effort currently required
    to keep disparate ledgers synchronized with each other. It would also allow for
    greater levels of code sharing than presently used in the financial industry,
    reducing the cost of financial services for everyone.
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 科达拉（[www.corda.net](https://www.corda.net)）是一个分布式账本平台，旨在记录、管理和自动化企业合作伙伴之间的法律协议。这是由
    R3 发起的，R3 是一个由 100 多家金融机构组成的小组。开发团队由金融行业资深人士、技术专家、新技术企业家和行业专家组成，共同重新塑造金融市场生态系统。科达拉是由相互不信任的节点组成的分布式账本，将允许记录单个全球数据库中机构和个人之间的交易和义务状态。这将消除目前需要将不同账本同步的大部分耗时手动工作。它还将允许在金融行业中比目前更高的代码共享水平，从而降低所有人的金融服务成本。
- en: 'From the technical point of view, Corda is a decentralized database platform
    with the following novel features: New transaction types can be defined using
    JVM bytecode. Transactions may execute in parallel, on different nodes, without
    either node being aware of the other’s transactions. Nodes are arranged in an
    authenticated peer-to-peer network. All communication is direct. There is no blockchain.
    More likely, Corda could accurately be described as a messaging protocol. Transaction
    races are deconflicted using pluggable notaries. A single Corda network may contain
    multiple notaries that provide their guarantees using a variety of different algorithms.
    Thus, Corda is not tied to any particular consensus algorithm.'
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: 从技术角度来看，Corda 是一个具有以下创新特性的分布式数据库平台：可以使用 JVM 字节码定义新的交易类型。交易可以在不同的节点上并行执行，而无需任一节点了解另一节点的交易。节点布置在一个经过身份验证的对等网络中。所有的通信都是直接的。没有区块链。更确切地说，Corda
    可以被准确描述为一个消息协议。使用可插拔的公证人（notaries）来解决交易冲突。一个单一的 Corda 网络可能包含多个提供不同算法保证的公证人。因此，Corda
    并不绑定到任何特定的共识算法。
- en: Data is shared on a need-to-know basis. Nodes provide the dependency graph of
    a transaction they are sending to another node on demand, but there is no global
    broadcast of all transactions. Bytecode-to-bytecode transpilation is used to allow
    complex, multistep transaction building protocols, called flows, to be modeled
    as blocking code. The code is transformed into an asynchronous state machine,
    with checkpoints written to the node’s backing database when messages are sent
    and received. A node may potentially have millions of flows active at once, and
    they may last days, across node restarts and even upgrades. Flows expose progress
    information to node administrators and users and may interact with people as well
    as other nodes. A flow library is provided to enable developers to reuse common
    flow types such as notarization, membership broadcast, and so on.
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 数据是基于需要知道的原则进行共享。节点在发送交易给其他节点时，会提供该交易的依赖图，但并不是所有交易的全局广播。通过字节码到字节码的转换，允许复杂的多步骤交易构建协议（称为流，flows），以阻塞代码的形式进行建模。代码被转换成一个异步状态机，当发送和接收消息时，将检查点写入节点的后端数据库。一个节点可能同时有数百万个流在活跃，它们可能持续数天，跨越节点重启甚至升级。流向节点管理员和用户提供进度信息，并且可以与人和其他节点进行交互。提供了一个流库，以使开发者能够重用常见的流类型，如公证、成员广播等。
- en: The data model allows for arbitrary object graphs to be stored in the ledger.
    These graphs are called states and are the atomic unit of data. Nodes are backed
    by a relational database. Data placed in the ledger can be queried using SQL as
    well as joined with private tables, thanks to slots in the state definitions that
    are reserved for join keys. The platform provides a rich type system for the representation
    of things like dates, currencies, legal entities, and financial entities such
    as cash, issuance, deals, and so on. States can declare a relational mapping and
    can be queried using SQL. Integration with existing systems is considered from
    the start. The network can support rapid bulk data imports from other database
    systems without placing load on the network. Events on the ledger are exposed
    via an embedded JMS compatible message broker. States can declare scheduled events.
    For example, a bond state may declare an automatic transition to an “in default”
    state if it is not repaid in time. Corda follows a general philosophy of reusing
    existing proven software systems and infrastructure where possible.
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: 数据模型允许任意对象图存储在账本中。这些图被称为状态（states），是数据的原子单位。节点由关系数据库支持。放置在账本中的数据可以使用 SQL 进行查询，并且还可以与私有表进行连接，多亏了在状态定义中保留给连接键的槽位。平台为日期、货币、法律实体以及金融实体（如现金、发行、交易等）提供了丰富的类型系统。状态可以声明一个关系映射，并且可以使用
    SQL 进行查询。从一开始就考虑与现有系统的集成。网络可以支持从其他数据库系统快速导入大量数据，而不会对网络造成负担。账本上的事件通过一个内嵌的与 JMS
    兼容的消息代理暴露出来。状态可以声明计划事件。例如，如果债券状态在规定时间内未偿还，它可能会声明自动过渡到“违约”状态。Corda 遵循一个普遍的哲学，即尽可能重用现有的经过验证的软件系统和基础设施。
- en: Blockchain in Practical Use Today
  id: totrans-197
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 区块链在实际应用中的现状
- en: Blockchain technology has the potential to transform business operating models
    in the long term. Blockchain distributed ledger technology is foundational. The
    use of blockchains will garner significant efficiencies in global supply chains,
    financial transactions, asset ledgers, and decentralized social networking. Some
    blockchain applications, as we shall see in this section, are a disruptive innovation;
    they enable substantially lower-cost solutions to be created, thereby disrupting
    existing business models.
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 区块链技术有潜力长期改变企业的运营模式。区块链分布式账本技术是基础。区块链的使用将在全球供应链、金融交易、资产账本和去中心化社交网络中带来显著的效率。正如本节将看到的，一些区块链应用是一种颠覆性创新；它们使得可以创建成本大幅降低的解决方案，从而颠覆现有的商业模式。
- en: Blockchain in the Financial Technology Space
  id: totrans-199
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 区块链在金融科技领域的应用
- en: Having been in the financial technology (“fintech”) space before it was known
    as “fintech,” the growth of global transactions has required more and more advanced
    technology applications to speed up and reduce transaction costs for securities
    such as equities. Traditional trade processes within asset management can be slow,
    manual, cumbersome, and filled with risk when reconciling and matching—and they’re
    getting more complex with cross-border transactions and for nonstandard investment
    products, such as loans. Each party in the trade life cycle (e.g., broker dealers,
    intermediaries, custodians, clearing and settlement teams) currently keeps their
    own copy of the same record of a transaction, creating significant inefficiencies
    and room for error.
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: 在“金融科技”（“fintech”）这个词被广泛知晓之前，我就一直在金融科技领域。全球交易的增长需要越来越多的先进技术应用来加速和降低股票等证券的交易成本。在资产管理中的传统交易流程可能会很慢、手工操作繁琐，充满风险，在协调和对账时尤其如此——而且它们随着跨境交易和对非标准化投资产品（如贷款）的处理变得更加复杂。在交易生命周期中的每一方（例如，经纪商、中介、保管人、清算和结算团队）目前都保留着交易记录的自己的副本，这造成了重大的低效和错误空间。
- en: Unfortunately, a fair amount of trades have errors, requiring manual intervention
    and extending the time required to settle trades. Because it does not require
    an exchange to verify, clear, and settle security transactions (such as equities,
    repo, and leveraged loans), blockchain will save a large amount in fees and capital
    charges globally by moving to a shorter, and potentially customized, settlement
    window. Blockchain will eliminate significant fees across FX, commodities, and
    OTC derivatives. Blockchain technology could simplify and streamline this entire
    process, providing an automated trade life cycle where all parties in the transaction
    would have access to the exact same data about a trade. This would lead to substantial
    infrastructural cost savings, effective data management and transparency, faster
    processing cycles, minimal reconciliation, and the potential removal of brokers
    and intermediaries altogether.
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 不幸的是，相当多的交易存在错误，需要人工干预，从而延长了结算时间。由于区块链不需要交易所来验证、清算和结算证券交易（如股票、回购和杠杆贷款），因此通过缩短结算周期并可能定制化，区块链将在全球范围内节省大量的费用和资本费用。区块链将消除外汇、商品和场外衍生品等领域的重大费用。区块链技术可以简化并优化整个流程，提供一个自动化的交易生命周期，使交易中的所有各方都能访问关于交易的确切数据。这将导致基础设施成本大幅降低，有效的数据管理和透明度，更快的处理周期，最小的对账，以及潜在地完全消除经纪人和中介。
- en: Financial derivatives are the most common application of a smart contract, and
    one of the simplest to implement in code. The main challenge in implementing financial
    contracts is that the majority of them require reference to an external price
    ticker. For example, a very desirable application is a smart contract that hedges
    against the volatility of ether (or another cryptocurrency) with respect to the
    US dollar, but doing this requires the contract to know the value of ETH/USD or
    BTC/USD at any particular moment. They would have to leave the zone of trust.
    In practice, information issuers are not always trustworthy, and in some cases
    the banking infrastructure is too weak, or too hostile, for such services to exist.
    This approach is not fully decentralized, because a trusted source is still needed
    to provide the price ticker, although arguably this still is a massive improvement
    in terms of reducing infrastructure requirements (unlike being an issuer, issuing
    a price feed requires no licenses and can likely be categorized as free speech)
    and reducing the potential for fraud. The current industry trailblazers working
    to enable a smarter and more connected financial system by digitizing the world’s
    assets are Digital Asset Holdings ([www.digitalasset.com](https://www.digitalasset.com)),
    Chain.com, and the aforementioned Ripple.
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: 金融衍生品是智能合约最常见的应用之一，而且在代码中实现起来相对简单。实施金融合约的主要挑战在于，大多数合约都需要引用一个外部价格行情。例如，一个非常有吸引力的应用是一个对以太币（或其他加密货币）相对于美元的波动性进行对冲的智能合约，但实现这一功能需要合约知道任意时刻ETH/USD或BTC/USD的价值。他们必须离开信任区域。在实际操作中，信息发布者并不总是值得信赖的，在某些情况下银行基础设施太弱，或者太敌对，以至于无法存在这样的服务。这种方法并不是完全去中心化的，因为仍然需要一个可信来源来提供价格行情，尽管从减少基础设施要求的角度来看（与成为发布者不同，发布价格行情不需要许可证，并且很可能会被归类为言论自由），这仍然是一个巨大的改进，并且减少了欺诈的可能性。当前行业先驱们正在通过数字化世界的资产来推动一个更加智能和互联的金融系统，这些先驱包括Digital
    Asset Holdings([www.digitalasset.com](https://www.digitalasset.com))，Chain.com，以及前面提到的Ripple。
- en: Blockchain in the Sharing Economy
  id: totrans-203
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 共享经济中的区块链
- en: One thing we have noticed is that large organizations rely on information provided
    by users to generate value within their own platform. The problem with this platform
    is that the value produced by the crowd is not equally distributed among those
    who have contributed. Most of the profits are captured by the large intermediaries
    who operate the block. Uber and Airbnb could be obviated in a world where we store
    people’s online identities on the blockchain. Uber has disrupted the entire transportation
    industry. Some governments, however, have been quick to limit its reach in order
    to protect existing taxi companies. La`Zooz ([http://lazooz.org](http://lazooz.org))
    is an open-source and decentralized collaborative transportation system. More
    importantly, La`Zooz is a blockchain-based ride-sharing solution that rewards
    its users, developers, and drivers with tokens called zooz. Unlike Uber, La`Zooz
    has no central authority and cannot be blocked or shut down by governments. Your
    identity (as anonymous as you want it to be) could be linked to reviews in the
    “sharing economy” on the marketplace. People can check out your review as a trusted
    individual by checking your ID number. It would actually promote good behavior
    because if you get a bad reputation you cannot delete accounts and re-register.
    As we have mentioned, the blockchain can’t be tampered with or duplicated. Your
    identity and what you choose to expose can be valuable. Onename is a New York–based
    startup that has created an ID system using the Bitcoin blockchain. Its first
    service allows users to create blockchain IDs, which will soon be used to log
    in to websites without the need for a password.
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
- en: P2P lodging sites have already begun to transform the lodging industry by making
    a public market in private housing. The blockchain would enable a secure, tamper-proof
    system for managing digital credentials and reputation; it could accelerate the
    adoption of P2P lodging.
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
- en: Instead of central power providers, a distributed network built on blockchain
    technology lets people generate their own electricity to sell on the network,
    using their blockchain’s identity to perform the transaction. With solar and high-capacity
    battery technology, individuals can potentially act as distributed power providers.
    Blockchain could be used to facilitate secure transactions of power between individuals
    on a distributed network who do not have an existing relationship. The fact that
    all transactions are verified by a consensus network means you are protected from
    customers who claim the transaction did not happen. The blockchain records are
    a more reliable truth than the central database of the existing providers. The
    current applications are Sun Exchange, TransActive Grid, and Grid Singularity.
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
- en: Blockchain and Real Estate
  id: totrans-207
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: The real estate market will change for sure. Homeowners buying or refinancing
    property are subject to significant transaction costs, including title insurance,
    where the title search process can be labor intensive. An individual can put a
    property on the blockchain so that prospective buyers can review and verify the
    owner of a property. Currently, this process of title searching is done manually
    at a steep price. This specific-use case in the US could result in quickly obtained
    and less expensive title insurance. Such insurance is usually required by lenders
    issuing a mortgage to protect their interests. Transacting real estate is a cloudy
    and expensive process because of middlemen. Brokers, government property databases,
    title companies, insurance and property databases, escrow companies, inspectors
    and appraisers, and notary publics are all currently needed to complete a transaction.
    We wait and depend on them. They exist because they hold information that we cannot
    access or do not have the skills needed to operate in the existing property transaction
    ecosystem. Public blockchains will eliminate most if not all of these roadblocks
    and facilitate speedy and less expensive transaction fees. Current applications
    providers include Bitfury ([www.bitfury.com](https://www.bitfury.com)), which
    registers land titles via a private blockchain, and Factom/Epigraph ([www.factom.com](https://www.factom.com)).
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: 房地产市场肯定会发生变化。购买或重新贷款房产的房主需要承担重大的交易成本，包括产权保险，其中产权搜索过程可能是劳动密集型的。个人可以将房产置于区块链上，这样潜在买家可以查看和验证房产的所有者。目前，这种产权搜索过程是手工完成的，代价昂贵。在美国，这种具体用途的案例可能导致快速获得且成本较低的产权保险。这种保险通常是贷款发放者为了保护自身利益而要求的。由于中介的存在，房地产交易是一个模糊且昂贵的过程。目前完成一笔交易需要经纪人、政府物业数据库、产权公司、保险和物业数据库、托管公司、检查员和评估师以及公证人。我们等待并依赖他们。他们存在是因为他们掌握着我们无法获取或没有技能在现有房地产交易生态系统中操作的信息。公共区块链将消除大多数甚至所有这些障碍，并促进快速且成本较低的交易费用。当前的应用提供商包括Bitfury（[www.bitfury.com](https://www.bitfury.com)），它通过私有区块链注册土地产权，以及Factom/Epigraph（[www.factom.com](https://www.factom.com)）。
- en: Blockchain and Identity
  id: totrans-209
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 区块链与身份验证
- en: Banking regulation requires that banks know their customers (KYC). Identity
    data stored on a blockchain facilitates the bank’s verification of the identity
    of new customers. Storing account and payment information in a blockchain could
    standardize the data required for an account, thereby improving data quality and
    reducing the number of falsely identified “suspicious” transactions. A tamper-proof
    record could also ease the process of getting to know a client and demonstrating
    compliance with AML regulations. Current users include the global financial messenger
    for payments and fund transfers, i.e., the Society for Worldwide Interbank Financial
    Telecommunication (SWIFT).
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: 银行监管要求银行了解其客户（KYC）。存储在区块链上的身份数据有助于银行验证新客户的身份。在区块链上存储账户和支付信息可以标准化账户所需的数据，从而提高数据质量并减少错误识别的“可疑”交易数量。一个不可篡改的记录还可以简化了解客户并证明符合反洗钱（AML）法规的过程。当前用户包括全球金融信使，即国际银行金融电信协会（SWIFT）。
- en: The blockchain can be used to keep track of digital assets. Today when we purchase
    a used car the seller must physically deliver the car, title, and key. In the
    future, car titles may be public on the blockchain and the key may be digital.
    All data could be verified through a blockchain. To sell a car, the seller would
    simply send the digital key to the new owner, who would use it to turn on and
    start the car. Exchanges like ShapeShift.io already demonstrate how simple the
    exchange of stocks, bonds, and other digital assets will be should blockchain
    technology take hold. How about the concept of “proof of existence” (POE) and
    transparency utilizing the blockchain? Provenance ([https://www.provenance.org](https://www.provenance.org))
    is a real-time data platform that empowers brands to take steps toward greater
    transparency by tracing the origins and histories of products. With their technology,
    luxury brands could mitigate and potentially eliminate the sale of counterfeit
    goods. Outside of this area, one can only imagine what their technology could
    mean for the art world as well.
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: 区块链可以用来追踪数字资产。今天当我们购买一辆二手车时，卖家必须将车辆、车辆证明和钥匙实体交付给我们。将来，车辆证明可能会在区块链上公开，钥匙可能是数字的。所有数据都可以通过区块链进行验证。要出售一辆车，卖家只需将数字钥匙发送给新主人，新主人可以使用它来启动和启动车辆。像ShapeShift.io这样的交易所已经展示了如果区块链技术得到普及，股票、债券和其他数字资产的交换将变得多么简单。那么利用区块链的“存在证明”（POE）和透明度概念又如何呢？Provenance（[https://www.provenance.org](https://www.provenance.org)）是一个实时数据平台，它授权品牌采取措施实现更大透明度，通过追踪产品的起源和历史。利用他们的技术，奢侈品牌可以减轻并有可能消除假冒商品的销售。除了这个领域，人们只能想象他们的技术对艺术界可能意味着什么。
- en: Blockchain and the Practice of Law
  id: totrans-212
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 区块链与法律实践
- en: 'As an attorney, the concept of a smart contract immediately hooked me, Joseph,
    to my current obsession with blockchain. Some say blockchain will eliminate lawyers;
    I disagree. Lawyers will just have to be able to code or at least write a syllogistic
    specification describing the intent of the contract. The lawyer in the blockchain
    world must be a technologist as well. Creating smart contracts requires a new
    team, consisting of:'
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: 作为一名律师，智能合约的概念立即吸引了我，约瑟夫，让我对区块链产生了现在的痴迷。有人说区块链将取代律师；我不这么认为。律师们将必须能够编写代码，或者至少能够写出描述合同意图的辩证性规格说明。在区块链世界中，律师必须也是技术专家。创建智能合约需要一个新的团队，由以下人员组成：
- en: •   Attorneys who can design the code and who have legal knowledge of contract
    structure and enforcement
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: •   能够编写代码且具备合同结构和执行法律知识的律师
- en: •   Technologists who provide the software engineering to implement legal constructs
    into smart self-executing transactional structures using blockchain
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: •   提供软件工程技术的科技人员，将法律概念实现在利用区块链的智能自动执行交易结构中
- en: The law and smart contracts not only represent a new practice model but also
    a change in the global business model. A smart contract may start from a series
    of clauses drafted according to traditional contract doctrine, but as these clauses
    move onto a blockchain platform and become self-executing, doctrine becomes obscured.
    Don Tapscott, co-author of *Blockchain Revolution*, came up with the phrase “smart
    contract mediator” (SCM). Due to the self-enforcing nature of smart contracts,
    the nexus of disputes in transactions potentially will shift to the stage of dynamic
    execution. Lawyers with blockchain knowledge will act as mediators in this process,
    helping parties to navigate the smart contract process.
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: 法律和智能合约不仅代表了一种新的实践模式，也代表了全球商业模式的变化。智能合约可能始于根据传统合同教义起草的一系列条款，但随着这些条款移至区块链平台并自动执行，教义变得模糊。唐·塔普斯科特（Don
    Tapscott），《区块链革命》的共同作者，提出了“智能合约调解者”（SCM）这个术语。由于智能合约的自动执行性质，交易中争端的发生地可能会转移到动态执行阶段。具有区块链知识的律师将在这一过程中充当调解者，帮助各方导航智能合约过程。
- en: A smart contract looks and acts very different from a static contract. Understanding
    blockchain and DLT is critical to managing this process for clients. Many of the
    industries and practice areas discussed so far apply primarily to those working
    with large firms and representing enterprises. Hopefully for practitioners, blockchain
    is yet another technology that provides new opportunities for agile individual
    attorneys and small firms to compete for business. Smart contracts enable trustless
    financial services like loans, automatic execution of trade agreements, micropayments,
    and more. Smart contracts on the blockchain can also build on top of digital assets
    and stocks. The firm Steptoe and Johnson ([www.steptoe.com](https://www.steptoe.com))
    serves as counsel to the Blockchain Alliance ([www.blockchainalliance.org](https://www.blockchainalliance.org)),
    a coalition of more than 25 companies and 25 law enforcement and regulatory agencies
    around the world.
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: 智能合约与静态合约在形式和行为上有很大不同。理解区块链和分布式账本技术对于管理这一过程对客户至关重要。迄今为止讨论的许多行业和实践领域主要适用于那些与大型企业合作并代表企业工作的律师。对于从业者来说，区块链只是提供了另一种技术，使敏捷的个体律师和小事务所能够竞争业务的新机会。智能合约可以实现无需信任的金融服务，如贷款、贸易协议的自动执行、微支付等。区块链上的智能合约还可以建立在数字资产和股票之上。律师事务所Steptoe
    and Johnson ([www.steptoe.com](https://www.steptoe.com)) 为区块链联盟([www.blockchainalliance.org](https://www.blockchainalliance.org))提供法律顾问，该联盟由全球25家公司和25个执法及监管机构组成。
- en: Blockchain Decentralized File Storage
  id: totrans-218
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 区块链去中心化文件存储
- en: Over the past few years, there have emerged a number of online file storage
    startups, the most prominent being Dropbox, seeking to allow users to upload a
    backup of their hard drive and have the service store the backup and allow the
    user to access it in exchange for a monthly fee. However, at this point the file
    storage market is at times relatively inefficient; a cursory look at various existing
    solutions shows that, particularly at the “uncanny valley” 20 to 200 GB level
    at which neither free quotas nor enterprise-level discounts kick in, monthly prices
    for mainstream file storage are such that you are paying for more than the cost
    of the entire hard drive in a single month.
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: 在过去的几年里，出现了一批在线文件存储初创公司，其中最著名的是Dropbox，它们试图允许用户上传硬盘的备份，并让服务存储备份，用户可以支付月费访问这些备份。然而，目前文件存储市场有时相对低效；粗略查看各种现有解决方案可以看出，尤其是在20到200GB的“令人毛骨悚然的山谷”水平，既不触发免费配额，也不触发企业级折扣，主流文件存储的月度价格如此之高，以至于你会在一个月内支付超过整个硬盘成本的费用。
- en: IPFS is short for Interplanetary File System, and it does just what the name
    entails. Think of it as rewiring and rerouting the entire Internet so that trains
    run and stop on time and go where they need to go, all while greatly reducing
    redundancy. Designed by the technologist Juan Benet, IPFS is a peer-to-peer distributed
    file system that seeks to connect all computing devices with the same system of
    files. In some ways, IPFS is similar to the Web, but IPFS could be seen as a single
    BitTorrent swarm, exchanging objects within one Git repository. In other words,
    IPFS provides a high throughput content-addressed block storage model, with content-addressed
    hyperlinks. Projects like Storj intend to use blockchain technology to share files
    in a decentralized network. Users with extra disk space will automatically be
    able to rent out unused storage space. Users in need of cloud storage space can
    pay to store files on computers across the network. Storj estimates that this
    system will cut costs of data storage by about 80 percent.
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: IPFS是星际文件系统的简称，它的作用正如其名。可以把它看作是重新布线和重新路由整个互联网，以便火车能够按时到站并到达需要去的地方，同时大大减少冗余。由技术专家Juan
    Benet设计，IPFS是一个点对点的分布式文件系统，旨在用相同的文件系统连接所有计算设备。在某些方面，IPFS与互联网相似，但IPFS可以被看作是一个单一的BitTorrent种子，在一个Git仓库内交换对象。换句话说，IPFS提供了一个高吞吐量、内容地址化的块存储模型，具有内容地址化的超链接。像Storj这样的项目打算利用区块链技术在去中心化网络上共享文件。拥有多余磁盘空间的用户将能够自动出租未使用的存储空间。需要云存储空间的用户可以支付费用，将文件存储在网络中的计算机上。Storj估计，这一系统将把数据存储成本降低约80%。
- en: Decentralized Autonomous Organizations
  id: totrans-221
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 去中心化自治组织
- en: The general concept of a decentralized autonomous organization (DAO) is that
    of a virtual entity that has a certain set of members or shareholders which, perhaps
    with a 67 percent majority, have the right to spend the entity’s funds and modify
    its code. The members would collectively decide how the organization should allocate
    its funds. Methods for allocating a DAO’s funds could range from bounties and
    salaries to even more exotic mechanisms such as an internal currency to reward
    work. This essentially replicates the legal trappings of a traditional company
    or nonprofit but uses only cryptographic blockchain technology for enforcement.
    So far much of the talk around DAOs has been around the “capitalist” model of
    a decentralized autonomous corporation (DAC) with dividend-receiving shareholders
    and tradable shares. An alternative, perhaps described as a “decentralized autonomous
    community,” would have all members have an equal share in the decision making
    and require 67 percent of existing members to agree to add or remove a member.
    The requirement that one person can only have one membership would then need to
    be enforced collectively by the group. Backfeed (backfeed.cc) develops resilient
    technology and new economic models to support free, large-scale, systematic collaboration.
    Based on a distributed governance model, Backfeed protocols make it possible for
    people to easily deploy and maintain decentralized applications and DAOs that
    rely on the spontaneous and voluntary contribution of hundreds, thousands, or
    millions of people.
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: 去中心化自治组织（DAO）的一般概念是这样一个虚拟实体：它有一组特定的成员或股东，也许通过67%的多数，有权使用实体的资金并修改其代码。成员们会集体决定组织应该如何分配其资金。分配DAO资金的方法可以从赏金和薪水范围到更奇异的机制，如内部货币奖励工作。这本质上复制了传统公司或非营利组织的法律框架，但只依靠加密区块链技术进行执行。到目前为止，围绕DAO的讨论很大程度上是关于“资本主义”模式的去中心化自治公司（DAC），其拥有获得股息的股东和可交易的股份。另一种模式，或许可以称为“去中心化自治社区”，将使所有成员在决策中拥有平等的股份，并需要67%的现有成员同意增加或删除一个成员。一个人只能有一个会员资格的要求然后需要由小组集体执行。Backfeed（backfeed.cc）开发了坚韧的技术和新的经济模型，以支持免费、大规模、系统的协作。基于分布式治理模型，Backfeed协议使人们能够轻松部署和维护依赖于数百、数千或数百万人自发和自愿贡献的去中心化应用和DAO。
- en: Blockchain and Cloud Computing
  id: totrans-223
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 区块链与云计算
- en: 'Enigma is a decentralized cloud platform that guarantees privacy ([https://www.media.mit.edu/projects/enigma/overview/](https://www.media.mit.edu/projects/enigma/overview/)).
    Private data is stored, shared, and analyzed without ever being fully revealed
    to any party. Enigma provides secure multiparty computation, empowered by the
    blockchain. This is as futuristic and radical as blockchain gets and will be an
    important innovation as it solves some of the most difficult problems in technology
    today: privacy and security. These core functions, layered on top of distributed
    cloud technology, are a dynamic combination that transforms how data is stored
    and retrieved, providing industries like finance, health, and civil services the
    underlying trust and security to truly unlock the potential of next-generation
    mobile applications.'
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: Enigma是一个去中心化的云平台，它保证隐私（[https://www.media.mit.edu/projects/enigma/overview/](https://www.media.mit.edu/projects/enigma/overview/)）。私有数据在不被任何一方完全揭示的情况下存储、共享和分析。Enigma通过区块链提供安全的多方计算。这是区块链最未来化和激进的方面，并将是一项重要的创新，因为它解决了一些今天技术上最困难的问题：隐私和安全。这些核心功能，建立在分布式云技术之上，是一种动态的组合，改变了数据的存储和检索方式，为金融、医疗和公共服务等行业提供底层信任和安全，真正解锁下一代移动应用程序的潜力。
- en: Blockchain Gambling and Betting
  id: totrans-225
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 区块链赌博与投注
- en: Gambling is a multi-billion-dollar industry and was revolutionized by the Internet.
    Online gambling accounts for a significant proportion of all betting. Mostly,
    the Internet just saw the same big gaming players move their infrastructure online.
    However, blockchain technology changes all that. It is the missing piece that
    protected the established gambling industry. Now there is a host of exciting new
    startups reimagining the gambling industry. They are decentralizing the entire
    structure and are building something truly new. VDice (vdice.io) is one example
    of such a startup. It is billed as the world’s first fully decentralized gambling
    platform and is wildly popular among blockchain geeks. Using the Ethereum blockchain,
    they have leveraged smart contract technology and have created game codes that
    exist without a server. These games live on the Ethereum P2P network. We will
    examine Ethereum and betting with a sample application developed by one of the
    authors, PeerBet, in detail in a later chapter that will provide a “start to finish”
    examination of the Ethereum blockchain development life cycle.
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: 赌博是一个价值数十亿美元的行业，互联网对其进行了革命。在线赌博占据了所有投注的很大比例。大多数情况下，互联网只是看到同样的大的游戏玩家将他们的基础设施搬到线上。然而，区块链技术改变了这一切。它是保护成熟赌博行业的缺失的一环。现在有一系列令人兴奋的新创业公司在重新构想赌博行业。他们正在去中心化整个结构，正在构建真正新的事物。VDice
    (vdice.io) 是这样一个创业公司的例子。它被誉为世界上第一个完全去中心化的赌博平台，在区块链极客中非常受欢迎。利用以太坊区块链，他们利用智能合约技术，创造了没有服务器的游戏代码。这些游戏存在于以太坊P2P网络上。我们将在后面的章节中详细检查以太坊和投注，其中一个作者开发了一个名为PeerBet的示例应用程序。这将提供一个“从开始到结束”的以太坊区块链开发生命周期的检查。
- en: Summary
  id: totrans-227
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 总结
- en: In summary, blockchain—the distributed database technology with the capability
    to execute smart contracts—is more than a platform for cryptography. The universe
    of “use cases,” which we briefly covered, is expanding exponentially. The efficiencies
    and cost savings provided by blockchain technologies, especially the private blockchains
    adopted by the financial community, will result in widespread adoption. This will
    cause the technology to mature at a rapid rate. In parallel, the use of blockchain
    to affect global transactions will also push it forward toward maturity. Blockchain
    and its timing are critical to maintaining global transactions and providing trust
    in the integrity of those transactions. For these reasons and more, blockchain
    is here to stay. We will provide you with a comprehensive journey through what
    you need as a developer to successfully make the trip.
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: 总之，区块链——这种具备执行智能合约能力的分布式数据库技术——不仅仅是密码学的平台。"用例"的宇宙，我们简要讨论过的，正在呈指数级扩张。区块链技术，特别是金融界采用的私有区块链，提供的效率和成本节约将导致广泛采用。这将使技术以快速的速度成熟。与此同时，使用区块链影响全球交易也将推动它向成熟迈进。区块链及其时机对于维护全球交易和提供交易完整性信任至关重要。出于这些原因以及更多原因，区块链将会持续存在。我们将为您提供一次全面的旅程，了解作为开发者您需要什么以成功进行旅行。
