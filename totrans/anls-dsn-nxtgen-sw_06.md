© Springer Nature Switzerland AG 2020A. M. Langer 下一代软件架构的分析与设计[`doi.org/10.1007/978-3-030-36899-9_6`](https://doi.org/10.1007/978-3-030-36899-9_6)

# 6. 物联网

Arthur M. Langer^(1  )(1)哥伦比亚大学科技管理中心，美国纽约州纽约市 Arthur M. Langer 电子邮件：al261@columbia.edu 虽然 5G 是带来下一代计算可能性的初始者，但物联网（IoT）才是将成功的载体的实际设备。因为物联网代表着将中间智能硬件放置在全球各地的每一个可能的地方，从而使技术变得可行。因此，物联网的目标是通过降低运营成本，同时提高消费者和企业的网络可靠性，使 5G 成为现实。物联网的身份是提高敏捷架构的正常运行时间和实时处理，并消除任何不定时网络故障的概念。因此，物联网必须在问题发生之前发现问题，并提供具有备用轨道的列车，以应对任何过程中的干扰。最终，物联网必须确保任何供应链过程中都不存在单点故障。为了完成这一挑战，物联网设备必须包含四个组成部分：

1.  1.

    硬件：传感器、压力装置、摩擦测量和应力指示器。

1.  2.

    应用：规则引擎，修改软件功能，远程冷却或润滑。

1.  3.

    分析：利用人工智能和机器学习来基于假设和先前的历史数据预测故障。处理变化容量以避免未来故障。

1.  4.

    网络：提供动态连接和备用路径或“轨道”的大型网络或系统。

物联网必须完成五项关键任务，即反应性、预防性、主动性、预测性和规范性。因此，任何分析人员在设计时都应确保每个过程都解决了这五个目标。然后，物联网需要多个用例，并将其转化为一个完全整合了物理设备、传感器、数据提取、安全通信、网关、云服务器、分析和实时仪表板的连接系统。必须遵守以下分析和设计考虑因素和原则：

+   互操作性：所有物联网最终都需要传感器、设备和物理站点进行通信，并具有交换数据的能力。

+   信息透明度：物联网必须在物理世界和数字世界之间建立持续的桥梁。换句话说，物理过程应该被记录并在虚拟环境中存储，从而创建数字孪生体。

+   技术支持：提供并显示能帮助人们做出更好运营决策并更快解决问题的数据。物联网必须特别帮助人们完成繁重的任务，以提高生产力和安全性。

+   去中心化决策：根据其定义的逻辑帮助做出决策和执行要求。

物联网仿真是设计复杂物联网接口系统的重要部分。市场产品必须提供数字原型，以可视化如何连接设备、边缘和云服务、Web 和移动应用程序。所有这些组件构成了物联网架构，并且必须根据多次模拟运行进行交互。物联网分析包括通常依赖于有效数据源的仪表板和警报系统。因此，物联网分析和设计必须采用精益和敏捷的方法。它必须包含设计思维，即人、技术和业务都融入产品设计决策中。物联网还必须以消费者为中心，并且可能需要多次迭代，以将业务需求和消费者需求整合到一个需求文档中。消费者和业务对 5G 的需求与物联网必须提供的需求一致，因此这两股力量之间的目标和关系必须非常紧密地对齐。

物联网（IoT）要求分析人员提高对设备级应用程序接口或 API 的熟练程度。这些物联网 API 公开数据，使设备能够将数据传输到应用程序，因此它是数据网关。这些 API 还可以作为应用程序指示设备的一种方式，用作执行某些功能的方式，如图 6.1 所示。

图 6.1

API 数据传输数据流

图 6.1 显示了来自云的新数据元素，该数据经过 A 过程转换后发送给物联网设备 B。经过设备 B 转发的转换数据可由直接用户接收，也可由另一个设备/机器接口接收。图 6.2 中显示的第二个示例反映了数据作为一个值，用于根据该值指示物联网设备 B 执行某些操作 - 比如“1”值可能意味着以某种方式处理。

图 6.2

API 值传输数据流

由于许多物联网供应商可能提供开源 API，分析人员需要检查他们是否需要将 API 开发为需求文档，还是从供应商提供的库源中使用它。还有第三种可能性；使用第三方开源并修改它以适应系统的特定要求。换句话说，没有理由“重新发明轮子”。在分析中，这种方法实际上并不新鲜。例如，几乎每个遗留架构都提供了功能宏库的例程。没有人会考虑设计一个计算一个数字的平方根的新程序；该代码存在于许多库中，并且可以轻松地嵌入到另一个应用程序中！

## 6.1 物联网的逻辑设计和通信模型

根据米什拉（2019）的说法，物联网的逻辑设计包括三个术语：

1.  1

    物联网功能块

1.  2

    物联网通信模型

1.  3

    物联网通信 API。

本节将米什拉的概念映射到分析员的角色。

### 6.1.1 物联网功能块

功能块包括 6 个集成部分；应用程序、管理、服务、通信、安全和设备，如图 6.3 所示。![../images/480347_1_En_6_Chapter/480347_1_En_6_Fig3_HTML.png](img/480347_1_En_6_Fig3_HTML.png)

图 6.3

功能块架构。*来源* 米什拉（2019）

分析员必须定义图中设备的每个块，如图 6.3 所示。首先，分析员必须做出每个块的必要用例，定义所需的数据、应用程序和性能要求。正如前面讨论的，许多设备（如传感器）具有可能为开发人员提供所需服务的软件。但是，如果此类 API 不可用，则分析员必须提供内部编程的要求。在本书后面我们将看到，这个决定也可能属于构建与购买的范畴，特别是如果第三方 API 被认为太昂贵或者不包含足够的必要功能函数来满足要求。这样的决定还可能涉及确定哪个设备最适合需求。

## 6.2 物联网通信备选方案

存在四种不同类型的通信备选架构。当然，在涉及各种类型的物联网设备的复杂网络系统中，可能存在多种备选方案。

### 6.2.1 请求-响应模型

此模型类似于第 4 章讨论的传统客户端/服务器架构。尽管 5G 增强的灵活架构更为分布式且层次较少，但在某些设备设计中，客户端/服务器模型仍然适用。如图 6.4 所示，在这种情况下，Web 浏览器或智能手机很可能是客户端，而设备上的应用程序将充当服务器。![../images/480347_1_En_6_Chapter/480347_1_En_6_Fig4_HTML.png](img/480347_1_En_6_Fig4_HTML.png)

图 6.4

请求-响应模型。*来源* 米什拉（2019）

物联网设备也可以与多个层次的客户端/服务器架构集成。图 6.5 显示了一种物联网设备，它存在于中间层，并根据请求者提供客户端和服务器活动。在这个例子中，专用服务器可能是一个云数据库，很可能存在于单独的物理硬件服务器上。![../images/480347_1_En_6_Chapter/480347_1_En_6_Fig5_HTML.png](img/480347_1_En_6_Fig5_HTML.png)

图 6.5

物联网设备作为客户端和服务器。*来源* 米什拉（2019）

### 6.2.2 发布-订阅模型

发布-订阅模型涉及三个组件：发布者、经纪人和消费者。发布者将数据发送到称为经纪人的中间件。然后，经纪人可以将数据提供给特定的消费者，作为信息的最终客户或订阅者，如图 6.6 所示。![../images/480347_1_En_6_Chapter/480347_1_En_6_Fig6_HTML.png](img/480347_1_En_6_Fig6_HTML.png)

图 6.6

发布者-订阅者模型。*来源* Mishra (2019)

显然，发布者-订阅者模型在通过中间组织进行工作的数据提供者中很常见，这些中间组织然后管理一些用户成员。

### 6.2.3 推拉模型

该模型消除了中间经纪人，因此消费者直接从发布者（图 6.7）获取数据访问。然而，发布者不知道谁正在访问信息。经纪人在某种程度上被队列取代，数据被存储并提供。发布者以不同的间隔更新队列。在这种设计中，发布者不需要经纪人，因为不需要知道消费者。该模型确实解决了需要从发布者获取更及时数据的消费者的困境。简单地说，队列定义了消费者在任何给定时间内可以获取的内容。分析师需要在 SDLC 的需求收集阶段解决更新频率的问题。![../images/480347_1_En_6_Chapter/480347_1_En_6_Fig7_HTML.png](img/480347_1_En_6_Fig7_HTML.png)

图 6.7

推拉模型。*来源* Mishra (2019)

### 6.2.4 独占对模型

该模型是双向或全双工的，客户端和服务器之间保持着持续的开放双向通信（图 6.8）。服务器知道来自客户端的所有连接。连接保持打开状态，直到客户端发送消息关闭连接。分析师需要提供消息的定义以及客户端和服务器如何响应，即消息携带的内容以及基于消息值执行的过程。![../images/480347_1_En_6_Chapter/480347_1_En_6_Fig8_HTML.png](img/480347_1_En_6_Fig8_HTML.png)

图 6.8

独占对通信模型。*来源* Mishra (2019)

## 6.3 物联网作为传统分析与设计的反转

正如本书迄今所讨论的那样，数字转型对分析与设计的主要影响是从设计着眼于满足特定用户需求的产品导向系统转变为更多地基于消费者需求！Bernardi 等人(2017)指出，“全球经济正迅速从产品经济转向“假如”经济”（第 6 页） 。作者将这种转变定义为一种“反转范式”，将系统思维从以产品为先的视角转变为以需求为先的视角。因此，需要问的问题是，“技术如何帮助我们重新想象和满足需求？”

尽管许多 IT 专业人员历来支持这种观点，特别是在敏捷和对象设计方面，但是 IoT 得到了 5G 性能改进的支持，使得各种可能性成为现实。换句话说，IoT 处于数字颠覆和转型的下一波浪潮的中心，如图 6.9 所示。

图 6.9

IoT 处于中心

现在我已经为 IoT 奠定了基础和架构模型，集中关注 IoT 世界中分析员的新角色和责任至关重要。这将需要从产品/用户的角度转变到更具功能性和预测性的角度。这在 IoT 中尤为明显，因为一个设备可以执行许多功能并满足各种消费者和机器的请求。的确，IoT 分析师必须设计智能对象，使真实和数字可以共存（Bernardi 等人 2017）。

## 传感器、执行器和计算

IoT 数字设备包含三个主要组成部分和功能：传感器、执行器和计算。

### 传感器

分析师必须提供或识别传感器中能够测量物理世界并将信息逻辑转换为数字数据的 API。传感器实质上是捕获信息，进行某些类型的测量，记录活动然后执行将数据转换的应用程序。

### 执行器

执行器实际上执行与传感器相反的功能，即它在传感器上使用数字逻辑并向物理设备发送消息。例如，发送关闭烤箱等设备的消息。分析师必须定义提供设备状态变化及其对变化的响应的算法。响应通常是机器到机器或机器到消费者的消息。

### 计算

计算表示确定传感器和执行器之间行为的计算机逻辑。此逻辑是由设备感知情况然后应用指令的算法产生的，该指令指示传感器发送消息给执行器执行某项功能。这就像按下汽车的点火按钮后所产生的指令。传感器接收到消息然后检查系统，看看汽车的发动机是否可以安全启动。分析师需要提供数据流并定义引擎启动前要执行的步骤的逻辑。这种逻辑通常会检查自动变速器，以确保其处于“停车”状态，然后才允许启动发动机。此算法将是用例过程规范的一部分。

图 6.10

数据流图表示启动汽车发动机的计算。

## 连通性

分析师还必须为始终连接的物联网设备提供定义。这些设备始终在运行，并在状态发生变化时发起消息。例如，如果温度降到 50% 以下，则可能需要传感器向加热设备发送消息以启动加热单元。当然，互联网提供了数字高速公路，允许这些类型的活动在距离上发生。再次，我们看到状态转换图可以是定义常量操作物联网设备逻辑的有效流程工具。

## 6.6 可组合性

物联网设备的另一个有趣功能是它们能够直接通过互联网与彼此通信。设备到设备的连接允许用户监视其自己的系统，并使用监视设备直接告诉另一个设备要执行的操作。智能手机是监视设备的绝佳示例。例如，远程安装软件监控您家中的温度。可组合性还允许用户混合多个监视通信而无需要求开发者或公司进行修改。您的智能手机设备实际上可以与多个其他设备进行通信，在开源情况下可以结合命令，例如提高温度，降低灯光并播放音乐。

连通性和可组合性的分析依赖于两种类型的架构：中介和 API。

中介

尽管让设备与其他设备进行通信看起来很有吸引力，但它确实有缺点。拥有单独的机器对机器（M2M）功能可能会导致设备之间发生冲突，并且可能会影响网络的整体性能。因此，实际上，将“中介”设备驻留在云中是一种更可取的解决方案。中介方法类似于星型拓扑，其中中介位于中心，每个设备都是一个“辐射”，如图 6.11 所示。![../images/480347_1_En_6_Chapter/480347_1_En_6_Fig11_HTML.png](img/480347_1_En_6_Fig11_HTML.png)

图 6.11

使用中介的物联网星型拓扑

中介的另一个好处是在添加新设备或更新现有设备时带来的简化。这使得中介可以充当一个集中的中心，可以通过跟踪网络上的所有设备来协调所有新软件更新。分析师可能需要设计一个中介或获取第三方产品。

适当的 API

API 的设计非常重要，因为它是控制着物联网架构的软件。分析人员应该考虑积累所需的所有功能和功能，然后设计一个 API 清单，该清单将存储在中介者中。中介者实际上成为网络中所有应用程序的购物中心。这种设计方法的另一个优点与向系统添加新应用程序的需要有关。中介者可以简单地更新并用于将新程序分发到相关设备。

## 6.7 招聘能力

招聘能力的概念与可重用性和多态性密切相关。简单地说，它允许设备用于不同的应用程序。例如，一台打开汽车发动机的设备可以被另一个操作“招募”，该操作可以启动不同类型的操作，复制打开发动机的逻辑。这支持功能分解、面向对象分析和公共 API 库。这还需要以流程规范的形式记录功能原语。此外，文档还应包括例程在其他上下文中重新使用的能力。最后，有些原语的组合可以创建功能性和可重用的传感器、执行器和通信设备。这是一种权衡决策，因为它建立了具有非常专注能力但具有更高可重用性的设备。

## 6.8 关于物联网安全性和隐私性的一点说明

分析人员当然必须关注网络上使用的任何物联网设备的安全性和隐私性。在这种情况下，分析人员必须考虑设备的所有可能功能，并确定其安全风险水平。我将在第九章中更详细地讨论这个话题。9。

## 6.9 沉浸

沉浸是设备共享的能力。事实上，如果设备可用，设备可以与其他请求者共享其进程。因此，沉浸是一种招聘形式，在原始意图的设备在网络中太远或故障时非常有用。沉浸中最重要的因素是发现可用资源或设备的能力。这可以与智能手机相关联，当您使用蓝牙技术进行“配对”时。分析人员需要定义设备请求的上下文，以便接收设备可以确定其被招募的能力。这涉及一定水平的智能消息传递能力，在一个能够在共同通信协议下加入的设备家族之间。

鉴于沉浸的力量，分析人员必须解决几个复杂性问题：

+   *发现性*：并非所有设备都可以在不考虑某些级别的授权的情况下访问。这些被称为静态设备，实质上需要两台连接设备通过接受设置或通常被称为握手的方式。这些握手通常有两个部分，分享的兼容性；和身份检查。另一方面，动态设备可以自动连接而无需同意。然而，这些设备的安全性也可能需要一定级别的授权才能访问。

+   *背景*：这需要定义设备需要传输的“其他”内容。例如，如果汽车设备连接到收费站，它可能还想传输有关环境的更多信息，如方向、速度、车牌、时间、日期等。

+   *编排*：这通常是一个跟踪连接到系统的设备之间所有活动的程序。在许多方面，编排可以与调解相比较，因为它是设备行为的中央存储库。

+   *招募非*-*数字对象*：并非所有对象都是基于数字的。因此，非数字对象如食物需要一种间接的方法来跟踪和与它们通信。典型的间接对象包括 RFID 标记、条形码和数字水印（使用颜色的色调）。

+   *预测性维护*：智能物联网设备的另一个独特功能是它们具有自我测试并传达需要维护的条件的能力。使用网络，设备可以提供有关其操作状态的宝贵反馈，以便各种类型的维护可以及时完成。所有这些预防性维护能力都需要成为过程规范的一部分，该规范将硬件行为和条件与软件智能联系起来。

很显然，物联网分析师必须充分装备，以处理不仅限于传统软件设计的各种细节，而且深入扩展到包括智能硬件设备行为在内的细节。

## 6.10 物联网软件开发生命周期（IoT SDLC）

许多，甚至所有现有组织都需要确定如何最好地前进以吸收物联网。除了许多组织变革之外，这还需要一种 SDLC，其中包含本章讨论的许多需求。因此，需要修改或建立一个生命周期，管理人员和员工可以遵循。

1.  1.

    经过对象取向并创建 API 规范的功能原语。

1.  2.

    移动或创建过程规范。

1.  3.

    识别新的和现有的数据元素。

1.  4.

    根据现有和/或可能的消费者体验更新（2）和（3）中的任何新功能。

1.  5.

    设计 API 等效物。

1.  6.

    添加可用的第三方 API。

1.  7.

    映射到物联网设备。

1.  8.

    根据设备类型（传感器、执行器、计算）选择物联网配置和接口。

1.  9.

    确定人工智能和机器学习功能。

1.  10.

    选择 I/O 设备通信功能类型。

1.  11.

    设计通信 API 或使用第三方库。

1.  12.

    添加/修改要添加到数据字典的数据元素定义，包括依赖项。

1.  13.

    考虑使用间接连接（RFID）连接到非数字产品。

1.  14.

    确定雾端或边缘所需的 API 和数据。

## 6.11 转向物联网

大多数企业最终将实施物联网的方式是通过辛克莱（2017）所称的“物联网商业模式连续性”。该模型建议大多数公司不能只是彻底改变他们的整个系统，而是必须从他们的核心和已建立的业务模型开始，并随着时间的推移逐步增加物联网的价值，如图 6.12 所示。连续性最终导致最重要的目标：业务成果。图 6.12 的示例将最大业务成果定义为可达到的最高“每手术利润”。通过逐步提高产品服务的效率，然后是一般服务，再到服务结果，最后实现单位利润，从而实现了最大化的业务成果。![../images/480347_1_En_6_Chapter/480347_1_En_6_Fig12_HTML.png](img/480347_1_En_6_Fig12_HTML.png)

Fig. 6.12

物联网商业模式连续性的示例。*来源* 辛克莱（2017）

### 6.11.1 摘要

辛克莱模型的挑战在于公司认为的时间可能不像他们想的那样充裕。我们已经经历了数字颠覆在加速时间框架内所能带来的影响。过去推迟数字化努力的公司已经失败。事实上，名单越来越长：玩具反斗城、诺基亚和西尔斯无疑会让人想起。CEO 和董事会必须关注零售行业发生的事情，历史上他们只将 2% 的总收入用于信息技术。更严重的是最近发生在 GE 的事情。GE 投资于公司的一个部门叫做 GE-Digital，旨在为其客户提供新类型的数字服务。他们最初的努力失败了，因为现有的业务部门利用新的数字部门来支持其传统需求。归根结底，GE 从新业务中没有产生预期的收入。这里的信息是要小心现有和主导的核心业务；历史上这样的部门倾向于无意识地竭尽所能地保留旧的做事方式！记住，许多人认为大多数物联网产品将在没有计划的情况下开发！

接下来我们需要了解区块链分析与设计及其对安全性的贡献！
