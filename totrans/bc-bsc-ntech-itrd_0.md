![](img/index-1_1.jpg)

![](img/index-1_2.jpg)

![](img/index-1_3.jpg)

排版：SPi Global

![](img/index-1_5.jpg)

![](img/index-1_6.jpg)

![](img/index-1_7.jpg)

![](img/index-1_8.jpg)

![](img/index-1_9.jpg)

![](img/index-1_10.jpg)

区块链

基础

非技术介绍

25 步

―

![](img/index-1_4.jpg)

区块链基础

**非技术性介绍**

**25 步中**

***Daniel Drescher***

***区块链基础知识：25 步非技术介绍***

Daniel Drescher

德国法兰克福

ISBN-13（平装本）：978-1-4842-2603-2

ISBN-13（电子版）：978-1-4842-2604-9

DOI 10.1007/978-1-4842-2604-9

国会图书馆控制号：2017936232

版权© 2017 年 Daniel Drescher

本作品受版权保护。 出版商保留全部权利，包括特定的翻译权、转载、插图重用、朗诵、广播、微缩胶片或其他任何物理方式的复制，以及信息存储和检索、电子适应、计算机软件，或类似的已知或以后开发的方法。

本书中可能会出现商标名称、标识和图像。 我们只以编辑方式使用商标名称、标识和图像，并有利于商标所有者，并无意侵犯商标。

本出版物中使用商标、商标、服务标志和类似术语，即使未标识为此，也不得视为对其是否受专有权的意见表达。

虽然本书中的建议和信息被认为是在出版日期的真实和准确的，但作者、编辑和出版商对可能出现的任何错误或遗漏均不承担任何法律责任。 出版商对所含材料不作出任何明示或暗示的保证。

总经理：Welmoed Spahr

编辑总监：托德·格林

收购编辑：Susan McDermott

开发编辑：Laura Berendson

技术审查员：劳伦斯·柯克

协调编辑：Rita Fernando

文稿编辑：Mary Bearden

Daniel Drescher

索引编辑：SPi Global

作者：SPi Global

由 Springer Science+Business Media New York 全球发行给图书交易，地址：233 Spring Street，6th Floor，New York，NY 10013。电话 1-800-SPRINGER，传真(201) 348-4505，电子邮件 orders-ny@springer-sbm.com，或访问[www.springeronline.com](http://www.springeronline.com)。 Apress Media，LLC 是加利福尼亚有限责任公司，唯一成员（所有者）是 Springer Science + Business Media Finance Inc（SSBM Finance Inc）。 SSBM Finance Inc 是**特拉华**州的一家公司。

有关翻译信息，请发送电子邮件至 rights@apress.com，或访问[`www.apress.com/rights-permissions`](http://www.apress.com/rights-permissions)。

[`www.apress.com/rights-permissions`](http://www.apress.com/rights-permissions)。

Apress 出版物可以大量购买用于学术、企业或促销用途。 大多数标题还提供电子书版本和许可证。更多信息，请参考我们的印刷和电子书批量销售网页[a t http://www.apress.com/bulk-sales](http://www.apress.com/bulk-sales)。

作者在本书中引用的任何源代码或其他补充材料都可通过 GitHub 上的图书产品页面免费获取，网址为[www.apress.com/9781484226032](http://www.apress.com/9781484226032)。

获得更详细的信息，请访问[`www.apress.com/source-code.`](http://www.apress.com/source-code/)

采用无酸纸印刷

**Apress Business：商业信息的无偏见来源**

Apress 商业书籍提供基本信息和实用建议，每本书

希望您在日常工作生活中脱颖而出。我们的作者是业内公认的专家，专为从业者编写。忙碌的经理和专业人士-

业务世界各个领域的专业人员- 以及各种技术水平的专业人员- 寻求我们的书籍，以获得他们需要的可执行想法和工具

解决问题，更新和提升专业技能，让他们的工作生活更轻松，并抓住机遇。

更简单，并抓住机遇。

无论业务领域的主题是什么- 创业，财务，

销售，营销，管理，监管，信息技术等其他方面

工作者- Apress 因提供客观信息

超越日常工作生活所需的无偏见建议。我们的作者没有

他们的立场; 他们明白他们只有一项工作- 提供最新的，

准确的信息，简洁明了，并且深入洞察并解决

我们读者的真正需求。

越来越难以找到信息- 无论是在新闻媒体上，还是在

互联网上，现在也经常在书籍中- 这是公正的，并且符合您的

对您的最佳利益。因此我们希望您喜欢这本书，这本书

已经精心制作，以满足我们的质量标准和公正报道标准。

我们一直对您的反馈或新书的想法感兴趣。也许

您甚至可能想自己写一本书。无论如何，请与我们联系

可以联系 editorial@apress.com，编辑将迅速回复。顺便说一句，在本书的末尾，您会找到一份有用的相关书目清单。请访问[www.apress.com](http://www.apress.com/)注册以获得未来购买的新闻和折扣。

* Apress 商务团队 *

内容

**作者简介**第 vii 页 **技术审阅者简介**第 i 页 **引言**第 xi 页 **第一阶段：**

**术语和技术基础** 1

**步骤 1：**

**分层和方面思考** 3

**步骤 2：**

**看清全局** 9

**步骤 3：**

**认识潜力** 19

**第二阶段：为什么需要区块链** 第 27 页

**步骤 4：**

**发现核心问题** 29

**步骤 5：**

**消歧义术语** 33

**步骤 6：**

**理解所有权的本质** 39

**步骤 7：**

**花两次钱** 49

**第三阶段：区块链如何运作** 55

**步骤 8：**

**Planning the Blockchain** 57

**Step 9:**

**Documenting Ownership** 63

**Step 10: Hashing Data** 71

**Step 11: Hashing in the Real World** 81

**Step 12: Identifying and Protecting User Accounts** 93

**Step 13: Authorizing Transactions** 103

**Step 14: Storing Transaction Data** 111

**Step 15: Using the Data Store** 123

**Step 16: Protecting the Data Store** 135

**Step 17: Distributing the Data Store Among Peers** 145

**Step 18: Verif ying and Adding Transactions** 153

**Step 19: Choosing a Transaction History** 165

vi

***Contents***

**Step 20: Paying for Integrity** 183

**Step 21: Bringing the Pieces Together** 189

**Stage IV: Limitations and How to Overcome Them** 203

**Step 22: Seeing the Limitations** 205

**Step 23: Reinventing the Blockchain** 213

**Stage V: Using the Blockchain, Summary, and Outlook** 221

**Step 24: Using the Blockchain** 223

**Step 25: Summarizing and Going Further** 235

**Index** 249

About the Author

**Daniel Drescher**是一位经验丰富的银行业专业人士，曾在几家银行担任电子安全交易职位。他最近的活动集中在自动化、机器学习和大数据在电子证券交易背景下的应用。

positions in electronic security trading in several banks. His recent activities have focused on automation, machine learning, and big data in the context of

security trading. Among others, Daniel holds a doctorate in econometrics

from the Technical University of Berlin and an MSc in software engineering

from the University of Oxford.

![](img/index-8_1.jpg)

About the Technical

Reviewer

**Laurence Kirk**是一位成功的城市伦敦金融应用程序开发者和以太坊教育工作者。

writing low latency financial applications for the

City of London, was captivated by the potential

of distributed ledger technology. He moved to

Oxford to study for his master’s degree and set

up Extropy.io, a consultancy working with start-

ups to develop applications on the Ethereum

platform. Passionate about distributed technol-

ogy, he now works as a developer, evangelist, and

educator about Ethereum.

Introduction

这个介绍回答了每个作者都必须回答的最重要的问题：为什么要读这本书？或者更具体地说：为什么

has to answer: Why should anyone read this book? Or more specifically: Why

should anyone read another book about the blockchain? Continue reading

and you will learn why this book was written, what you can expect from this

本书中的内容，您不应期望得到的，以及书是为谁编写的。

ten, and how the book is structured.

Why Another Book About the Blockchain?

区块链在公共讨论和媒体中受到了很多关注。

the media. Some enthusiasts claim that the blockchain is the biggest invention

since the emergence of the Internet. Hence, a lot of books and articles have

been written in the past few years about the blockchain. However, if you want

to learn more about how the blockchain works, you may find yourself lost in

a universe of books that either quickly skim over the technical details or that

discuss the underlying technical concepts at a highly formal level. The former

可能会让您感到不满意，因为它们没有详细解释技术细节。

必须，以便理解和欣赏区块链，而后者可能

会让你感到不满，因为它们已经需要你想要的知识

获得。

***介绍***

区块链，一方面是大多涉及的文献

特定应用或其预期的经济影响的讨论

对未来的愿景，另一方面

此书之所以编写，是因为对技术

区块链的基础是必要的，以便理解具体

区块链应用程序，评估区块链创业公司的商业案例，或者观

越来越多地讨论其预期的经济影响。没有足够的理解

应用程序的价值。本书关注了底层

特定区块链应用的价值。本书侧重于底层

由于对新技术的理解不足，本书涵盖了区块链的概念

可能导致被炒作带走，并且后来感到失望

因为不切实际的无法证实的期望。

本书弥补了纯技术书籍和区块链之间存在的差距

然而，其中一些观点在适当

本书以非技术的方式教授了构成区块链的概念

方式和简洁易懂地。它涵盖了三个重要的

当介绍一种新技术时，会产生哪些问题：它是什么？

为什么我们需要它？它是如何工作的？

你不能期望本书带来什么

本书故意对区块链的应用持中立态度。虽然

包括比特币在内的加密货币是突出的应用

区块链的技术概念，本书通过一般技术解释了区块链

技术。之所以选择这种方法，是为了突出通用概念

区块链的技术和技术模式，而不专注于特定

狭窄应用案例。因此，这本书是：

• 不是一个专门关于比特币或其他

加密货币

• 不是关于特定区块链应用的文本

xii

区块链

• 不是关于编程区块链的文本

• 不是一个关于法律后果和影响的文本

它的社会、经济或道德影响

• 不是有关区块链对我们社会或人类的社会、经济或道德影响的文本

• 不是有关数学基础的证明的文本

区块链

本书中的观点。

你可以期待这本书带来什么

本书解释了区块链的技术概念，如交易、哈希值、密码学、数据结构、点对点系统、分布式

系统、系统完整性以及分布式一致性以非技术的方式。

本书的教学方法基于四个元素：

• 会话风格

• 无数学和公式

• 通过问题域的渐进式步骤

• 使用隐喻和类比

***介绍***

xiii

会话风格

本书故意以对话的方式写成。不使用

数学或计算机科学行话，以避免任何障碍

非技术读者。然而，本书介绍并解释了必要的术语-

加入讨论和理解其他人所需的术语和理解

关于区块链的出版物。

没有数学和公式

诸如密码学和算法之类的区块链主要元素

基于复杂的数学概念，然后再附带自己的

需要和有时令人恐惧的数学符号和公式。

然而，本书故意不使用任何数学符号或

公式，以避免对非技术人员造成任何不必要的复杂-

技术读者。

通过问题域的逐步步骤

本书中的章节称为*步骤*，这并非没有道理。这些步骤构成了一个学习路径，逐步建立对区块链的知识。

步骤的顺序经过精心选择。它们涵盖了基础知识

软件工程，解释术语，指出为什么

需要区块链，并解释构成的个别概念

区块链以及它们之间的互动。称呼各个章节

步骤突显了它们的依赖性和教学目的。它们形成

需要按照逻辑顺序来进行，而不是作为可以阅读的章节

独立。

使用隐喻和类比

每个引入新概念的步骤都以图解开始

通过参考现实生活中的情况。这些隐喻起到四个主要作用

目的。首先，它们为读者准备了引入新技术的前提

概念。其次，通过将技术概念连接到易于理解的

真实场景，隐喻减少了发现的心理障碍

新的领域。第三，通过类比让学习新概念通过相似性。

和类比。最后，隐喻为记忆新的提供了经验法则

概念。

xiv

***介绍***

本书的组织方式

本书由 25 个步骤组成，分为五个主要阶段，全部加在一起

形成一个学习路径，逐步构建您对区块链的知识-

链。这些步骤涵盖了一些软件工程的基础知识，解释

需要的术语，指出为什么需要区块链，

解释构成区块链的个别概念以及它们的

互动，考虑区块链的应用，并提及领域

积极的发展和研究。

阶段 I：术语和技术基础

步骤[1](http://dx.doi.org/10.1007/978-1-4842-2604-9_1)到[3 解释了软件](http://dx.doi.org/10.1007/978-1-4842-2604-9_3)工程的主要概念，并设定了理解后续步骤所需的术语。到最后

第[3 步，](http://dx.doi.org/10.1007/978-1-4842-2604-9_3) 你将对基本概念有了概览，并且对区块链所处的大局有了认识。

第二阶段：为什么需要区块链

[第 4](http://dx.doi.org/10.1007/978-1-4842-2604-9_4) [至 7 步](http://dx.doi.org/10.1007/978-1-4842-2604-9_7) 解释了为什么需要区块链，它解决了什么问题，为什么解决这个问题很重要，区块链的潜在价值。到了

[第 7 步结束时](http://dx.doi.org/10.1007/978-1-4842-2604-9_7)，你将对区块链所处的问题域有很好的理解，它在哪些环境中提供最大的价值，为什么它首先是需要的。

第三阶段：区块链的运作原理

这本书的重心在于第三阶段，因为它解释了区块链是如何运作的

链的内部工作。[第 8 至](http://dx.doi.org/10.1007/978-1-4842-2604-9_8) [21 步将引导你通](http://dx.doi.org/10.1007/978-1-4842-2604-9_21)过 15 个独立的技术概念，所有这些概念组合在一起构成了区块链。到了[21 步结束时](http://dx.doi.org/10.1007/978-1-4842-2604-9_21)，你将对区块链的所有主要概念有了理解，它们是如何独立工作的，以及它们是如何相互作用从而创建了

被称为区块链的大型机器。

第四阶段：限制及其克服方法

[第 22 步至](http://dx.doi.org/10.1007/978-1-4842-2604-9_22) [23 都](http://dx.doi.org/10.1007/978-1-4842-2604-9_23) 聚焦于区块链的主要限制，解释它们的原因，并勾勒出可能的克服方式。[在第 23 步结束时](http://dx.doi.org/10.1007/978-1-4842-2604-9_23)，你将了解为什么区块链的原始理念如前几步所解释的那样，可能不适合大规模商业应用，在这之后还会了解

修改方案是为了克服这些限制，并且这些修改

修改了区块链的性质。

***介绍***

xv

第五阶段：使用区块链、总结和展望

[第 24 和](http://dx.doi.org/10.1007/978-1-4842-2604-9_24) [25 步考虑了](http://dx.doi.org/10.1007/978-1-4842-2604-9_25)区块链如何在现实生活中使用，以及在选择区块链应用时应该解决的问题。这

阶段还指出了活跃研究和进一步发展的领域。到

[在第 25 步结束时](http://dx.doi.org/10.1007/978-1-4842-2604-9_25)，你将对区块链有深入的理解，并且将准备好阅读更高级的文本或者

参与讨论区块链的进行中的活动内容。

附件材料

[网站 www.blockchain-basics.com](http://www.blockchain-basics.com/) 提供了本书若干步骤的附属材料。

**阶段**

我

术语

和技术

基础

这个阶段解释了软件工程的重要概念并确立了

区块链的沟通。

这个学习阶段也介绍了软件架构和概念

应用 vs. 实施

将会对区块链的目的和其进行了解

表？嗯，我们大多数人对这些细节知之甚少

使用者对实施的分离

本步骤为我们通过区块链学习路径奠定了基础

分层和

了解构成移动通信基础的电磁波吗？

完整性及其与区块链的关联。到这一阶段结束时，您

© Daniel Drescher 2017

层和方面

软件完整性并突出其重要性。

解释如何划分或分层系统，从而为我们

潜力。

一种组织和规范我们的技术沟通的方式。

**步骤**

层。此外，此步骤说明了考虑的收益

区块链。最后，这一步提供了对概念的简要介绍

你有手机吗？我猜是的，因为现在大部分人都有

在本书中始终使用以下两种系统划分方式

方面

4

***步骤 1 | 分层思考和方面***

隐喻

洗衣机等。但这些心理划分是高度

当我们学习如何使用新的电视机、电脑、

因为不需要了解它们才能使用手机

用于发送和接收数据的通信协议？你有多少

D. Drescher, *区块链基础*, DOI 10.1007/978-1-4842-2604-9_1

我们的个人喜好，具体技术和我们的目标和经验 -

• 应用 vs. 实施

经验。因此，你对手机的心理划分可能与我的不同

被忽视或被认为是理所当然的。

技术。这一步解释了如何分析软件系统和

特别是在我尝试向你解释你应该

了解某个特定的手机。因此，统一划分方式

在用户的需求与系统的技术内部的心理分离 -

通过将它们分成各个部分进行系统分析

至少一。你对各种无线通信了解多少？

我们大多数人没有时间了解它们。我们在心理上分离

这种技术方法不仅局限于手机。我们在

软件系统的层

通过引入一种组织和规范我们的技术沟通的方式

同一个手机的心理划分。这通常会导致问题

手机分为我们需要了解的部分和可以

书：

• 功能与非功能方面

一个系统是教学和讨论技术的关键点。这一步

个体，因为重要与否取决于

为什么将软件系统看作是一个组合体很重要

1

系统中的不同层，并且这种方法如何帮助我们理解

-   分割字符串 _use_word_model.py | 返回确定质量		- Returns confidence based on a scoring approach.

层。所有属于应用层的内容都涉及

用户的需求（例如，听音乐，拍照或预订酒店房间）。

所有属于实现层的内容都与

发生这些事情（例如，将数字信息转换为声学信号，识别数码相机中的像素的颜色，或通过发送消息

互联网到预订系统）。实现层的元素是

本质上是技术性的，并且被视为一种手段。

***区块链基础***

5

功能 vs. 非功能方面

区分系统做什么和系统如何做到的

导致了功能和非功能方面的分离。应用层的例子包括

功能方面是通过网络发送数据，播放音乐，拍照-

TOS，并操纵图片的单个像素。非功能性的例子

方面是美观的图形用户界面，运行快速的软件和一个

保持用户数据的隐私性并保存的能力。其他重要的非功能性

系统方面是安全和完整性。*完整性* 意味着系统按预期运行，它涉及许多方面，如安全和正确性。 1 T 通过参考英语语法用法来记住系统的功能和非功能方面的差异是一种很好的方式

语言：动词描述动作或所做的事情，而副词描述如何

动作是如何完成的。例如，一个人可以快速或缓慢地走路。在这两种情况下

情况下，“行走”的动作是相同的，但动作的执行方式不同。

根据经验，可以说功能方面类似于动词，

而非功能方面类似于副词。

同时考虑两个层次

确定功能和非功能方面以及分离应用和实现层可以同时进行，从而导致

二维表。表 1-1 说明了这种方式在心理上分层手机的结果。

**表 1-1** 。心理分层手机的示例

**层**

**功能方面**

**非功能方面**

应用

拍照

图形用户界面

拨打电话

看起来很漂亮

发送电子邮件

易于使用

浏览互联网

消息发送快速

发送聊天消息

实施

内部保存用户数据

高效地存储数据

与最近的建立连接

节省能源

移动连接器

保持完整性

访问数码相机中的像素

确保用户隐私

1Chung，劳伦斯，等. *软件工程中的非功能性要求*。 Vol. 5\. 纽约：新星科学与商业媒体，2012\.

6

***步骤 1 | 思考层和方面***

表 1-I 可能解释了系统特定元素的可见性（或缺失）对其用户的影响。应用层的功能方面是最

系统的明显元素，因为它们满足用户的明显需求。

这些元素通常是用户了解的元素。另一方面，

实施层的非功能方面很少被视为主要的

系统的元素。它们通常被视为理所当然。

完整性

完整性是任何软件系统的重要非功能方面。它

三大组件 2：

• *数据完整性*：系统使用和维护的数据

是完整的、正确的，并且没有矛盾。

• *行为完整性*：系统按预期行为，且

是没有逻辑错误的。

• *安全性*：系统能够限制对其数据的访问

和功能仅提供给授权用户。

大多数人可能认为软件系统的完整性是理所当然的，因为大多数

大部分时间我们很幸运地与保持其完整性的系统进行交互。这是

因为程序员和软件工程师已经付出了很多

时间和精力来开发系统以实现和维护

完整性。因此，当涉及到欣赏

软件工程师为了创建保持高度完整性的系统所付出的努力

完整性。但一旦我们与一个

无法这样做的系统。这是当您遭受数据丢失

数据，不合逻辑的软件行为，或者意识到陌生人能够访问您的私人数据。这是当您的手机、

计算机、电子邮件软件、文字处理器或表格处理器

计算器使你生气，使你忘记了你的礼貌！在这些场合，

我们开始意识到软件完整性是一种非常有价值的商品。

因此，软件专业人员花费大量

他们的时间投入到这个看似微小的非功能方面

实施层。

2.Boritz, J. Efrim. 信息完整性的核心概念：信息系统从业者的观点。

*会计信息系统国际期刊* 6.4 (2005): 260–279\.

***区块链基础知识***

7

展望

本步骤介绍了软件的一些一般原则

工程。特别是完整性概念和功能性与非功能性方面以及应用与实施的软件系统

被说明。理解这些概念将帮助您欣赏

区块链存在的更广泛范围。下一步将介绍

通过本步骤介绍的概念来理解整体情况。

总结

• 系统可以通过分隔成几部分进行分析：

• 应用和实施层

• 功能和非功能方面

• 应用层关注用户需求，而

实施层的非功能方面关注使事物

发生。

• 功能方面关注做了什么，而非功能-

方面关注事物的做法。

• 大多数用户关注功能方面

系统的应用层，而非功能-

系统的非功能方面，特别是

实施层，对用户不太可见。

• 完整性是任何

软件系统，它有三个主要元素：

• 数据完整性

• 行为完整性

• 安全

• 大多数软件故障，例如数据丢失，逻辑不合理

行为，或者陌生人访问他人的私人数据，都是

违反系统完整性的结果。

**第二步 | 看到大局**

2

看到大局

图片

软件架构及其与

区块链

这一步不仅提供了区块链所处的大局，而且

但它还强调了区块链在大局中的位置。为了让你看到大局，这一步引入了软件架构的概念，并解释了它与将系统分离的概念之间的关系

层和方面。为了帮助你认识到块的位置-

区块链在大局中的位置，这一步突出了

区块链和软件架构。最后，这一步指出了核心

区块链的目的在一句话中。欣赏其目的是

了解区块链并了解课程的核心是理解区块链的基础

接下来的步骤。

隐喻

您有没有买过汽车？大多数人都有。即使你从来没有买过一

汽车时，你可能知道汽车配备有不同类型的引擎

（例如，柴油，汽油或电动引擎）。这是一个过程的例子

© 丹尼尔·德雷舍 2017

D. Drescher, *区块链基础*, DOI 10.1007/978-1-4842-2604-9_2

10

***第二步 | 看到大局***

模块化的结果，也是将分层概念应用于汽车的结果。

在购买汽车时可以选择不同的引擎会带来

车辆中可能有惊人的差异。两辆从外-

一侧的动力引擎和

因此在驾驶性能上可能存在很大差异。此外，您的选择

引擎对汽车的其他特性有影响，例如其价格，运营成本，消耗的燃料类型，排气系统和

刹车的尺寸。有了这个想法，理解

在大局下看到区块链会更容易。

支付系统

让我们将分层概念应用到支付系统中。表 2-1 显示了一些用户需求以及用户需求的一些非功能方面

应用层和实施层。

**表 2-1**。支付系统的方面和层

**层**

**功能方面**

**非功能方面**

申请

存钱

图形用户界面看起来很漂亮

取钱

易于使用

转钱

转账很快完成

监控账户余额

系统有许多参与者

实施

?

24 小时提供

防欺诈

保持完整性

确保用户隐私

你有没有注意到表格中那个带问号的部分呢？

通常会看到关于用于使系统工作的技术的信息？

这个空白空间是故意留出的。这是你决定的地方

“引擎”应用于运行你的系统。下一节会告诉你

软件系统中引擎等效物的一点更多的信息。

两种软件架构类型

有许多实现软件系统的方式。但是，其中之一

实施系统时的基本决策之一是其架构，

其组件的组织方式以及彼此相关的方式。

![](img/index-22_1.png)

***区块链基础***

11

软件系统的两种主要架构方法是中心化

以及分布式。1

在中心化软件系统中，组件位于周围并连接

和分布式系统的组件是直接连接到所有其他组件。不过，所有

系统形成一个连接的组件网络，而没有任何中央

协调或控制的元素。

图 2-1 描述了这两种对立的架构。图中的圆圈代表系统组件，也称为节点，而线条代表它们之间的连接。此时，知道细节并不重要。

这些组件做什么以及它们之间交换什么信息

节点。重要的是要看到这两种不同的方式

组织软件系统的方式。图 2-1 的左侧描绘了分布式架构，其中组件与一个

一个没有中心元素的组件又和另一个组件相互连接。重要的是要看到这些组件中没有一个

组件直接连接到所有其他组件。然而，所有

组件至少间接地相互连接。右侧

图 2-1 的右侧描绘了一个中心化架构，其中每个组件连接到一个中央组件。这些组件之间没有连接

直接相互连接。它们只有一个直接连接到中央

组件。

**图 2-1**。分布式（左）vs。中心化（右）系统架构 1.塔南鲍姆，安德鲁·S，茂顿·范·斯坦。*分布式系统：原理与范例*。

上塞德尔河，新泽西州：皮尔逊普伦蒂斯大厅，2007。

12

***第 2 步 | 全局视野***

分布式系统的优势

分布系统相对于单台计算机的主要优势 2：

• 更高的计算能力

• 成本降低

• 更高的可靠性

• 自然增长的能力

更高的计算能力

分布系统的计算能力是将所有连接的计算机的计算能力相结合的结果。

所有连接的计算机的计算能力。因此，分布式系统

通常比每台个人计算机具有更大的计算能力。这就有

即使比较了由分布式系统组成的系统的分布

相对较低计算能力的计算机与孤立的超级计算机。

成本降低

主流计算机、内存、硬盘空间和网络

20 年来设备已经大大下降。由于分布式

系统由许多计算机组成，分布式系统的初始成本是

高于单个计算机的初始成本。然而，创建、维护和操作超级计算机的成本仍然远高于

创建、维护和操作分布式系统的成本。这是

特别是由于替换分布式系统的单个计算机

可以在没有显着的整体系统影响的情况下完成。

更高的可靠性

分布式系统的增加可靠性是基于

整个计算机网络即使在个别

机器崩溃。分布式系统没有单点故障。如果一个元素失败，剩下的元素可以接管。因此，一个超级

计算机通常比分布式系统可靠性低。

2 Tanenbaum，Andrew S.和 Maarten Van. Steen。*分布式系统：原理和范例*。

新泽西州上桑德尔河：皮尔逊普林斯顿大厅，2007。

***区块链基础***

13

能够自然成长

分布式系统的计算能力是聚合的结果

其成员。因此，计调必须由系统的成员来完成

整个系统通过将额外的计算机连接到系统。作为

结果，整个系统的计算能力可以逐步增加

在细粒度上进行清点。这支持了对需求的方式

计算能力在许多组织中增加。分布

分布式系统是对计算能力的增长

单个计算机。单个计算机提供相同的动力，直到它们

被更强大的计算机替换。这导致了不连续

计算能力的增长，这只有很少被消费者所赏识

计算服务的使用者。

分布式系统的缺点

分布式系统与单个计算机相比的缺点是：

• 协调开销

• 通信开销

• 对网络的依赖

• 更高的程序复杂性

• 安全问题

协调开销

分布式系统没有协调它们的中心实体

参与者。因此，协调必须由系统的成员来完成

本身。在分布式系统中协调工作的协调开销是

具有挑战性并且需要努力和计算能力，这些都不能用于

真正的计算任务，因此术语协调开销。

通信开销

协调需要通信。因此，构成的计算机

分布式系统的各个计算机必须相互通信。这需要

存在通讯协议和发送、接收以及

14

***步骤 2 | 见大局***

消息的处理，这反过来需要努力和计算力

不能用于真正的计算任务，因此，术语**通信**

层额外的开销。

对网络的依赖

任何形式的通信都需要一个媒介。媒介**负责**

用于在进行通信的实体之间传输信息

其他。分布式系统中的计算机通过消息的方式进行通信

通过网络传递消息。网络有自己的挑战和

困难，进而影响了节点之间的**通信和协调**

形成分布式系统的计算机。然而，没有任何网络，

将没有分布式系统，没有通信，因此也没有

节点之间的协调，因此对网络的依赖。

更高的程序复杂性

解决计算问题涉及编写程序和软件。由于

对于先前提到的缺点，分布式系统中的任何软件

系统必须解决额外的问题，比如协调，通信，

和利用网络。这增加了软件的复杂性。

安全问题

在网络上进行通信意味着发送和分享**关键的数据**

对于真正的计算任务。然而，通过**传递信息**

网络意味着安全问题，因为不可信的实体可能会滥用

网络以访问和利用信息。因此，任何分布式的

系统必须解决安全问题。访问限制越少

分布式节点进行通信的网络，越高

安全关注点是分布式系统。

分布式点对点系统

点对点网络是一种特殊的分布式系统。它们包含

个体计算机（也称为节点），这些节点进行计算

资源（例如处理能力，存储容量，数据或网络带

直接提供给网络中所有其他成员的**网络带宽**

![](img/index-26_1.png)

***区块链基础***

15

任何中心协调点。网络中的节点**是平等的**

有关他们在系统中的权利和角色。此外，它们都**是**

资源的提供者和消费者。

点（如文件共享，内容分发和隐私保护）具有有趣的应用。

整个分布式系统。因此，使用的用户或客户越多

软件越大越强大的**系统**。这个想法，它的

结果，它的挑战在以下步骤中进行讨论。

混合集中式和分布式系统

集中式和分布式系统是建筑学的**反面**。技术上的

反面永远激励工程师创建继承的混合系统

其父母的力量。集中式和分布式系统都不是

这个特例。有两种原型方式来结合这些**相反**

，他们需要被理解，因为当

在现实世界中学习区块链应用。它们是中心

在分布式系统中和中心内部的分布系统。

图 2-2 左侧的图表展示了一个在分布式系统中建立中心组件的架构。乍一看，

看起来形成一个分布式系统。然而，所有的圆圈都

与中间的较大圆形相连接。因此，这样一个系

仅在表面上看起来是分布式的，但实际上是一个集中式系统。

**图 2-2\.** 将分布式与集中式架构混合

16

***步骤 2 | 看清全局***

图 2-2 右侧的图表展示了相反的方法。这样一个系统乍一看似乎是一个集中式系统，

因为外围的所有圆圈只与一

大型中心组件。然而，中心组件包含一个分布

在组成部件的边缘可能甚至意识不到

存在于中心组件之内的分布式系统的东西。

这两种方法的共同之处在于很难确定

他们的真正本质。它们是分布式的还是集中式的？可能并不需要

给这些架构起独特的名字。但是，指出来是很重要的

明白他们的双重本质。这是非常重要的，因为可能不容易看出它们的中心性或分布性。我会在以后讨论区块链商业化的方式时回到这一点。

到目前为止，当我讨论区块链的商业化方式时，我会再回到这一点。

识别分布式系统

混合架构的出现使得很难确定分布式

显然存在。对于分布式系

系统的范围超出了本书的讨论。然而，在本书的过程中，

重要的是要知道分布式系统是什么，以及它与

从其他软件系统中区分开。如果你对某个系统是否

是分布式的，可以寻找一个单一组件（例如数据库、名称或用户

登记处、登录或注销组件，或者紧急关闭按钮），这个

可能终止整个系统。如果你找到了这样一个组件，系统

考虑的系统并非分布式。

■ **注** 如果存在单一组件，例如，一个单独的关闭按钮可以使整个系统崩溃，那么这个系统就不是分布式的。

区块链的目的

在设计软件系统时，可以选择哪种架构风格

将被使用，就像选择汽车引擎一样。架构决策

从应用程序的功能方面独立地进行决策

层。因此，一个人可以创建分布式系统和集中式系统

具有应用层相同功能的相互之间的软件系统。当实现系统时，架构只是手段。因此，付款

系统，如表 2-1 中提出的，可以作为分布式或集中式系统实施。

这两个架构概念各自有其优点和缺点

优势及其自己特定的做事方式。选择特定的

架构对你如何实现功能和

***区块链基础***

17

系统的非功能方面。特别是，两种架构概念

有非常不同的方法来确保完整性。这就是

区块链进入画面。区块链是实现完整性的工具

分布式软件系统中实现非功能性方面的工具。因此，它可以看作是实现的一个工具

■ **注意** 区块链的目的是在分布式系统中实现和维护完整性。

展望

在分布式系统中实现完整性非常技术性，可能听起来有点无聊。然而，对于许多人来说，使这一成就令人兴奋的问题是

人们取决于分布式系统将做什么以及何种类型的中心化

取代的分散式系统。下一步解释了点对点系统是如何

改变了我们的世界，以及区块链作为实现完整性的工具

在分布式软件系统中有改变世界的潜力。

摘要

• 软件系统的架构决定了

其组件是如何组织和相关的。

• 集中式和分布式软件架构可以

被视为相反极。

• 分布式系统由许多独立的

合作彼此的独立计算机

使用通信媒介来实现

没有任何集中化元素的具体目标

控制或协调。

• 作为一条经验法则，人们可以说一旦系统

有一个组件可以拖垮整个

系统，无论其多么复杂都不是分布式的

架构的外观。

• 区块链是分布式或集中式系统的实施层的一部分

分布式软件系统。

• 区块链的目的是确保特定

分布式软件系统的非功能性方面

即：实现和维护其完整性。

**步骤**

3

认识到

潜力

点对点系统可能会

改变世界

本步骤通过传播加深了我们对区块链的目的的理解

考虑特定类型的分布式系统：点对点系统。作为

结果，这一步将帮助你理解为什么有如此多的激动

技术专家和业务专业人士之间都对区块链

本步骤还指出了区块链的主要应用领域

期望能提供最大价值。此外，本步骤讨论了一些

点对点系统在现实世界的后果。

隐喻

你还记得上一次为自己在音乐店购买 CD 的时间吗？

商店或百货商店吗？大多数人都没有买过实际 CD

长时间以来，因为音乐行业经历了巨大变化。

如今，人们从音乐门户网站下载个别歌曲，分享 mp3

朋友之间共享他们的音乐文件，或者在移动设备上使用音乐流，而不是

购买 CD。这种改变始于一款软件的出现

© 丹尼尔·德雷舍尔 2017

D. 德雷舍尔，《区块链基础》，DOI 10.1007/978-1-4842-2604-9_3

20

***步骤 3 | 辨识潜力***

允许人们与彼此分享他们的音乐文件。但是什么是

关于那个软件有什么特别之处？这是它的一位发明者所说的

关于这个：

*这个系统，最有趣的是，你正在与*

*同龄人，你正在与一条街上的人交流信息。*

—肖恩·范宁，Napster 的联合创始人

范宁和他的同事所发明的是一个点对点系统

共享音乐。回顾上世纪 90 年代末，这个软件开创了一个新时代

音乐行业的既定商业模式。这一步说明了是什么

Napster 的出现，CD 销售的下降，以及巨大的变化

音乐行业与区块链有关。

如何点对点系统改变了整个

行业

长时间以来音乐行业一直以以下方式运作：音

音乐家与工作室签订了合同，录制了歌曲，制作并

在各种媒体上销售音乐唱片（例如，黑胶唱片，磁带或 CD），

单潜入的多种渠道向客户出售。

渠，包括百货商店和专门店。实际上，工作室

作为音乐的听众和音乐家之间的中介。

到音乐。由于音乐工作室可以保持其中介角色

在制作、营销和分销专有知识和技能

唱片。然而，在 2000 年代的第一个十年，环境

音乐工作室的运营方式发生了巨大变化。

音乐的数字化，价格实惠的录音设备的可用性

价格合理，私人使用个人计算机的普及，以及

互联网使音乐工作室变得不必要。音乐

工作室——制作、营销和分销唱片——可以由

艺术家和消费者自己。Napster 在

取代音乐工作室作为中介。有了 Napster，人们不再

不再依赖音乐工作室获取最新的热门单曲。可以

与世界各地的人分享个别音乐文件，而无需

购买任何 CD。 Napster 的点对点方法实际上是一种

***区块链基础***

21

数字分享的集市，让消费者获得更广泛范围的

从所有历史以来制作的音乐，使音乐工作室在某种程度上变得不必要，并且

造成他们巨大损失。1

点对点系统的潜力

Napster 案例告诉我们，点对点系统具有潜力

改变整个基于一个简单理念的产业：替代中间商

人与点对点交互的标志。在音乐行业的情况下

传统的工作室及其市场营销和分发渠道充当了中间人。

艺术家和消费者之间的中间人被点对点系统取代

点对点文件共享系统。造成音乐

行业如此容易被点对点系统所取代的原因是

音乐的物质性质和复制和转移数据的低成本。

点对点系统的力量不仅限于音乐行业。

每个主要充当生产者和客户之间中间商的行业

位和数字商品和服务的交易受到取代的脆弱性

通过点对点系统。这个说法可能听起来有点抽象，但是你

可能会发现许多位和数字商品和服务的中间商

一旦你认识到它们中最大的一个：金融行业。

你的银行账户或信用卡上有什么？

这是真正的钱吗？你拥有的钱已经变成了位

和字节。很少有实际货币存在为物理

纸币和硬币。世界上绝大多数的货币和资产都存在

如同集中的信息技术系统中

金融行业。银行和金融行业的许多其他参与者都是生产者和消费者之间的中间商，他们处理的是位和字节

组成我们的钱和我们的财富。借款、贷款或转

从一个账户转账到另一个账户只是转移位

ial good operated by middlemen, also called intermediaries. It is amazing how

许多中间商参与了看似简单的交易（例如，转账

从一个银行账户转到另一个不同国家的银行账户

涉及五个中间商，它们都需要处理时间并加上

自己的费用）。因此，像转移一笔金额这样简单的事情

从一个银行账户转到另一个在不同国家的账户涉及很长时间

1Hong, Seung-Hyun. Napster 对录音音乐销售的影响：来自消费者支出调查的证据. *斯坦福经济政策研究所工作论文* (2004): 3–18; Leyshon, Andrew. 可怕的怪物？软件格式，点对点网络，和赠品的幽灵. *环境与规划 D：社会与空间* 21.5 (2003): 533–558\.

22

***第 3 步|认识潜力***

处理时间和产生高额交易成本。在点对点系统中，

同一笔转账将变得更简单，时间和成本也将更低

因为它可以被处理为它是：位和字节之间的转移

两个对等方或节点。

点对点系统胜过中心化系统的优势在于直接

合同伙伴之间发生交互，而不是间接的互动-

通过中间人进行交流，因此，处理时间较少，成本更低

成本。

点对点系统的优势不仅限于货币交易

fer。每个主要作为生产者和中间商之间的中间商的行业

无形或数字货物和服务的客户容易受到

被点对点系统取代。随着数字化的持续，越来越多

日常生活和越来越多的商品和服务将会

变得无形并从点对点系统的效率中获益-

毛求。点对点系统的支持者认为，我们生活的几乎所有方面

生活将受到数字化和点对点网-

诸如付款、储蓄、贷款、保险以及发行这类工作

责任，验证出生证明、驾驶执照、护照、身份证、教育证书、专利和劳动合同等。其中大部分已经

在由机构运行的集中系统中以数字形式存在，

■ **注意** 取代中间商也被称为去中介化。这被认为是许多主要充当中间人的商业和公司的严重威胁，这些公司主要作为不同群体之间的中介，如买家和卖家、借款人和贷款人，或生产者和消费者之间的中介。

术语和区块链的链接

现在您已经了解了点对点系统的潜力，它是

必须澄清问题领域的术语并解释

与区块链的关系。特别是，需要考虑以下几点

讨论：

• 点对点系统的定义

• 点对点系统的架构

• 点对点系统与区块链之间的关系

***区块链基础***

23

点对点系统的定义

点对点系统是由节点组成的分布式软件系统

（个人计算机），使其计算资源（例如，处理能力、存储容量或信息分发）直接可用于另一台计算机。当加入点对点系统时，用户将其计算机

处理能力、存储容量或信息分发)可以直接提供给另一个。当加入点对点系统时，用户将其计算机

进入系统的节点，在其权利和角色方面是平等的。

尽管用户在贡献资源方面可能存在差异，

系统中的所有节点具有相同的功能能力和责任-

个性。因此，所有用户的计算机既是供应商又是消费者的

资源 ces.2

例如，在点对点文件共享系统中，单个文件是

存储在用户的机器上。当有人想要下载一个文件时

这样一个系统，他正在从另一个人的机器上下载它，

可能是隔壁邻居或位于一半路程之外的人-

世界。

点对点系统的架构

24

他们由分享计算资源的个体节点组成

系统中实现和维护完整性的工具。纯分布式对等系统可能使用区块链以实现和保持系统

集中化要素。集中式对等系统维护中央

节点促进对等方之间的互动，维护目录

如在[步骤 2](http://dx.doi.org/10.1007/978-1-4842-2604-9_2)中所讨论的，

[节点的识别。3]（index_split_000.html＃33）集中式对等系统通常利用混合架构，例如图[2-2](http://dx.doi.org/10.1007/978-1-4842-2604-9_2#fig2)左侧所示。这种体系结构允许结合集中式和分布式计算的优势。另一方面，纯粹的分布式对等-

有助于实现这一点。

因此，这些系统中的所有节点执行相同的任务，既充当

资源和服务的提供者和消费者。

纯分布式对等系统与区块链之间的关系

区块链同样重要。然而，激动人心的主要事实

纯对等系统没有任何中央控制或协调要素。

2 Tanenbaum, Andrew S.和 Maarten Van Steen. *分布式系统：原理和范例*。

上塞德尔河，新泽西州：皮尔逊普林斯顿霍尔，2007。

3 Eberspächer, Jörg 和 Rüdiger Schollmeier。 对等系统的第一代和第二代。在*对等系统与应用*。柏林海德堡：施普林格·费尔拉格，2005 年：35–56。

一个所有与系统连接的节点和歌曲的中央数据库

***步骤 3 | 认识潜力***

对等系统之间的链接

区块链

等。但是，还有一些正在使用的对等系统

完整性。因此，纯分布式对等系统之间的链接

区块链的用途是在纯分布式系统中实现和维护完整性。

区块链的潜力

描述对等节点提供的服务，或执行查找和

是前者将后者作为实现和维护完整性的工具。

因此，这种激动和潜力的论点

区块链是什么：纯分布式对等系统具有巨大的商业化

商业潜力，因为它们可以取代集中式系统并改变整个

由于去中介化，在这些节点上提供。

系统可能使用区块链来实现和维护完整性，而

人们是去中介化。区块链只是一个实现目的的手段

中心化对等系统的例子是 Napster，其维护

对等系统是通过构建分布式计算系统

■ **注意** 区块链的激动点在于它作为工具的能力，来实现和维护纯粹分布的点对点系统中的完整性，这种系统有可能由于去中介化而改变整个行业。

展望

这一步解释了什么是点对点系统，并突显了它们的

由于去中介化的潜力而有可能改变整个行业。另外，

这一步指出，对区块链的兴奋之情源于其

纯粹分布的点对点系统为实现其任务提供服务的能力。

然而，为什么在分散中实现和维护完整性的问题是重要的,

分布式系统的重要性还没有得到回答。下一步将

更详细地讨论这个问题。

***区块链基础知识***

25

总结

• 点对点系统由计算机组成，使

直接提供他们的计算资源

另一个。

• 点对点系统的优势在于其能力

允许用户直接相互交流而不是

间接通过中间人相互作用。

• 用点对点系统替换中间人增加

处理速度并降低成本。

• 点对点系统可以是集中式或纯粹的

分布式。

• 完全分布的点对点系统构成一个网络

相互直接交互的平等成员

而没有任何中央协调。

• Napster 展示了点对点系统的力量

作为其文件共享系统迎来了一个新时代

传统音乐产业的商业模式，

其中主要充当艺术家和

消费者。

• 每个主要充当中间人的行业

无形或数字商品的生产者和客户

和服务容易被点对点

点对点系统。

• 我们金融系统的一个很大的部分是简单的中介

资金供应商和消费者之间的媒介

主要以数字或无形物品存在的地方。因此，

数字化和点对点系统可能重塑

金融业与 Napster 类似地重塑

音乐产业。

• 随着数字化的继续，我们日常生活的更多方面

生活，越来越多的商品和服务将

变得无形，并受益于优势

点对点系统。

• 对区块链的激动源于其

作为用于实现和维护纯粹分布点对点系统完整性的工具的能力。

纯粹分布的点对点系统的完整性

由于去中介化的潜力而有可能改变整个行业

去中介化。

**阶段**

II

为什么

区块链

所需

这一阶段解释了区块链应该解决的问题

为什么解决这个问题很重要。这一阶段还将深化您的

理解区块链所在的问题领域，

在其中它提供最大价值，并与信任的关系,

完整性和所有权的管理。到这个阶段结束时，您将

已经对区块链的目的有了更深刻的理解，你

将对术语*区块链*本身有了不同的理解。

**S T E P**

4

发现

核心问题

如何驱赶一群独立的计算机

前两步指出了区块链的一般目的

并强调了在纯分布式点对点系统中的重要性

特别是。结果表明，在分布式系统中保持完整性是区块链的主要目的。但为什么在特定的分布式点对点系统中，保持完整性尤为重要？

挑战？这一步通过发现微妙的关系来回答这个问题

在纯分布式点对点系统中的信任和完整性之间的关系。作为

因此，这一步将加深你对完整性重要性的理解

和揭示区块链需要解决的主要问题。最后，这一

这一步描述了区块链预期提供价值的环境

提供最大价值。

隐喻

许多语言都有一个形象的俗语来描述某种情况

试图组织一群混乱的个体。比如，在英语中

有人会描述这种情况为试图赶群猫，因为它说明了

群体中一群倔强而棘手的动物的挑战

甚至不接受或认可中央权威。问题出现在

试图组织一群不接受或认可中央权威的个体

© 丹尼尔·德雷舍 2017

D. 德雷舍，《区块链基础》，DOI 10.1007/978-1-4842-2604-9_4

30

***第 4 步 | 发现核心问题***

中央权威的情况听起来很熟悉？事实上，这正是这种情况

纯分布式点对点系统的一部分，它由个体节点组成

独立节点，而没有任何形式的中央控制或协调

tion。这一步解释了纯分布式点对点的一个主要挑战

系统如何与区块链相关。

点到点系统的信任和完整性

信任和完整性是同一枚硬币的两面。在软件背景下

系统，*完整性*是系统的一个非功能性方面，用于安全、完整、一致、正确和没有腐败和错误。

没有证据、证据或调查。信任是提前给出的，并且将

根据不断进行的互动结果而增加或减少。

就点对点系统而言，这意味着人们将加入和连-

续地为系统做出贡献，如果他们信任它，并且与系统进行持续互动的结果证实并加强他们的信任。系统的完整性是必需的，以满足用户的期望和

加强他们对系统的信任。如果由于缺乏完整性而导致用户对系统的信任没有得到加强，那么用户将放弃该系统，从而最终导致其终止。由于信任对点对点系统的存在至关重要，主要问题是：我们如何

如何在纯粹分布式的点对点系统中实现和维持完整性？

在纯粹分布式系统中实现和维持完整性取决于

各种因素，其中一些最重要的因素包括：

• 关于节点或同行的数量的知识

• 关于同行的值得信赖性的知识

在分布式点对点系统中实现完整性的机会是

如果知道节点的数量以及它们的值得信赖性，那么实现完整性的机会就会更大。

此情况类似于经营一个遵守高度

道德标准，并为新成员的严格入职流程使用

bers。然而，在分布式中实现完整性的最坏情况

对同行系统而言，当节点的数量和它们的信任

值得性是未知的。这种情况出现在纯粹分布式

互联网上的点对点系统，对所有人开放。

点对点系统中的完整性威胁

为简单起见，可以考虑点对点系统中的两个主要完整性威胁

系统：

• 技术故障

• 恶意同行

***区块链基础知识***

31

技术故障

点对点系统由其用户的个人计算机组成

经由网络进行通信的计算机的所有硬件和软件组件

计算机系统以及计算机网络的任何组件都有

失败或产生错误的即时风险。因此，任何分布式系统都必须面对其组件可能会故障或可能会通过

机会。

恶意同行

恶意成员是点对点系统中的第二个完整性威胁。

这种不可信来源并非技术问题，而是

由决定利用的个人的目标所引起的问题

制度。他们沟通的硬件及软件组件均有可能面临

对社会学和群体动态比对技术更重要。不诚实和恶意的

同行组成了点对点系统最严重的威胁，因为

他们攻击了构建任何点对点系统的基础：信任。

一旦用户不能再信任他们的同行，他们将转身离开并停止

为系统贡献计算资源。因此，节点的数量

成员将减少，整个系统将变得对用户不再那么有吸引力

剩余的成员，这反过来将加速系统的衰落

最终将被彻底抛弃。

要解决的核心问题

区块链

在最佳条件下实现完整性和信任很容易。真正的挑战是在最坏的条件下在分布式系统中实现完整性和信任。这就是区块链应该解决的问题。

区块链要解决的核心问题是实现和维护完整性

在一个纯粹的分布式对等系统中实现和维持完整性，这个系统由一个

未知数量的对等体以及可靠性和可信度。这

问题并不是一个新问题。事实上，它是一个众所周知和广泛讨论的

计算机科学中的一个 **问题**。通过借用军方的一个隐喻，

问题被公认为拜占庭将军问题。1

1Lamport, Leslie, Robert Shostak, and Marshall Pease. The Byzantine generals problem.

*ACM 程序设计语言与系统交易（TOPLAS）* 4.3（1982 年）：382-401。

32

***第 4 步 | 发现核心问题***

■ **注意** 区块链要解决的问题是在由未知数量的对等体组成的纯粹分布式对等体系统中实现和维护完整性，这些对等体的可靠性和可信度都是未知的。

展望

这一步强调了在对等体之间的完整性和信任的重要性

系统。此外，本步骤指出了区块链要解决的核心问题

由区块链强调了其重要性，以实现和保证完整性

对对等体系统的信任。然而，对术语“区块链”的定义仍然

仍然缺失。这将是下一步的主题。

摘要

• 完整性和信任是对等体

系统。

• 人们将加入并继续为对等体做出贡献

对等体系统如果他们信任它，并且与对等体互动的结果

与系统进行持续性的确认和强化-

强制信任。

• 一旦人们对对等体系统失去信任，

他们将放弃它，这将导致系统

最终终止。

• 对等体系统中的主要完整性威胁是：

• 技术故障

• 恶意的对等体

• 在对等体系统中实现完整性取决于：

• 对对等体数量的了解

• 对对等体的可信度的了解

• 区块链要解决的核心问题就是实现

并维护纯粹分布式对等体

由未知数量的对等体组成的系统

以及可靠性和可信度。

**S T E P**

5

消除歧义

术语

定义区块链的四种方式

在前面的步骤中，您了解了区块的主要目的

链与软件系统的完整性和信任之间的关系。

因此，您对区块链的目的有了一个扎实的理解

区块链，但您仍然缺少对术语*区块链*本身的定义。

本步骤将引起您对术语的定义，并解释它的不同用法。本步骤将提供对区块链的临时定义，这将指导您完成本书的其余部分。最后，这一步

解释了为什么所有权的管理是一个突出的应用案例

区块链的

术语

在对区块链的讨论中，该术语使用如下：

• 作为数据结构的名称

• 作为算法的名称

• 作为一套技术的名称

• 作为纯分布式的对等-

具有共同应用领域的系统

© Daniel Drescher 2017

D. Drescher，*区块链基础*，DOI 10.1007/978-1-4842-2604-9_5

34

***第五步 | 消除术语歧义***

一种数据结构

在计算机科学和软件工程中，数据结构是一种

组织数据，而不受其具体信息内容的影响。你可以想象

关于数据结构，就像建筑学中的楼层平面图。建筑的楼层平面图涉及了用墙壁分隔和连接空间，

楼层和楼梯。当用作名称

作为数据结构的名称时，区块链是指组成称为

区块。人们可以将这些块想象成书中的页。这些块

与链条一样连接在一起，因此得名区块链。在

与书籍相关时，单词和句子是要存储的信息。

它们写在不同的页面上，而不是写在一个大卷轴上。

这些页面通过它们在书中的位置相互连接

通过页码确定是否有人从中删除了一页

通过检查页面号是否持续而不遗漏一页

数字。此外，页面上的信息以及页面内的内容

书中页码。订购是一个重要细节，将用来

在数据结构中对数据块进行链接也是通过使用非常特殊的编号系统来实现的，这与

普通书本中的页码编号。

一种算法

在软件工程中，术语*算法*指的是计算机完成的一系列指令。这些指令通常涉及数据

结构。在作为算法名称使用时，区块链是指一种

一系列指令，协商了许多

使用完全分布式的对等系统中的区块链数据结构，类似

到民主投票方案。

一套技术

当用来指代一套技术时，区块链指的是一种

包括区块链数据结构、区块链算法

作为加密和安全技术，这些技术结合起来可以用于

在完全分布式的对等系统中实现数据完整性，而不受

应用目标。

作为纯分布式的对等系统的总称

具有共同应用领域的系统

区块链还可用作纯分布式的对等-

对等系统使用区块链技术套件的分类帐。请注意

***区块链基础***

35

在这种情况下，区块链是指作为整体的纯分布式系统，而不是指纯分布式系统的软件单元的一部分

系统。

本书中术语的使用

在本书的其余部分，区块链指的是

单纯分布式的点对点分类账系统术语的总称

利用区块链技术组件套件。如果有其他意义，我将通过明确使用区块链数据结构、区块链算法或区块链技术组件套件来指出。

■ **注意** 如今被视为区块链技术的技术是在 2008 年由化名 Sa toshi Nakamoto,1 提出的，其真实身份尚未被揭示。

临时定义

以下定义并不完整。它仍然缺少重要的细节

尚未被提出。然而，这个定义作为一个过渡-

朝着更全面理解这个术语迈出了重要的一步：

*区块链是一种纯粹分布式的点对点分类账系统*

*利用一个由谈判的算法组成的软件单元*

*有序和连接的数据块信息内容*

*利用密码和安全技术，以实现和*

*保持其完整性。*

管理所有权的作用

临时定义并没有提及比特币或管理

加密货币的所有权。这可能会让人吃惊，因为许多

有关区块链的文章和书籍声称其目的是

管理数字货币的所有权。事实上，管理数字货币的所有权

加密货币是区块链技术一个非常显著和自然的应用实例

区块链，但这并不是唯一的。区块链具有广泛和多样的

一系列应用。然而，有两个原因使得管理

数字商品的所有权是对区块链最多讨论的应用。

1Nakamoto，Satoshi。比特币：点对点电子现金系统。2008。[`bitcoin.org/`](https://bitcoin.org/bitcoin.pdf)

[bitcoin.pdf.](https://bitcoin.org/bitcoin.pdf)

36

***第 5 步|消歧义术语***

首先，它是最容易理解和解释的。其次，它对经济影响最大。所有权的概念和

执法的所有权权利都是几乎每一个人类的核心要素

社会（甚至一些动物也有所有权概念，并为此而争斗

执法）。银行、保险公司等机构的大部分活动都是

公司、托管人、律师、法院、律师和领事馆都在关注

仅仅管理所有权权利或其强制执行。因此

管理所有权是一个价值数十亿美元的市场，涉及到任何技术的创新-

可能改变我们管理所有权方式的技术将会有巨大的影响。

结果表明，区块链确实可以显著改变我们的方式

管理所有权。

区块链在这个应用领域

书

区块链作为用于管理分布式点对点的技术组套件-

点对点分类账系统可以有许多具体的应用，比如管理

数字商品或加密货币的所有权。然而，这本书

故意不考虑区块链的一种具体应用

因为我不想通过

详细讨论唯一的具体应用案例。 然而，为了让你更容易理解区块链，这本书考虑

管理和澄清所有权的一般应用案例，而不考虑

管理其所有权的具体商品。 因此，总体目标是

管理和澄清所有权将通过一些思维指导帮助你

你的学习路径，并帮助你在脑海中构建区块链的图景。

展望

这一步澄清了区块链这个术语，并提供了一个临时定义。

为了解释区块链，本书考虑了管理和澄清的一般应用案例

所有权，但实际上需要

• 区块链可以指：

0

接下来，将更详细地探讨所有权的基础。

你的袋子来收集你要买的东西。 就在这时，雇员

37

摘要

• 区块链这个术语含糊不清; 它具有不同的含义-

对于不同的人，根据不同的语境，我们为什么知道我们拥有什么

40

• 一种数据结构

• 一种算法

引入基本的安全概念。

• 一组纯分布式对等系统

具有共同的应用领域

• 管理和澄清所有权是最突出的

• 一套技术

• 区块链是一个纯分布式对等系统

利用由软件单元组成的分类帐系统

实现并保持其完整性。

有序且连接的数据块的内容

以及利用密码和安全技术

***区块链基础***

**S T E P**

6

区块链的一般应用案例，但并不是唯一的应用。

的本质

拥有权

还提供了一些关于所有权的一般见解，并引入了基本的安全概念。

[第 5 步提供了区块链的初步定义](http://dx.doi.org/10.1007/978-1-4842-2604-9_5)，并解释了为什么管理所有权被认为是其最重要的应用

案例。 这一步加深了区块链与其突出特征之间的关系

管理所有权的用例。 特别是，这一步揭示了

在纯分布式对等系统的信任和完整性之间

一方面，管理所有权; 另一方面是管理所有权。 此外，这一步

更深入地讨论所有权。 对于算法的更详细理解。

所有权将帮助您了解区块链的功能。 这

隐喻

想象以下情景。 在家里，你把一个苹果装进了你的袋子

理解

买一个三明治和一些饼干。 在结账时，你打开了

午餐袋。 在去办公室的路上，你决定去一个超市

© Daniel Drescher 2017

D. Drescher，*区块链基础*，DOI 10.1007/978-1-4842-2604-9_6

协商信息的算法的内容

***第 6 步 | 理解所有权的本质***

超市员工正在看着你，并在你的包里看到了苹果，那么

恰好是在超市出售的同种苹果。结果会怎样呢

超市员工此刻在想什么？他可能会虚假

从他的观察中得出结论，你可能已从他那偷走了苹果

商店。不幸的是，那家超市没有任何监视摄像头

或任何保安人员，此刻只有你是顾客。所以

你如何证明你没有偷这个苹果？

拥有权和证人

你是否曾想过是什么使你成为这些东西的主人

属于你？可能是因为你仍在考虑包里的苹果

超市的故事！那么是什么使你成为你包里的苹果的主人？

你如何证明你没有从超市偷走它？

所以想象一下你站在质疑你所谓的偷苹果的法庭前

情况。你如何证明你是苹果的主人？我们知道

在超市的例子中，证明你的清白足以证明你的清白

当没有人能证明你偷了苹果。然而，被驳

被怀疑偷窃并不是拥有权的证据。所以让我们

坚持证明你的拥有权。

如果有人能证明你买了

你去超市之前*买*了苹果。幸运的是，你记得你买苹果的商店，所以卖给你苹果的员工

愿意为此作证。但你低估了检察官。他正在与你的证人交叉检验，并询问你的证人棘手的问题：他能记起他卖给你的苹果吗？他能识别特定的

他卖给你的苹果是否与你包里找到的苹果相同？他能认出你是

买过那个特定苹果的人是谁？最后为什么他记得

一开始就记住所有这些细节吗？可能你向证人支付了钱以证明你的清白吗？所以这归结为一个基本

原则：有一个证人是好的，但拥有许多独立的证人

是说说服检察官你的清白的关键。

最后一点非常重要。越多的独立证人

作证为同一事实，这个事实确实是真的机会更大。原来这个想法将成为区块链的核心概念之一。

***区块链基础***

41

拥有权的基础

将上一节的发现提升到更抽象的层次，人们可以

声明证明拥有权涉及三个元素：

• 对拥有者的识别

• 对所拥有的对象的识别

• 拥有者到对象的映射

证人的证词完成了所有这些。历史上，目击者

目击者经常是澄清这些元素的唯一来源。但是

依赖于证人的口头证词是耗时的。因此，这些

元素已被由可靠实体颁发的文件取代。

如今，我们可以用身份证、出生证明和驾照来识别人们。

商业执照。序列号、生产日期、生产证书或

详细描述可以用来识别物体。这些文件不会

一旦创建就不会改变，因为人和物体的身份

不会改变。

所有者和对象之间的映射通常由分类帐来做

或注册。这不是一份一旦创建就保持不变的文件。每一

所有权的转移需要在这样的登记中记录，因为

过时的登记或分类帐无法成为可信赖的证人

重要性。 缺乏及时且井井有条的管理

登记已经导致了许多社会中特殊机构的发展。

某些对象的价值越高，变得改变的机会就越高

存在一个由政府管辖的登记，记录所有权

这些对象。大多数这些分类帐是向所有人开放的，以便使

验证所有权和提供便捷访问以澄清所有权。你

也许你可以自行研究，找出你的一些分类帐

国家以及证明它们所指的东西。我找到了用于记录所有权的分类帐

房地产、专利、船舶、飞机和公司。我甚至找到了结婚、出生和死亡的登记。

图 6-1 描述了设计所有权管理软件时涉及的不同概念的 relation。

![](img/index-49_1.png)

42

***步骤 6 | 理解所有权的本质***

**图 6-1.** 所有权的概念

在图 6-1 中，顶层中的概念比底层中的概念更一般。每个层次上的概念可以被看作是实现

上面图层中的概念。例如，所有权的证明

同样需要确定所有者和财产，并映射

所有者和财产之间的关系。所有权的使用需要确定

以及身份验证和授权，确保只有合法的人

一个人使用这个属性。底部行中的方框代表

实现层。例如，密码和签名

是用来实施身份验证和授权的概念。分类帐

可以被视为所有者和所有对象之间映射的具体实现

他们的财产。

一个关于安全的简短迂回

图 6-1 使用了三个需要在更多细节中解释的与安全相关的主要概念，因为它们在软件系统的上下文中的含义

可能与它们的普通用法有点不同：

• 标识

• 身份验证

• 授权

这三个概念的含义和相互关系可以通过一

现实世界的例子。也许你试图在 酒类商店买一瓶酒

店。酒类商店不得向未成年人出售酒精饮料

未成年人。酒类商店如何确保只卖酒给合适的人

people? The liquor shop accomplishes this by using identification, authentica-

tion, and authorization. And here is an explanation how this works.

***Blockchain Basics***

43

Identification

Identification just means to claim to be someone by stating a name or any-

thing else that could be used as an identifier. 1 In the liquor shop example, one could claim to be a certain person by stating a name. Identification does not

prove that you really are who you claim to be. Identification does not involve

the proof that you are not underage. Identification just means claiming to be

a certain person.

Authentication

The purpose of authentication is to prevent someone from claiming to be

someone else. Authentication means verifying or proving that you really are

who you claim to be1. This proof can be provided by something you have or something you know that can serve as proof that you really are who you

claim to be (e.g., an ID card, a driver’s license, or some details of the life of the person you claim to be). It is important that the proof of your claimed identity is uniquely connected to you (e.g., a photograph of your face, a fingerprint, or something else that identifies you uniquely). In the liquor shop example, this

means that you can prove that you really are who you claimed to be by show-

ing a driver’s license that contains a photograph of you. Comparing your face

with the face shown on the photograph on the driver’s license accomplishes

the verification. If you look like the person in the photograph of the driver’s

license, the authentication is successful. Otherwise, the authentication fails.

Double checking one’s face with the photograph on the driver’s license aims

to prevent someone from using someone else’s driver’s license.

Authorization

Authorization means granting access to specific resources or services due

to the characteristics or properties of one’s identity1\. Authorization is the consequence of both a successful authentication and evaluation of one’s

characteristics or rights. In the liquor shop example, authorization means to

decide whether you are allowed to buy a bottle of wine based on the date

of birth shown on your driver’s license. The shop assistant will refuse to sell

you a bottle of wine if you are too young based on the date of birth shown

1Van Tilborg, Henk, and Sushil Jajodia, eds. *Encyclopedia of cryptography and security*. New York: Springer Science & Business Media, 2014\.

![](img/index-51_1.png)

44

***Step 6 | Understanding the Nature of Ownership***

on your driver’s license. Note that in this case the refusal is not due to a failed authentication. Identification and authentication worked well, and because of

the correct identification, the shop assistant can identify you as an underage

人。因此，授权总是根据先前经过身份验证的身份的特征或属性与某些规则进行评估的结果。

■ **注意**：身份验证意味着声称成为某人。认证意味着证明你真的是你声称的人。授权意味着由于先前经过身份验证的身份而获得对某物的访问权限。

台账的目的和属性

图 6-2 说明了所有权的证明和所有权的转移如何与台账的目的和属性相关。

**图 6-2**。台账的概念和原则

***区块链基础知识***

45

从图 6-2 的主要教训是台账存在的事实。

履行两种对立角色。一方面，台账作为一种手段

依赖于阅读台账中保存的历史数据。

另一方面，台账必须记录所有权的任何转移，

这意味着新数据产生并写入台账。

这两个目的中最重要的不同之一可以被总结为透明性和隐私的对立性质。

在透明和隐私的对立性质中总结出来。

当台账对任何人都是开放的时，证明所有权会更容易。因此，转-

透明性是证明所有权权利的基础，类似于证人

在法庭上作证。然而，所有权转移必须是

专门限制为合法所有者。因此隐私构成了转-

转移所有权。由于写入台账意味着改变所有权，只有

应该给予写入台账的权力的很多可信实体。

透明与隐私的对立力量，证明所有权与转-

转移所有权，以及阅读台账与写入台账也可以

在区块链中找到。结果表明，区块链是一个巨大的分布-

由对等分布式台账结构共享的数据。

每个人。

所有权和区块链

以政府监管的台账形式作为关键来澄清

有价值物品的所有权。但是如果这样的台账受损或

被销毁？或者如果负责更新台账的人

出现错误或故意伪造？在这种情况下，台账不会

反映现实。这是灾难性的，因为每个人都相信台账

代表事实，类似于法庭中的证人。

只有一个台账作为澄清所有权的来源的问题

可以通过与法庭审判解决。立基于

只有一个单一证人的证词作为对所有权澄清的唯一来源的问题是有风险的，因为这个证人可能不诚实。拥有更多的证人更好。越独立

被询问的证人越高，那些被问到的事实的几率就越高

大多数证词中一贯提到的认证反映了事实。

这一事实可以通过统计数据和大数定律来证明。

有许多独立进行观察的证人

相互影响是找到真理的关键。

将这一发现应用于使用分类帐澄清所有权是直接的：不仅维护单一的可以伪造的分类帐，

应该利用纯粹的分布式点对点分类帐系统

在该现实版本上澄清有关所有权的请求

多数同行的意见一致。

46

***第 6 步|理解所有权的本质***

这时你可能想知道这一切与什么有关

区块链。分类帐管理所有权与

区块链总结为：

•个别分类帐用于维护信息

关于所有权，这相当于一个区块链数据-

存储与所有权相关的数据的结构。

•个别分类帐存储在计算机上

（节点）的点对点系统。

•区块链算法负责让

个别节点共同达成一致的版本

状态的表述，该最终判决

是基础。

•此系统的完整性在于其能够真实的状态-

对所有权的声明。

•加密是必要的，以创建一个值得信赖的

用于身份识别，认证和授权

并确保数据安全。

展望

这一步突出了所有权的重要特征以及它们

与分类帐的属性相关。此外，该步骤勾画了如何

区块链涉及所有权和分类帐。下一步将讨论一个

分布式纯粹管理所有权的重要后果

点对点分类帐系统。

总结

•拥有权的证明有三个要素：

•所有者的识别

•被拥有物的识别

•将所有者映射到对象

•身份证，出生证明和驾驶执照以及

序列号，生产日期，生产证书，

或详细的对象描述可用于

标识所有者和对象。

***区块链基础知识***

47

• 所有者和对象之间的映射可以主要-

维护在分类帐中，其扮演与证人同等作用

在一次试验中。

•只有一个分类帐是有风险的，因为它可以被损坏，

被销毁或伪造。在这种情况下，分类帐不再

一个值得信赖的来源来澄清所有权。

•可以利用一个

用于记录所有者-

船以及澄清有关所有权的请求。

多数分类帐上的现实版本

gers 同意。

•可以创建一个纯粹的点对点分布式

通过使用区块链数据结构的分类帐系统。

每个区块链数据结构代表一个分类帐

并由系统的一个节点维护。该区块-

链算法负责让个别

节点集体达成一致的版本

所有权状态。使用加密实现

辨识，认证和授权。

•纯粹分布式点对点系统的完整性

分类帐的完整性在于其能够做出真实的声明

关于所有权和确保只有合法的

所有者可以将他或她的财产权转移给他人。

**S T E P**

7

消费

两倍的钱

开发分布式系统的漏洞

点对点系统

在上一步中，您了解了纯粹分布的关系

分布式的点对点系统和区块链的最突出的用例

作为管理所有权的手段。您还了解到了

分布式点对点系统的分类帐发现它能够做出真实的

有关所有权的声明，以确保只有合法所有者能够

将他或她的财产权转让给他人。但这种陈述是什么意思

在现实生活中意味着什么？如果完整性受到侵犯会发生什么？本步骤考虑

这些问题的更详细信息。特别是，此步骤介绍了其中一个

在分布式对点对系统中违反完整性的最重要的例子

系统：双花问题。

隐喻

在任何国家伪造银行票据都是严重犯罪，因为它违反了

通过创造购买力来确定经济的基础和运转

未得到有价值资源支持的权力。因此，大多数银行

© Daniel Drescher 2017

D. Drescher，*区块链基础*，DOI 10.1007/978-1-4842-2604-9_7

50

***步骤 7 | 花两次钱***

笔记装有防伪功能，使得无法伪造

或者至少成本昂贵。这些安全功能，如唯一的数字

编号，防伪钞票的荧光纤维，物理银行纸币效果很好

和其他物理商品。但如果货币或商品变成了数字

并在分布式点对点系统的分类帐中管理？这一步

解释了分布式点对点系统的特定漏洞，用于

管理所有权等同于伪造银行票据。事实证明

出来，这种漏洞是违反系统完整性的一个显著例子。

双重花费问题

让我们考虑一个点对点系统来管理房地产所有权。在

对于这样的系统，跟踪所有权信息的分类帐是主要的-

个该系统的成员的个人计算机而不是维护在

在中央数据库中。因此，每个对等方都维护他或她自己的副本

分类帐。一旦房屋所有权从一个人转移到另一个人

到另一个，系统的所有分类帐都需要更新才能够

保持最新现实的版本。然而，在成员之间传递信息

对等方和更新个人分类帐需要时间。直到最后一个成员

系统的成员收到新信息并更新他或她的副本

分类帐，系统将不一致。有些对等体已经知道了

最新的所有权转移，而其他节点还没有收到该

信息。事实上，不是所有的分类账都有最新的信息，这使得

使他们容易受到已经拥有最新信息的任何人的利用

我们还可以想象以下情况。A 卖掉他的房子给 B。

从 A 到 B 的所有权转移在其中一个分类账中有记录

点对点系统。这个特定的分类账需要通知其他节点

关于此转移的信息，然后转告其他节点，直到最终所有节点都知道了房屋所有权从 A 到 B 的转移。但是，假设

A 迅速接近系统的另一个分类账，并要求

记录相同房屋的不同所有权转移：出售

从 A 到 C。如果这个节点尚未了解这个转移

从 A 到 B 的所有权转移发生在过去，这个节点将批准

并记录房屋所有权从 A 转移到 C 的过程。

因此，A 能够通过利用分布式特性将房屋卖两次

卖的第一件商品需要时间。但是 B 和 C 不能拥有

在同一时间卖掉房子。他们中只有一个应该是新的和合法的

广告的问题。

***区块链基础***

51

这个术语

与术语*区块链*类似，术语*双花*是模棱两可的，因为它用来指代以下概念：

•由复制数字商品引起的问题

•分布式点对点系统可能出现的问题

分类账系统

•在纯粹的分布式中违反完整性的一个例子

点对点系统

双花问题作为复制数字

商品

在复制数字商品的情境中，双花问题指的是

计算机上的数据可以在不明显受限制的情况下被复制的事实。

这个事实导致了数字货币或任何其他数据出现问题

所有者在一定时间内只能拥有一块。复制使得它可能变得

复制代表数字货币的数据并多次使用它们将使该货币无效

一次用于付款。这相当于数字化的复制银行

使用复印机复制。除了技术上是可能的，复制

数字货币违反了货币的核心原则：相同的部分

的资金不能同时给不同的人。这个能力

复制和花费数字货币多次会使货币无用

因此，双花问题。

双重支出作为分布式问题

分布式分类账的点对点系统

当用于描述分布式点对点系统的问题时

分类账，双花问题指的是转发信息

诸如此类的系统的所有元素需要时间，因此并非所有节点都有

同时具有相同的所有权信息。因为不是所有的节点都有

最新信息，他们很容易被已经拥有最新信息的任何人所利用

有最新的信息。因此，一个人可能能够转移所有权

多次，导致双重支付。

52

***第 7 步|花钱两次***

双重支付作为违反完整性的一个例子

在分布式对等系统中解决双重支付问题

分布对等系统的使用并不局限于管理

拥有权。然而，在节点之间转发信息的问题和

更新系统成员维护的数据保持不变，

不管特定的应用领域如何。因此，从更抽象的角度来看，

双重支付问题可以被视为一个维护数据的问题

分布式对等系统中的数据一致性。因为数据一致性是一个

系统完整性的方面，可以说双重支付问题是

一个违反系统完整性的具体示例。

如何解决双重支付问题

因为双重支付可能有不同的含义，所以没有一种单一的方式

阻止它。相反，可能存在许多不同的解决方案。在下面的部分

描述其中一些。

解决双重支付作为复制问题

数字商品

花费数字货币或任何其他数字资产多于

只需通过复制数据一次，实际上是与性质有关的问题

所有权。任何接受的映射数据的方法，代表数字商品

对其所有者将解决这个问题，无论其具体的实施

。即使是物理中心的账本或者（更现实地）电子分类账，无论其架构（集中式或对等式），都可以确保

数字商品只能花费一次，只要分类账在所有

时间。

解决双重支付作为一个复制问题

分布式对等系统的分类账

在这种情况下，系统的体系结构以及系统的应用领域都被指定了

给出。分类账的分布对等系统通常被视为

作为推导区块链的经典例子。在所提供的解释中

[第 6 步突出了区块链与分布式对等系统的](http://dx.doi.org/10.1007/978-1-4842-2604-9_6)分类账之间的关系。因此，区块链，在整个术语中的使用

本书中，可以看作是解决分布式对等系统中的双重支付问题的一个解决方案

分布式对等系统的分类账。

***区块链基础知识***

53

解决双重支付作为违反的一个例子

分布式对等系统中的完整性

在这种情况下，系统的体系结构被指定，但应用领域未指定。因此，此级别的解决方案侧重于在分布式对等系统中实现和保持完整性，而不考虑其

具体用法。然而，分布式对等式的具体使用

系统决定了完整性的含义。例如，一个简单的文件共享

应用程序可能考虑定义完整性的不同方面

到一个管理数字货币所有权的系统。因此，问题

区块链技术套件是否是实现和的正确工具的问题

维护系统完整性的问题没有知识

特定的应用目标。因此，在分布式对等系统的特定应用领域，可能有其他技术、数据结构，

和算法更适合实现和保持完整性。

■ **备注** 双重支付问题是分布式对等系统中破坏完整性的一个突出例子，而区块链技术套件是解决这个问题的工具。

本书中双重支付的使用

在本书中，术语*双重支付*用于指代分布式对等系统分类帐中可能出现的漏洞。

展望

在这一步中，解释了双重支付的概念，并强调了

区块链来实现纯粹分布式对等系统的完整性。

接下来的步骤重点介绍区块链如何实现和保持完整性。

总结

• 术语*双重支付*是模棱两可的；它有不同的

意思。

• 双重支付可以指：

• 由于复制数字商品而引起的问题

54

***步骤 7 | 两次支付***

• 分布式对等网络中可能出现的问题

分类帐系统

• 在分布式中违反完整性的一个例子

对等系统

• 在本书中，术语双重支付用于指代

纯粹分布式对等系统的漏洞

分类帐

• 区块链是解决双重支付问题的手段

问题。

**S T A G E**

III

怎样

区块链

作品

这个学习阶段是本书的核心，因为它解释了如何

区块链在内部是如何工作的。本阶段的 14 个学习步骤将指导你

通过所有的区块链概念及其基础技术。

在本阶段结束时，你将对区块链的所有主要概念有一个坚实的理解，以及它们如何在孤立状态下工作，以及它们如何

相互作用，从而创建所谓的区块链的大型机械。

**S T E P**

8

规划

区块链

使用

区块链

前面的步骤揭示了信任、完整性、纯粹的 dis-之间的关系

分布式对等系统、区块链。因此，现在您已经拥有

对区块链是什么，为什么需要以及什么

它解决的问题。但是，您仍然不知道区块链是如何工作的

在内部。此步骤提供了区块链如何工作的第一印象

通过阐述将指导您通过的一般应用场景来解释

后续步骤。它还突出了设计区块链的主要任务

用于管理所有权并提供其主要概念的概述。此

步骤作为接下来将讨论的步骤的起点

详细介绍了构成区块链的概念和技术。

目标

目标在于理解构成区块链的概念。

出于教学目的，我将呈现设计自己的系统的挑战-

管理所有权的方法。因此，您将面临相同的挑战

© Daniel Drescher 2017

D. Drescher，*区块链基础*，DOI 10.1007/978-1-4842-2604-9_8

58

***第 8 步 | 规划区块链***

区块链的发明者曾经面对并成功解决的挑战：设计

一款软件，通过纯粹的分布式对等方式管理所有权

在完全开放和不可信的对等分类账系统中运转的对等系统

环境。

起始点

作为起点，需要关注的系统主要信息

可以总结为以下内容：

• 系统将是纯粹的分布式对等系统，

由贡献的计算资源组成

由其用户。

• 对等系统将互联网用作网络

用于连接各个节点。

• 无论节点数量还是它们的可信度

和可靠性是已知的。

• 对等系统的目标是管理

数字商品的所有权（例如，销售奖励积分或

数字货币）。

跟随的路径

在设计时需要解决的七个主要任务，以及

开发一个通过纯粹的方式管理所有权的软件系统

在开放和不可信的分类账上的分布式对等系统

环境：

• 描述所有权

• 保护所有权

• 存储交易数据

• 准备让账本在不可信的地方分布

环境

• 分发分类账

• 向账本添加新交易

• 决定哪些账本代表真相

***区块链基础***

59

任务 1：描述所有权

在开始开发区块链之前，你需要问问自己，为什么

您想用它做什么。由于您将要设计一个软件系统

管理所有权，您必须首先决定如何描述所有权。它

原来交易是描述所有权转移的好方法，并且交易的完整历史是识别当前的关键

所有者。因此，**第 9 步将解释交易，**它们是什么，您如何描述它们，以及您如何使用它们来澄清所有权。

任务 2：保护所有权

通过交易描述所有权只是一个起点。此外，您需要一种方法阻止他人访问他人的财产。在

在现实生活中，您可以轻松地阻止他人使用您的汽车或进入

通过使用带锁的门管理您的房屋。事实证明，加密提供了

保护交易在个体水平上，类似于门的方式

用锁来保护您的个人汽车或房屋。

保护所有权有三个主要元素：识别和认证

所有者以及限制对其所有者财产的访问。**第 12 步**和

[13](http://dx.doi.org/10.1007/978-1-4842-2604-9_13)将更详细地解释这些概念。然而，这些步骤依赖于哈希值的概念。如果您从未听说过哈希值

不必担心。 我花了[第 10 步](http://dx.doi.org/10.1007/978-1-4842-2604-9_10)和[第 11 步来解释哈希值](http://dx.doi.org/10.1007/978-1-4842-2604-9_11)。

详细解释。这两个步骤还将为已经具有技术背景或了解哈希值的人提供有趣的见解。

任务 3: 存储交易数据

通过交易来描述所有权，并采取安全措施

保护所有权在个别交易层面非常重要

朝着设计一个管理所有权的软件系统的目标迈出的一步。

但是，您需要一种方式来存储所有交易的完整历史记录，因为这

历史用于澄清所有权。由于交易历史是核心

诚信在澄清所有权中起着关键作用，它必须以安全的方式存储。结果

发现区块链数据结构是数字等价物到账簿。

[第 14 步](http://dx.doi.org/10.1007/978-1-4842-2604-9_14)和[第 15 步](http://dx.doi.org/10.1007/978-1-4842-2604-9_15)解释了区块链数据结构必须满足的数字账簿服务要求以及它是如何实现的。

60

***第 8 步 | 规划区块链***

任务 4: 准备分布式账簿

不可信环境

拥有一个孤立的账簿或包含交易数据的区块链数据结构

数据非常好，但你的目标是设计一个能在不可信环境中操作的分布式点对点账簿系统。因此，您将

记载着不值得信赖节点上非值得信赖地

值得信赖的网络。此外，您将把账簿的控制权

到整个网络，而没有任何中央控制点或协调

国家。您应该如何防止账簿被伪造或篡改

（例如，从历史中删除交易或添加非法交易

对吗？事实证明，阻止交易历史被修改的最好方法是

被更改是使它不可改变。这意味着账簿和这里-

在此之前交易历史一旦写入便不能更改。因此，

您不必担心账簿会被篡改或伪造

因为它们首先无法更改。然而，拥有一个分布式

不能被改变的分布式点对点账簿系统听起来像是一个

非常安全但相当无用，因为它不允许您添加新的

交易。因此，区块链数据结构的挑战是

不可更改，一方面，另一方面可以接受新的交易被添加

另一方面。这听起来像是一个矛盾，但事实证明，这是通过一个技术窍门来实现的，这在[第 16 步](http://dx.doi.org/10.1007/978-1-4842-2604-9_16)中有解释。

结果是一个仅追加的区块链数据结构：可以按顺序添加新数据。

添加新的交易很容易，但是几乎不可能更改已经存在的数据。

在过去添加过。

任务 5：分发分类账

一旦分类帐是只追加的，你可以创建一个分布式对等系统

通过向每个要求的人提供副本来制作分类账的系统

对此。但是，仅提供仅追加的分类帐副本并不足够

你的目标。管理所有权的分布式系统涉及互动

他们之间的互动。因此，第[17](http://dx.doi.org/10.1007/978-1-4842-2604-9_17)步解释了系统中节点是如何互动的，以及传递了什么信息

在他们之间交换。

任务 6：将新交易添加到分类帐

分布式对等系统将由计算能力强大的成员组成

保持独立副本的追加式区块链数据结构。

由于数据结构允许您添加新的交易数据，因此您将

必须确保只有有效和授权的交易被添加。结果是

发现通过允许对等系统的所有成员

***区块链基础知识***

61

添加新数据，同时将对等系统中的每个成员转变为监督员。

通过使系统中的所有成员成为同行者的监督者来将

互相指出彼此的任何错误。第[18](http://dx.doi.org/10.1007/978-1-4842-2604-9_18)步对这种方法进行了更详细的解释，同时还解释了给予同行者的激励

履行他们的角色。

任务 7：决定哪些分类帐代表

真相

一旦新交易可以添加到对等系统中的个人分类账中

在对等系统中，遇到了一个典型的问题，这对于任何分布式系统来说都是典型的。

对等系统：不同的同行者可能收到不同的交易

很快，由他们维护的交易历史开始有所不同。因此，不同-

交易历史的不同版本可能存在于对等系统中。

由于交易历史是识别合法所有者的基础，具有不同的冲突交易历史对系统的完整性构成严重威胁。因此，找到一种方法来阻止不同交易历史的出现或找到一种方法非常重要

决定哪个交易历史代表真相。由于

纯粹的分布式对等系统的性质，前一种方法是不可能的。

结果，你需要一个标准来找到和选择一项交易

代表真相的历史。但是还有另一个问题：没有

在一个纯粹的分布式对等系统中，无法宣布

必须选择哪个交易历史。事实证明，可以解决

通过使对等系统中的每个节点决定自己的方式来解决这个问题。

拥有哪个交易历史代表真相，方式是由大多数人自己决定

各自的同行独立地同意该决定。事实证明

区块链让您以这种方式向附加-

只有区块链数据结构已经包含了这个问题的解决方案。

S[tep 19 详细解释了这些标准和](http://dx.doi.org/10.1007/978-1-4842-2604-9_19)它们的使用方法。

展望

这一步确认了提供挑战性智力旅程的 7 个任务，了解构成区块链的概念。一旦你完成了这些

任务，您将达到巅峰：理解区块链。[第 21 步](http://dx.doi.org/10.1007/978-1-4842-2604-9_21)

这是您将所有这些概念整合在一起并享受的时刻

这种学习努力的结果。步骤[21](http://dx.doi.org/10.1007/978-1-4842-2604-9_21)将是一个像这样的概述章节，但它将利用您在

同时。

62

***步骤 8 | 筹划区块链***

摘要

• 为了设计一个纯粹的分布式点对点

管理所有权的分类账系统，必须

地址以下任务：

• 描述所有权

• 保护所有权免受未经授权的访问

• 存储交易数据

• 准备分布在

不可信任的环境

• 形成分布式分类账系统

• 向分类账添加和验证新交易

• 决定哪些分类账代表真相

• 上述任务将在以下地址

12 步骤中获得的技术知识。

**S T E P**

8

记录

所有权

以历史作为证据来证明

当前所有权状态

这一步考虑了以对纯粹的分布式点对点分类账系统有用的方式描述所有权的任务。这一步解释了

区块链记录所有权并处理所有权的转移。

此外，此步骤指出了在记录顺序时的重要性

所述所有权的转移。最后，这一步强调了

交易数据的完整性对整个系统的完整性至关重要。

隐喻

接力赛是团队间的跑步比赛，每个团队成员

仅涵盖了总距离的一部分。在比赛期间，每名跑步者必须

将特定物品，即所谓的接力棒，交接给下一个跑者，以

赛道上标记的特定区域，在比赛期间，只有一名

比赛团队的成员携带接力棒。为了确定哪个

给定团队的成员目前携带着接力棒，这是足够的

知道接力棒最后交接给了团队中的哪个人。

© 丹尼尔·德雷舍尔 2017

D. Drescher，*区块链基础*，DOI 10.1007/978-1-4842-2604-9_9

64

***步骤 9 | 记录所有权***

为了跟踪任何给定时间执棒的人，需要

记录每次接力和涉及的运动员的时间。这

步骤解释了区块链如何以类似的方式处理所有权

如同接力比赛使用接力棒的方式。

目标

目标是以透明和全面的方式记录所有权。

可理解的方式。任何阅读这些文档的人都应该能够做出

关于商品与其所有者的清楚关联的说法。

所有者。

挑战

挑战是找到不仅仅声称某人是某样东西的所有者的所有权文档

某人是某样东西的所有者，而且提供了所有权的证据

因此成为了所有权的证明。

这个想法

相比于通过清单数据（即列出所有所有者当前财产）描述所有权的当前状态，人们以持续不断的方式在分类账中维护所有权转移的列表。每一次所有权转移的数据都解释并因此证实了所有权。

由清单数据清楚指明哪个所有者在何时向谁移交了所有权

关于拥有什么物品以及在何时向谁的手中移交的所有权。整个历史

存储在分类账中的交易数据成为提供了审计迹象的审核追踪。

每个人如何拥有他或她的财产的证据。这相当于跟踪接力比赛中每次接力棒的移交，这使得每个人

以便以后重构整场比赛。

关于清单和交易的一个简短的绕路

数据

描述所有权的两种竞争方式—通过清单

数据或交易数据。*清单数据*描述所有权的当前状态。它们类似于只显示

当前可用的资金。*交易数据*描述所有权的转移。它们类似于列出每一笔

1 纳卡莫托，萨托希。比特币：点对点电子现金系统（2008）。

***区块链基础知识***

65

取款，存款和转移的金钱。可以从清单数据推导出

通过对交易数据进行聚合。除了清单数据和

交易数据描述所有权，它们的基本理念有所不同

发生了戏剧性的变化。清单数据只是陈述或声称拥有权，而交易

然而，清单数据通常是

被认为更方便，因为它们立即陈述了互相之间的事实
