- en: © The Author(s), under exclusive license to APress Media, LLC, part of Springer
    Nature 2022D. P. BauerGetting Started with Ethereum [https://doi.org/10.1007/978-1-4842-8045-4_8](https://doi.org/10.1007/978-1-4842-8045-4_8)
  prefs: []
  type: TYPE_NORMAL
- en: 8. Filecoin
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Davi Pedro Bauer^([1](#Aff2)  )(1)Campo Bom, Rio Grande do Sul, Brazil
  prefs: []
  type: TYPE_NORMAL
- en: Protocol Labs, the same company that invented and maintains IPFS, created Filecoin.
    It expands the IPFS concept by establishing an open source decentralized storage
    network and incentivizes users to keep data pinned to IPFS.
  prefs: []
  type: TYPE_NORMAL
- en: Filecoin is great because it offers a decentralized storage solution that does
    not require reliance on bigger centralized storage solutions. Unlike pure IPFS-based
    solutions, Filecoin nodes have financial incentives to stay active.
  prefs: []
  type: TYPE_NORMAL
- en: We will use a Filecoin implementation named Lotus in this example. It verifies
    network transactions, manages an FIL wallet, and can execute storage and retrieval
    deals.
  prefs: []
  type: TYPE_NORMAL
- en: 'At the end of this chapter, you will be able to do the following:'
  prefs: []
  type: TYPE_NORMAL
- en: Create a Filecoin project
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Configure Truffle to use Filecoin endpoints
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Start the local Filecoin server
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Add images to be preserved on Filecoin
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: How to Preserve Files on the Filecoin Local Node
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: To preserve files in Filecoin, you will learn how to create a project from scratch
    and configure Truffle so that it points to the correct address. You will start
    the local endpoints and finally add an image to Filecoin using the command line.
  prefs: []
  type: TYPE_NORMAL
- en: Creating the Project
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Go to the terminal and click New Terminal. Now, create a new folder to start
    your project.$ mkdir create filecoin
  prefs: []
  type: TYPE_NORMAL
- en: Configuring Truffle
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'Create the truffle-config.js file.$ touch truffle-config.jsIn this file, configure
    the file setting for the IPFS and Filecoin lotus servers. Set the following values:'
  prefs: []
  type: TYPE_NORMAL
- en: Set the IPFS address to http://127.0.0.1:5001.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Set the Filecoin address to http://localhost:7777/rpc/v0.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'You will use Ganache Filecoin to start these endpoints later.module.exports
    = {  environments: {    development: {      ipfs: {        address: "http://127.0.0.1:5001",      },      filecoin:
    {        address: "http://localhost:7777/rpc/v0",        storageDealOptions: {          epochPrice:
    "2500",          duration: 518400,        }      },    }  }};'
  prefs: []
  type: TYPE_NORMAL
- en: Adding an Image to Be Preserved
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Create the badge folder.$ mkdir badgeGo to the badge root folder.$ cd badgeDownload
    the image that you will use to preserve on Filecoin. You can also copy and paste
    an existing image in this folder. The curl command is used for transferring data
    with a URL syntax.$ curl https://planouhost.z15.web.core.windows.net/badge.png
    > badge-image.png
  prefs: []
  type: TYPE_NORMAL
- en: Installing Dependencies
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Install the base Ganache package with a Filecoin tag.$ npm install ganache@filecoinInstall
    the Filecoin peer dependency package.$ npm install @ganache/filecoin
  prefs: []
  type: TYPE_NORMAL
- en: Start the Lotus and IPFS local servers using Ganache. It also creates 10 development
    accounts with 100 Filecoins (FIL) each.
  prefs: []
  type: TYPE_NORMAL
- en: Starting Local Endpoints
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Start Ganache Filecoin locally.$ npx ganache filecoin
  prefs: []
  type: TYPE_NORMAL
- en: Preserving Files to Filecoin
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'Open a new terminal and preserve the folder badge.$ truffle preserve ./badge/
    --filecoinIf everything went well, the output will be as follows:Preserving target:
    ./badge/===========================Warning: multiple plugins found that output
    the label "ipfs-cid".  ✓ Loading target...    ✓ Reading directory ./badge/...      ✓
    Opening ./badge\badge-image.png...  ✓ Preserving to IPFS...    ✓ Connected to
    IPFS node at http://127.0.0.1:5001    ✓ Uploading...      Root CID: QmNjGGACAMpm718WjeM7oN3WJ5ntXKgwurH4mMivU6JXoS        ./badge-image.png:
    QmemrBxhPpg8Hw9sPpAUTWRq3kNAFhCPKUDhMnc5U9KptS  ✓ Preserving to Filecoin...    ✓
    Connected to Filecoin node at http://localhost:7777/rpc/v0    ✓ Retrieving miners...    ✓
    Proposing storage deal...      Deal CID: bafyreidrt2pvuh44umo7vzebnxnw46qzntneyojah6oym4ximokyzvwxgq    ✓
    Waiting for deal to finish...      Deal State: StorageDealActive'
  prefs: []
  type: TYPE_NORMAL
- en: Now you have the image preserved in your local Filecoin node!
  prefs: []
  type: TYPE_NORMAL
- en: Summary
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: In this chapter, you learned how to preserve files using Filecoin.
  prefs: []
  type: TYPE_NORMAL
- en: In the next chapter, you will learn what ENS is and how to use it.
  prefs: []
  type: TYPE_NORMAL
