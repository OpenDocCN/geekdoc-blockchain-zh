# 第一章 区块链技术：架构、共识协议和应用

Himani MittalGoswami Ganesh Dutta Sanatan Dharma College, Chandigarh, India

#### 摘要

区块链技术是交易数据库。它是不可变的、分布式的、透明的和安全的。区块链技术是一项潜力巨大的新兴技术。本章讨论了区块链的组成部分及其应用。区块链的组成部分包括区块、链表、链、创世区块和共识协议。区块是单个交易。区块链是通过哈希加密链接的区块集合。区块链上的每个用户都有一个专用链。共识协议定义了将交易添加到区块链的机制。共识协议的设计强调了其适应性，以抵御网络攻击并实现快速数据库更新。本章包括的一些共识协议是工作量证明、股权证明和经过的时间证明。区块链的几个应用领域包括物联网、云计算、医疗保健、药物、存储和教育。智能城市发展和金融应用是其他使用领域。

关键词：区块链、分布式账本、共识协议、去中心化数据库、区块链应用、

## 1.1 介绍

区块链技术通过加密货币的引入而在研究界变得流行起来。2008 年，名为 Satoshi Nakamoto 的作者发表了一篇题为“比特币：点对点电子现金系统”的论文。该章描述了一种点对点（P2P）电子现金系统，其中支付直接从一方转移到另一方，而不涉及任何银行或第三方（监管机构）。这些类型的现金系统被称为加密货币。加密货币利用密码学来保护交易，因此得名。此加密货币基于区块链技术。

区块链是交易的数字记录或交易数据库。其名称来源于其结构，其中个体记录称为区块，它们被链接在一起形成一个链表。区块链是一个分布式账本，确保不可变性、透明性和安全性。

+   不可变性意味着一旦保存的数据就无法更改。

+   分布式意味着没有单个所有者控制区块链数据库。它分布在参与者网络中。

+   透明性意味着数据库发生的任何变化对所有参与者都是可见的。这可能会引起安全问题，但区块链是透明的，同时也是安全的，并且隐藏了参与者之间的身份。

这些特性使区块链成为一个充满活跃实现的开放研究领域。基于区块链技术的应用领域潜力无限[1, 2]。

本章的组织如下：第 1.2 节 包括了区块链的架构。共识协议在 第 1.3 节 进行讨论。当前区块链应用在 第 1.4 节 进行了讨论，而第 1.5 节 总结了本章。

## 1.2 区块链架构

区块链包括以下组件：区块、区块链、哈希加密、不可变账本、分布式 P2P 网络和共识协议。这些组件显示在 图 1.1 中。详情如下。

### 1.2.1 区块

区块链数据库的最基本单位是区块。它包含要存储的交易。图 1.1 显示了区块的结构。它由区块编号、随机数、数据、前一哈希值和哈希值组成。区块编号是由创建区块的用户分配的唯一编号。随机数是由创建区块的矿工算法挖掘出的特殊值。这个值的计算也称为谜题求解。前一哈希值是前一个区块的加密。哈希值是使用 SHA-256 算法对随机数、前一哈希值和数据的组合计算得到的。

![](img/b_9783110702507-001_fig_001.jpg)

图 1.1：区块的结构。

为了确保数据的不可变性和安全性，使用了随机数（nonce）、前一哈希值和哈希值。这个哈希值的使用是将前一个区块的哈希值存储在下一个区块中并用于新哈希值的计算。这确保了如果有人尝试更改区块链中的一个中间区块，那么所有区块的所有哈希值都必须重新计算，这是不可能的。这确保了一旦添加的数据在区块链中就不能被改变。这个特性使得区块链适用于本质上是交易性质的应用程序，以及之前的数据不应该被修改的情况。随机数用于确保为一个区块生成的哈希值具有特定的格式，如以 3 个零或 10 个零开头。

当一个区块添加到区块链网络后，它就不可变了。区块的大小限制了它可以容纳的数据量。区块链网络在创建网络时决定了区块的大小。

一般来说，当一个新用户加入区块链网络时，为用户启动了一个新的链。这个链包括了一个创世块或起始块。然后，包含用户数据的后续区块被存储在一个新的区块中，并以链表的形式附加到这个创世块上。这个创世块和所有后续区块的集合就是区块链。这些区块链的集合就是完整的数据库。

### 1.2.2 区块链

用户的创世区块创建后，所有该用户的交易都与其链接，如图 1.2 所示。创世区块中的上一个哈希为零，因为没有上一个区块。创世区块包含有关用户的数据，如名称和分配给该用户的哈希值。然后计算随机数和新的哈希。随着交易的发生，新的区块将附加到此起始区块上。但是，将区块添加到此区块链并非易事。它需要通过共识协议传递到 P2P 网络。

![](img/b_9783110702507-001_fig_002.jpg)

图 1.2：网络中的区块链。

### 1.2.3 哈希加密

区块链中使用的 SHA-256 算法是一种单向和确定性哈希计算算法。单向意味着无法从哈希重新计算原始文本。对于每个字符串，它都是唯一的，并且始终为 256 个字符长，无论数据是 1 个字符还是 100 个字符。该算法具有雪崩效应，即输入数据的微小变化将完全改变输出哈希值。因此，如果我们对“aaa”和“aaaa”进行哈希，生成的两个哈希值将完全不同。这个属性使得哈希的破解变得困难。随机数和哈希值的计算将进一步讨论[3]。

### 1.2.4 不可变分类帐

不可变意味着区块链不允许对数据进行更改。使用哈希值链接块使数据不可更改。在 P2P 网络的所有节点中分发块确保了不可更改性。

### 1.2.5 分布式对等网络

从区块链架构中可以清楚地看出，如图 1.3 所示，区块链没有单一副本。网络的每个成员都有一份副本。如果要添加新的区块，则必须将其添加到整个网络，并且需要更新所有节点。此更新由接下来讨论的共识协议确保。同意成为区块链网络的一部分并在其中拥有利益的用户可以通过添加区块来修改它。对等体的身份相互隐藏。每当对一个对等体数据库进行更改时，相同的更改通过投票传播到整个 P2P 网络。这个分布式网络遍布全球，并通过互联网或某些私有网络或云计算连接。

![](img/b_9783110702507-001_fig_003.png)

图 1.3：区块链架构。

### 1.2.6 共识协议

当节点创建一个区块后，它会将其发送到网络中的所有节点。网络是否接受或拒绝该区块取决于共识协议。共识协议在所有节点之间制定协议并决定将区块添加到网络的条件[4, 5, 6, 7]。

## 1.3 区块链共识

最初，当区块链与比特币一起出现时，使用的共识协议是[7]：权益证明（PoS）、工作量证明（PoW）和流逝时间证明（PoET）。以下将对它们进行讨论：

+   PoS 意味着您在网络中拥有的价值或商品越高，您添加的区块获得的优先级越高，您的区块被网络接受的可能性也越高。

+   PoW 意味着您能够解决的挖掘问题（nonce 计算）越多，您的区块被添加到网络的可能性就越高。

+   PoET 要求用户运行一个算法，算法的运行速度将决定用户是否是更高的利益相关者，因此有权添加区块。

+   还有一些其他共识协议，包括：存在性证明、委托权益证明、活动证明（工作量证明和权益证明的混合）、重要性证明和存储证明[4]。

+   还有其他基于投票的协议，即瑞波[6]和恒星共识协议[4，6，8]。

+   Milutinovic 讨论了另一种共识协议，即幸运证明[5]。

Baliga[7]提出了对 PoW、PoS、PoET 和拜占庭容错共识协议进行比较研究。共识协议很重要，因为它决定了“区块链网络的安全性如何？”和“黑客添加新区块将有多困难？”区块链网络上发生的几种类型的攻击包括双花攻击、日食攻击和拜占庭攻击[9]。在区块链网络的多种产品中，恒星和瑞波共识协议用于应对所有类型的攻击。

## 1.4 区块链应用

区块链的一些应用包括：

+   物联网（IoT）和云计算[10]：IoT 数据具有高度事务性，适合使用区块链。区块链使得 IoT 数据安全、不可变，并且仅提供给授权用户使用。

+   存储应用[11]：区块链适用于永久数据，如病人健康记录、投票系统和数字身份验证。

+   加密通信方法[11]：在社交网络、预测市场和艺术领域都非常有用。

+   教育[12]：在维护学习内容和学习成果方面非常有用。用于存储学术证书和奖项。

+   医疗保健[13]：它可以用于医学、基因组学、远程医疗、远程监控、电子健康、神经科学和个性化医疗应用，其中数据再次是永久的。

+   金融应用包括存储在银行系统和其他金融机构中。

+   利用基于区块链技术的物联网和云计算进行智能城市发展。

## 1.5 结论

区块链技术安全、透明、不可变、加密和去中心化。 它验证和授权用户。 它适用于数据具有永久性且安全性至关重要的应用，例如物联网、云计算、医疗保健、教育、通信和智能城市。 区块链技术是一种前景广阔的新技术。

## 参考资料

[1]Crosby，M.，Pattanayak，P.，Verma，S.，Kalyanaraman，V.（2016）。 区块链技术：超越比特币。 应用创新，2（6–10），71。 →

[2]Underwood，S.（2016）。 区块链超越比特币。 ACM 通讯，59（11），15–17。 →

[3][`tools.superdatascience.com/Blockchain/hash`](https://tools.superdatascience.com/Blockchain/hash) →

[4]Sankar，L.S.，Sindhu，M.，Sethumadhavan，M.（2017 年 1 月）。 区块链应用的共识协议调查。 在 2017 年第 4 届国际高级计算与通信系统会议（ICACCS）中，1–5。 IEEE。 a，b，c

[5]Milutinovic，M.，He，W.，Wu，H.，Kanwal，M.（2016 年 12 月）。 幸运证明：一种高效的区块链共识协议。 在第一届可信执行系统软件研讨会论文集中，1–6。 a，b

[6]Cachin，C.，Vukolić，M.（2017）。 野生区块链共识协议。 arXiv 预印本 arXiv：1707.01873。 a，b，c

[7]Baliga，A.（2017）。 理解区块链共识模型。 持续存在，2017（4），1–14。 a，b，c

[8]Mazieres，D.（2015）。 星际共识协议：互联网级共识的联邦模型。 星际发展基金会，32，1–45。 →

[9]Bissias，G.，Levine，B.N.，Pinar Ozisik，A.，Andresen，G.（2016）。 对区块链共识攻击的分析。 arXiv 预印本 arXiv：1610.07985。 →

[10]Nawawi，A.等（2019）。 2018 年 8 月会议论文集。 金融研究快报，11（2），1–6。 →

[11]Pilkington，M.（2016）。 区块链技术：原理与应用。 数字转型研究手册。 爱德华埃尔加，225（1）。 a，b

[12]Chen，G.，Xu，B.，Lu，M.，Chen，N.-S.（2018）。 探索区块链技术及其在教育中的潜在应用。 智能学习环境，5（1），1–10。 →

[13]Siyal，A.A.，Junejo，A.Z.，Zawish，M.，Ahmed，K.，Khalil，A.，Soursou，G.（2019）。 区块链技术在医学和医疗保健中的应用：挑战和未来展望。 密码学，3（1），3。 →
