- en: 'Part I: Introduction'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第一部分：简介
- en: In this first part of the book, I introduce the basic concepts of blockchain
    technology, such as trustless consensus, cryptocurrencies, and cryptoeconomics.
    For application developers and business executives, it is crucial to understand
    these concepts, as they establish a common vocabulary for further discussion.
    It is necessary for you to learn the essential features and key characteristics
    of blockchain networks in order to design and develop blockchain applications.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在这本书的第一部分，我介绍了区块链技术的基本概念，如无信任共识、加密货币和密码经济学。对于应用开发者和企业高管来说，理解这些概念至关重要，因为它们为更深入的讨论建立了一个共同的语言。为了设计和开发区块链应用，有必要学习区块链网络的基本特性和关键特征。
- en: 1. An Introduction to Blockchain
  id: totrans-2
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 1. 区块链简介
- en: The word *blockchain* started as a computer science term describing an abstract
    data structure. However, as the technology has become popular and even pervasive,
    the term has caught the imagination of many. Today, *blockchain* has many meanings
    to many people.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 术语*区块链*最初是计算机科学中描述一种抽象数据结构的术语。然而，随着这项技术的变得流行甚至无处不在，这个术语已经激发了很多人想象力。今天，*区块链*对很多人来说有多种含义。
- en: The Blockchain
  id: totrans-4
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 区块链
- en: For computer scientists, a blockchain is a series of connected data blocks.
    Each block of data can store any information, but typically it stores a set of
    *transactions*. The information inside a block is represented by a unique *hash*.
    Each block’s data content contains the hash of the block that precedes itself
    on the chain ([Figure 1.1](ch01.xhtml#ch01fig1)).
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 对于计算机科学家来说，区块链是一系列连接的数据块。每个数据块可以存储任何信息，但通常它存储一组*交易*。块内的信息用一个唯一的*哈希*表示。每个数据块的内容包含其自身链上前一个数据块的哈希值([图1.1](ch01.xhtml#ch01fig1))。
- en: '![image](Images/yuan_f01_01.jpg)'
  id: totrans-6
  prefs: []
  type: TYPE_IMG
  zh: '![image](Images/yuan_f01_01.jpg)'
- en: '**Figure 1.1** A blockchain'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: '**图1.1** 区块链'
- en: '**Note**'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: '**注意**'
- en: A cryptographic hash is a short representation of a large amount of data. It
    is extremely easy to compute. But if you only know the hash, it is extremely difficult
    to figure out the original data that produces this hash.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 密码哈希是一种大量数据的简短表示。计算起来非常简单。但如果你只知道哈希值，要找出产生这个哈希值的原数据是非常困难的。
- en: Why do we want to store data in this blockchain structure? Why can’t we just
    use a database? Well, a key feature of the blockchain is that it is hard to alter
    any data on the chain.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 为什么我们要在这个区块链结构中存储数据？为什么我们不能仅仅使用一个数据库呢？因为区块链的一个关键特性就是链上的数据很难被篡改。
- en: Imagine that you have a blockchain with 1,000 blocks. Now, someone wants to
    alter the content in block 10\. As the person alters the data, the hash of block
    10 also changes. Block 11 contains the hash of block 10, so the content in block
    11 also changes, which in turn results in a change in the hash of block 11\. This
    process propagates down the blockchain. So, to make any change in any block, you
    will end up reconstructing all the blocks that follow it. That is known as a *hard
    fork*, which creates a new blockchain that is incompatible with the existing one,
    even as they both use the identical software. In that sense, a blockchain is immutable.
    It is impossible for someone to “silently” modify the history of a blockchain.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 想象一下你有1000个区块的区块链。现在，有人想要修改第10个区块的内容。当这个人修改数据时，第10个区块的哈希值也会改变。第11个区块包含第10个区块的哈希值，所以第11个区块的内容也会改变，这反过来又导致第11个区块的哈希值改变。这个过程沿着区块链传播。所以，要修改任何一个区块，你最终将需要重建跟随它的所有区块。这被称为一个*硬分叉*，它创建了一个与现有区块链不兼容的新区块链，即使它们都使用相同的软件。从这个意义上说，区块链是不可变的。不可能有人“悄悄地”修改区块链的历史。
- en: As you can see here, the longer the blockchain, the more stable it becomes.
    When you do transactions on the Bitcoin network, you will often hear that your
    transaction is securely “confirmed” after six or more blocks (about an hour, as
    the Bitcoin network creates one block every ten minutes). After six blocks, it
    is unlikely for an alternative blockchain fork to emerge and gain acceptance by
    the community. So, it is essentially certain that your transaction has been recorded
    as part of the permanent history.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 正如你所看到的，区块链越长，就越稳定。当你在比特币网络上进行交易时，你经常会听到你的交易在六七个区块后被“安全确认”（大约一个小时，因为比特币网络每十分钟创建一个区块）。六个区块之后，出现一个替代的区块链分叉并获得社区接受的可能性很小。所以，可以基本上确定，你的交易已经作为永久历史的一部分被记录下来。
- en: While you can store any data in a blockchain, the most common use case of the
    blockchain is to store transaction records. That makes sense since the historic
    accuracy and validity of monetary transactions are critical. In practice, blockchains
    are used as digital ledgers to record transactions.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然你可以在区块链中存储任何数据，但区块链最常用的用例是存储交易记录。这是有道理的，因为货币交易的历史准确性和有效性至关重要。实际上，区块链被用作数字账本来记录交易。
- en: The Collaborative Ledger
  id: totrans-14
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 协作账本
- en: Now, a database can also record (or *journal*) change histories. People have
    used spreadsheets or databases as transactional ledgers since the invention of
    the personal computer. The ledger itself is neither complicated nor a significant
    value-add.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，数据库也可以记录（或*日志*）变更历史。自从个人电脑发明以来，人们就已经将电子表格或数据库作为交易账本使用了。账本本身既不复杂也不是显著的价值增加。
- en: 'The question remains: why do we need to bother with a new, more computationally
    intensive data structure like the blockchain? The answer lies in the second key
    feature of the blockchain: It is easy to organize a collaborative network around
    the blockchain.'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 问题依旧存在：我们为何要费心去使用一种新的、计算密集度更高的数据结构，比如区块链？答案在于区块链的第二个关键特性：围绕区块链组织协作网络是一件容易的事。
- en: Since each block is added to the chain individually, we can design a network
    where one or more parties propose the next block, and then all network nodes (i.e.,
    participating computers on the network) can validate the proposed block and reach
    a consensus on whether it should be appended to the blockchain. If a proposed
    block is deemed invalid by most network participants, the blockchain can abandon
    it or even punish its proposers. For more technical details on blockchain consensus,
    please see [Chapter 2](ch02.xhtml#ch02).
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 由于每个区块是逐个添加到链中的，我们可以设计一个网络，在这个网络中，一个或多个参与方提出下一个区块，然后所有网络节点（即网络上的参与计算机）可以验证提出的区块，并达成共识，决定是否应将其添加到区块链中。如果大多数网络参与者认为一个提出的区块是无效的，区块链可以放弃它，甚至惩罚其提出者。关于区块链共识的技术细节，请参见[第二章](ch02.xhtml#ch02)。
- en: The rule for validation depends on the specific blockchain. For example, the
    Bitcoin blockchain miners examine the cryptographic signatures and account balances
    for each transaction recorded in the block for its validity.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 验证规则依赖于具体的区块链。例如，比特币的区块链矿工检查记录在区块中的每个交易的加密签名和账户余额以确定其有效性。
- en: By doing so, the blockchain becomes a collaborative ledger.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 这样做，区块链就变成了一个协作账本。
- en: Cryptocurrency
  id: totrans-20
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 加密货币
- en: The ledger records the movement of some currency. A major innovation is the
    realization that the blockchain can define its own “currency” to transact. It
    is called *cryptocurrency* because the validity of such currency is ensured by
    cryptography used in blockchain networks. For example, each transaction of such
    currency is digital signed to make sure it is authentic and unique. The cryptocurrency
    is also known as *crypto tokens* or just *tokens*. I will use these terms interchangeably
    throughout this book.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 账本记录了一些货币的流动。一个主要的创新是意识到区块链可以定义它自己的“货币”来进行交易。它被称为*加密货币*，因为这种货币的有效性是由区块链网络中使用的密码学来保证的。例如，这种货币的每笔交易都经过数字签名，以确保其真实性和唯一性。加密货币也被称为*密码货币*或简称*代币*。在这本书中，我将这些术语互换使用。
- en: 'The rules for transaction validation allow a blockchain to create its own *monetary
    policy* that governs its cryptocurrency. For example, the Bitcoin blockchain defines
    the following rules for the creation and consumption of its cryptocurrency (i.e.,
    Bitcoins):'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 交易验证的规则使得区块链能够创建自己的*货币政策*，来管理其加密货币。例如，比特币的区块链定义了以下关于其加密货币（即比特币）的创建和消费规则：
- en: New block proposers will receive newly created units of the Bitcoin currency.
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新的区块提议者将获得比特币货币的新创造单位。
- en: There will be only 21 million Bitcoins in total, and hence the block award decreases
    over time.
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 比特币总量将仅有2100万个，因此随着时间的推移，区块奖励会逐渐减少。
- en: Each Bitcoin can be divided into a million Satoshies to be used in transactions.
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 每个比特币可以被分成一百万个萨索斯，用于交易。
- en: Bitcoin miners will receive Bitcoins for validating transactions in a new block.
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 比特币矿工将为在新区块中验证交易而获得比特币。
- en: The interesting aspect here is that such monetary policies are codified in the
    blockchain software for Bitcoin. No one can change a policy without creating a
    new blockchain (i.e., a hard fork).
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 这里有趣的一点是，这样的货币政策被编码在了比特币的区块链软件中。没有人能在不创建一个新区块链（即硬分叉）的情况下改变一项政策。
- en: 'The cryptocurrency created by the blockchain has a crucial function. It provides
    an engineering mechanism, through incentive design (or economics engineering),
    to accomplish something software engineering cannot accomplish alone: creating
    trust.'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 区块链创造的加密货币有一个关键功能。它提供了一种工程机制，通过激励设计（或经济工程），实现了软件工程无法独立完成的事情：建立信任。
- en: We can build trustless yet collaborative networks using blockchain technology
    together with cryptocurrency design.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以使用区块链技术和加密货币设计来构建无需信任却能协作的网络。
- en: '**Note**'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: '**注意**'
- en: For a long time, the technology community believed that the “enterprise” use
    of blockchain technology was to build a distributed ledger inside a company or
    a group of companies that already have trusted relationships. The trusted network
    validators and nodes made it easy to develop high-performance consensus protocols.
    Companies like IBM and Microsoft promoted the use of such permissioned or trusted
    blockchains.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 长期以来，技术界认为区块链技术的“企业”应用是建立一个公司内部或一组已经建立信任关系公司的分布式账本。可信网络的验证器和节点使得开发高性能的共识协议变得容易。像IBM和微软这样的公司推广了此类受许可或可信的区块链的使用。
- en: However, after several years of experimentation, it became clear that such “enterprise”
    use of blockchains in a trusted/single company/centralized environment has limited
    impact on business practices. The trusted blockchain is just another data management
    software solution at the disposal of corporate IT departments. Such use of blockchains
    creates no network effect.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，经过几年的实验，很明显，在可信的/单一公司/集中的环境中，此类“企业”用途的区块链对商业实践的影响有限。可信区块链只是企业IT部门可用的另一种数据管理软件解决方案。这种区块链的使用没有产生网络效应。
- en: Smart Contracts
  id: totrans-33
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 智能合约
- en: When the Bitcoin blockchain miners validate transactions, they are checking
    only for the most basic accounting rules. For instance, the transaction sender
    must have sufficient funds in her account and must sign the transaction with her
    private key. It is easy for Bitcoin miners to verify those transactions and reach
    consensus.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 当比特币区块链矿工验证交易时，他们仅检查最基本的会计规则。例如，交易发送者必须在她的账户中有足够的资金，并且必须使用她的私钥签署交易。比特币矿工很容易验证这些交易并达成共识。
- en: Now, instead of checking the basic accounting rules, the blockchain miners can
    run any kind of computer program and then reach consensus on the correctness of
    the computing results. The consensus results can then be saved to the blockchain
    for a permanent record. That is the idea behind the smart contract. The consensus
    mechanism developed for Bitcoin can be used to establish trust for any type of
    computation.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，区块链矿工不再需要检查基本的会计规则，他们可以运行任何类型的计算机程序，然后就计算结果的正确性达成共识。共识结果随后可以保存到区块链上，作为永久的记录。这就是智能合约背后的想法。为比特币开发的共识机制可以用来为任何类型的计算建立信任。
- en: The Ethereum blockchain is among the first public blockchains to support smart
    contracts. It features a Turing complete virtual machine, known as the Ethereum
    Virtual Machine (EVM). The EVM runs on all nodes to validate the correctness of
    arbitrary computation tasks. Programs written for the EVM are stored in accounts
    on the blockchain. Any transaction that involves the account will be validated
    against the program by Ethereum miners before the transaction can be recorded
    on the blockchain. Smart contracts have become the most important applications
    for the blockchain.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 以太坊区块链是首批支持智能合约的公共区块链之一。它具有图灵完备的虚拟机，称为以太坊虚拟机（EVM）。EVM在所有节点上运行，以验证任意计算任务的正确性。为EVM编写的程序存储在区块链上的账户中。涉及账户的任何交易都将由以太坊矿工根据程序进行验证，然后才能将交易记录在区块链上。智能合约已成为区块链最重要的应用。
- en: The truly revolutionary idea behind blockchains is trustworthy computing results
    generated from uncooperative participants on trustless networks.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 区块链背后的真正革命性想法是，从无需信任的网络中不合作参与者产生的可信赖计算结果。
- en: A Trustless Network
  id: totrans-38
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 无需信任的网络
- en: The original killer application of blockchain technology is the Bitcoin. The
    Bitcoin was created by and is managed by a completely trustless network. Anyone
    can get on the Bitcoin network to validate transactions, propose new blocks, and
    receive Bitcoin awards if the block is accepted by the consensus. Bitcoin network
    participants do not know each other and do not trust each other. Yet, the system
    is designed to prevent any of the participants from making malicious changes to
    the blockchain.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 区块链技术的原始杀手级应用是比特币。比特币是由一个完全不可信的网络创建并管理的。任何人都可以加入比特币网络来验证交易、提出新块，如果该块被共识接受，就会收到比特币奖励。比特币网络参与者彼此不认识，也不信任彼此。然而，系统设计用来防止任何参与者对区块链进行恶意更改。
- en: The exact mechanism Bitcoin uses for consensus is called *proof of work* (PoW).
    We will discuss the technical details of PoW in [Chapter 2](ch02.xhtml#ch02).
    For now, just know that there are mechanisms for untrusted network participants
    to agree on which transactions are valid and should be recorded in the blockchain.
    Core to the consensus mechanism is the use of cryptocurrencies that incentivize
    participants to behave according to rules (e.g., not validate invalid transactions).
    This use of cryptocurrencies as incentives is known as *cryptoeconomics*.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 比特币用于达成共识的确切机制被称为*工作量证明*（PoW）。我们将在[第二章](ch02.xhtml#ch02)讨论PoW的技术细节。现在，只需知道有机制让不可信的网络参与者同意哪些交易是有效的，并应记录在区块链上。共识机制的核心是使用加密货币来激励参与者遵守规则（例如，不验证无效交易）。这种使用加密货币作为激励的做法被称为*密码经济学*。
- en: The ability to reach consensus without a central trusted authority is powerful.
    The greatest Internet companies today are all built on the network effect. Companies
    like Uber and Airbnb act as central authorities for the networks they built. They
    make the rules, especially the rules around how money is transacted in the network.
    They make sure everyone follows the rules and in the process extract great profits.
    But are they really needed? Can the network function without the company being
    the rule maker and arbitrator? Why can’t the network participants themselves own
    the network and reap the profits?
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 能够在没有中央可信权威的情况下达成共识是一种强大的能力。当今最大的互联网公司都是建立在网络效应之上的。像Uber和Airbnb这样的公司是它们所建立的网络的中央权威。它们制定规则，尤其是围绕网络中货币如何交易的规则。它们确保每个人都遵守规则，并在过程中提取巨大的利润。但是它们真的有必要吗？网络能否在没有公司作为规则制定者和仲裁者的情况下运行？网络参与者本身为什么不能拥有网络并从中获利？
- en: 'However, past efforts to replace Uber and build a coop-style nonprofit transportation
    network have largely failed. There are a few reasons, listed here:'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，过去尝试取代Uber并建立一个合作社式的非营利性交通网络的努力基本上都失败了。有几个原因，如下所述：
- en: Replacing the centralized company with a centralized nonprofit does not solve
    the trust issue. Many nonprofits are corrupt and mostly enrich their operators.
    The drivers and riders still have no real “ownership” of the network.
  id: totrans-43
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用一个集中的非营利组织取代集中的公司并不能解决信任问题。许多非营利组织是腐败的，并且主要是使它们的运营者富有。司机和乘客仍然没有网络的真正“所有权”。
- en: A centralized nonprofit lacks the means to award early adopters and jump-start
    the network. Uber, however, can raise venture capital (VC) money and spend heavily
    on incentives until the network effect is self-sustainable.
  id: totrans-44
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个集中的非营利组织缺乏奖励早期采用者并启动网络的手段。Uber能够筹集风险资本（VC）资金，并大力投资于激励措施，直到网络效应能够自给自足。
- en: A blockchain network with crypto tokens could solve both problems. The network
    is run by untrusted peers and hence cannot be corrupted. The network can issue
    tokens to compensate early adopters through a process like an initial coin offering
    (ICO). Furthermore, by turning network participants (drivers and riders in the
    Uber example) into token holders, we can establish a monetary network and create
    loyalty to the network Uber has never been able to build.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 一个基于区块链网络的加密货币可能会解决这两个问题。该网络由不可信的节点运行，因此无法被腐败。网络可以通过初始币发行（ICO）等过程向早期采用者发行代币。此外，通过将网络参与者（例如Uber中的司机和乘客）变成代币持有者，我们可以建立一个货币网络，并创造对网络的忠诚，这是Uber从未能够建立的。
- en: New Ways of Collaborating
  id: totrans-46
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 新的合作方式
- en: This untrusted network opens new ways for people to collaborate. For instance,
    imagine that there is a valuable data set, but no one owns the whole data. Each
    participant in the network owns a piece of the data set, but they are reluctant
    to share, as the party that shares the last will benefit the most. In this scenario,
    the society often cannot make use of this data set.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 这种不可信的网络为人们提供了新的合作方式。例如，想象一下有一个宝贵的数据集，但没有人拥有全部数据。网络中的每个参与者都拥有数据集的一部分，但他们不愿意分享，因为分享最后的部分将获得最大的利益。在这种情况下，社会往往无法利用这个数据集。
- en: '**Note**'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: '**注意**'
- en: A concrete real-world case is the medical data held by hospitals—while extremely
    valuable collectively, no hospital is incentivized to share its own piece of the
    data.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 一个具体的现实世界案例是医院持有的医疗数据——虽然集体上非常有价值，但没有任何一家医院有动力分享自己的数据片段。
- en: Now, let’s imagine a network where all parties can contribute data. When revenue
    is generated from the use of such data, the network will distribute the revenue
    to parties according to pre-agreed upon splits, and each distribution is independently
    validated by network participants so that there is no chance for cheating.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们想象一个所有各方都可以贡献数据的网络。当从使用这些数据产生收入时，网络将根据预先约定的比例将收入分配给各方，每次分配都由网络参与者独立验证，以便没有作弊的机会。
- en: Such a data collaboration network was possible prior to blockchain technology,
    but it requires a centralized authority trusted by everyone to determine and distribute
    the revenue income. The trusted central authority has both incentives and opportunities
    to cheat, and that has made such trusted networks difficult to establish.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 在区块链技术之前，这样的数据协作网络是可能的，但它需要一个被所有人信任的集中权威来确定和分配收入。可信的中央权威既有激励又有机会作弊，这使得这种可信网络难以建立。
- en: The Fat Protocol
  id: totrans-52
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 厚协议
- en: The characteristic of a blockchain network is that it can create value without
    a central corporation. The value of the network is not in a company’s shares but
    in the network protocol and is reflected as the value of the network tokens. This
    theory is called the *fat protocol theory*, originally proposed by Joel Monegro
    from Union Square Ventures. For example, on today’s Bitcoin or Ethereum network,
    no company has reached significant valuation, and yet the networks themselves
    are worth tens of billions of dollars. [Figure 1.2](ch01.xhtml#ch01fig2) shows
    how Internet protocols are “thin” and hence applications capture most of the value,
    while blockchain protocols are fat and can themselves capture value.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 区块链网络的特点是它可以没有中央公司创造价值。网络的价值不在于公司的股份，而在于网络协议，并且表现为网络代币的价值。这种理论被称为*厚协议理论*，最初由Union
    Square Ventures的Joel Monegro提出。例如，在今天的比特币或以太坊网络上，没有公司达到显著的估值，然而这些网络本身却价值数十亿美元。[图1.2](ch01.xhtml#ch01fig2)展示了互联网协议是“薄”的，因此应用程序捕捉了大部分价值，而区块链协议是厚的，可以自身捕捉价值。
- en: '![image](Images/yuan_f01_02.jpg)'
  id: totrans-54
  prefs: []
  type: TYPE_IMG
  zh: '![image](Images/yuan_f01_02.jpg)'
- en: '**Figure 1.2** The thin versus fat protocols (adapted from [https://www.usv.com/blog/fat-protocols](https://www.usv.com/blog/fat-protocols))'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: '**图1.2** 薄与厚协议的比较（改编自[https://www.usv.com/blog/fat-protocols](https://www.usv.com/blog/fat-protocols)）'
- en: The very existence of modern corporations is because external transaction costs
    between the corporation and its partners are much higher than the internal transaction
    costs within the departments.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 现代公司的存在本身是因为公司与合作伙伴之间的外部交易成本远高于公司内部部门之间的内部交易成本。
- en: That is due to the command-and-control structure corporations can impose on
    their internal departments. However, in today’s economy, as communication costs
    drop, external transaction costs drop to the point where companies are increasingly
    relying on outsourcing or contracting labor (see the earlier Uber and Airbnb examples).
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 这是由于公司可以对其内部部门施加命令和控制结构。然而，在今天经济中，随着通信成本的降低，外部交易成本降低到公司越来越多地依赖外包或合同劳动（参见之前的Uber和Airbnb示例）。
- en: The trustless blockchain networks will further reduce external transaction costs.
    Those networks streamline the transactions of not only information but also money.
    The public blockchain network, together with crypto tokens, enables new business
    models that could either replace today’s corporations or create new opportunities
    that cannot be solved by corporations.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 无信任的区块链网络将进一步降低外部交易成本。这些网络不仅简化了信息的交易，还简化了金钱的交易。公共区块链网络与加密代币相结合，为新的商业模式创造了可能，这些模式要么取代今天的公司，要么解决公司无法解决的新机会。
- en: The rules of collaboration and consensus of a blockchain network are embedded
    and enforced in the network protocol itself. This is of course different from
    the human-driven rules in most corporations. The blockchain collaboration rules
    are algorithmic, automatic, fast, fair, and consistent. To fully take advantage
    of blockchain networks, we should codify as many collaboration rules as possible
    into the network protocol.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 区块链网络的协作和共识规则内嵌并 enforce 在网络协议本身。这当然与大多数公司中由人驱动的规则不同。区块链协作规则是算法性的、自动的、快速的、公平的和一致的。为了充分利用区块链网络，我们应该尽可能将许多协作规则编码到网络协议中。
- en: In Code We Trust
  id: totrans-60
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 我们信任代码
- en: The smart contracts can often closely resemble legal contracts in the real world.
    For example, the transaction parties might enter an escrow agreement that the
    fund will be paid out only when certain conditions are met. It is now up to network
    validators and maintainers to assert whether such conditions are met and how the
    transaction should be executed when new blocks are appended to the blockchain.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 智能合约在现实世界的法律合同中往往有相似之处。例如，交易各方可能进入一个托管协议，只有在满足某些条件时才会支付资金。现在，网络验证者和维护者的任务是断言这些条件是否满足，以及当新的区块添加到区块链时交易应该如何执行。
- en: However, unlike legal contracts that are enforced by the centralized government
    power, the smart contracts can automatically apply collaboration rules on the
    blockchain. The rules are written in code and checked by trustless participants
    of the network to prevent corruption or collusion. Because of that, we consider
    smart contract code the “law” in blockchain networks. The code is executed as
    written. Even if the code contains bugs or side effects unexpected by its author,
    it is still trusted as a source of truth and enforced as the law.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，与由中央政府强制执行的法律合同不同，智能合约可以自动在区块链上应用协作规则。这些规则以代码形式存在，并由无需信任的网络参与者进行检查，以防止腐败或勾结。正因为如此，我们认为智能合约的代码是区块链网络中的“法律”。代码照字面意思执行。即使代码中有漏洞或作者意想不到的副作用，它仍然被视为真实来源并被作为法律执行。
- en: Conclusion
  id: totrans-63
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 结论
- en: In this chapter, I discussed the key concepts of blockchain networks. Through
    cryptocurrencies, a blockchain network combines software and economics engineering
    to create trust in a network of uncooperative participants. This could disrupt
    the greatest Internet companies today, as the network effects are no longer created
    by large companies at the center of such networks. The network is instead maintained
    by the software code shared by every participant. In code we trust.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我讨论了区块链网络的关键概念。通过加密货币，区块链网络结合了软件和经济工程，在由不合作的参与者组成的网络中创造信任。这可能会颠覆今天最大的互联网公司，因为网络效应不再由网络中心的大型公司创造。相反，网络是由每个参与者共享的软件代码维护的。我们信任代码。
- en: 2. Reaching Consensus
  id: totrans-65
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 2. 达成共识
- en: The central idea behind blockchain networks is not really the technology—hash
    algorithms and public key infrastructure (PKI) technologies have existed for many
    years. As we discussed in the previous chapter, the chief innovation in Bitcoin
    is a new incentive structure to make sure that although every individual in the
    network is uncooperative (i.e., decentralized), they will nevertheless collectively
    behave in a way that maintains the integrity and security of the network. Economic
    incentives from cryptocurrencies are working in tandem with technological solutions
    in blockchain networks to solve problems that were previously impossible to address
    with technology alone.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 区块链网络背后的核心思想其实不是技术——散列算法和公钥基础设施（PKI）技术已经存在了许多年。正如我们在上一章中讨论的，比特币的创新之处在于一种新的激励结构，以确保尽管网络中的每个个体都是不合作的（即去中心化的），他们仍然会集体以维护网络的完整性和安全的方式行为。加密货币的经济激励与区块链网络中的技术解决方案协同工作，解决了一些以前仅凭技术无法解决的问题。
- en: The most important example of this seamless collaboration between software engineering
    and economic design is the blockchain’s consensus mechanism.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 软件工程和经济设计之间无缝协作的最重要例子就是区块链的共识机制。
- en: What Is Blockchain Consensus?
  id: totrans-68
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 区块链共识是什么？
- en: Since a public blockchain is a distributed ledger maintained by untrusted participants,
    it is crucial to reach network-wide consensus on which transactions are valid
    and should be recorded on the blockchain. Automated consensus is the core idea
    behind blockchains. How to improve the efficiency of consensus without compromising
    security is one of the most important challenges facing blockchains today.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 由于公开的区块链是由不可信的参与者维护的分布式账本，因此在哪些交易是有效并应在区块链上记录上达成网络共识至关重要。自动化共识是区块链的核心思想。如何在不妨碍安全的前提下提高共识效率是区块链目前面临的最重要挑战之一。
- en: To be fair, the human society has long developed ways to reach consensus. For
    example, all types of voting systems are designed to reach consensus. Enabled
    by technologies, we now also have informal voting systems such as Facebook likes
    and Reddit upvotes. However, human voting is too slow and subject to humans’ unreliable
    interpretation of rules. It cannot handle high-speed, high-volume transactions
    required by a global computing network.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 公平地说，人类社会早已发展出了达成共识的方法。例如，各种投票系统都是为了达成共识而设计的。在技术的支持下，我们现在也有了非正式的投票系统，如Facebook的点赞和Reddit的点赞。然而，人类的投票太慢，容易受到人类对规则不可靠解释的影响。它无法处理全球计算网络所需的快速，大量交易。
- en: Algorithms can help us reach consensus much faster on the Internet scale. Such
    examples include Google page ranks, Google Ads auctions, online reputation scores,
    matching algorithms from Uber to Tinder, and so on. However, such algorithms are
    typically only appropriately correct. They cannot guarantee the accuracy of individual
    transactions. The blockchain network goes one step further and provides an automated
    computational method to definitively validate and record transactions.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 算法可以帮助我们在互联网规模上更快地达成共识。例如，从谷歌页面排名、谷歌广告拍卖、在线声誉评分，到Uber的匹配算法，再到Tinder的算法等等。然而，这些算法通常只能保证整体正确性，不能保证个别交易的准确性。区块链网络更进一步，提供了一种自动化的计算方法来明确验证和记录交易。
- en: While many blockchain projects innovate on the consensus mechanism to be “proof
    of XYZ,” we believe that, fundamentally, there are only two types of consensus—proof
    of work (PoW) and proof of stake (PoS).
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管许多区块链项目在共识机制上进行创新以成为“ proof of XYZ”，但我们认为，从根本上说，只有两种类型的共识——工作量证明（PoW）和权益证明（PoS）。
- en: Proof of Work (PoW)
  id: totrans-73
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 工作量证明（PoW）
- en: The Bitcoin is a classic example of a PoW consensus blockchain. While it suffers
    from various technical problems such as low performance, poor scalability, and
    wasteful electricity use, it has proven secure against highly motivated attacks
    by individuals, organizations, and even nation-states. It builds a trillion-dollar
    global network without requiring trust in any of its participants. So far, no
    one has been able to create a fraudulent transaction in the blockchain—despite
    the massive financial payoff such hacks could bring. That is a monumental achievement
    by Bitcoin’s creator, Satoshi Nakamoto.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 比特币是一个典型的PoW共识区块链例子。虽然它存在诸如性能低下、可扩展性差和电力浪费等问题，但它已经证明了对个人、组织和甚至国家层面的攻击具有高度的安全性。它构建了一个价值数万亿美元的全球网络，而无需信任其任何参与者。这是比特币创造者中本聪的一项巨大的成就。
- en: In a PoW system, miners compete to solve a math puzzle for each block. The first
    one to solve this problem is the first to propose a new block and receive the
    Bitcoin award associated with the block. The “winner” can include any pending
    transactions he chooses in the block but cannot include any invalid ones (i.e.,
    all transactions must be properly signed, and their originating accounts must
    have sufficient funds). If other miners detect that there are invalid transactions
    in the block, they will propose competing blocks.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 在PoW系统中，矿工们竞争解决每个块的数学难题。首先解决这个问题的矿工将提出一个新的块并获得与该块相关的比特币奖励。获胜者可以选择他在块中包含任何待处理的交易，但他不能包含任何无效的交易（即，所有交易必须得到正确签名，交易发起账户必须有足够的资金）。如果其他矿工发现块中有无效交易，他们将提出竞争性的块。
- en: The community of miners “votes” by each independently choosing which competing
    blocks to build the subsequent new blocks upon. Let’s say that there is a malicious
    miner who includes a large unauthorized Bitcoin transaction to herself whenever
    she wins the math contest to propose a new block. But, no one else will build
    on her block since other miners are also selfish and have no incentive to break
    the rules to benefit her. If she continues to build on it, she will be the only
    one on that branch of the blockchain. It will become really obvious that her branch
    (or fork) of the blockchain is illegitimate.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 矿工社区通过每个矿工独立选择构建后续新区块的竞争块来进行“投票”。假设有一个恶意矿工，每当她赢得数学竞赛提出新区块时，她就为自己包含一个大的未经授权的比特币交易。但是，其他矿工也是自私的，没有动机违反规则来为她谋利，所以没有人会基于她的块构建新块。如果她继续在上面构建，她将是那个区块链分支上唯一的人。很明显，她的区块链分支（或分叉）是不合法的。
- en: Now, if a majority of miners (as measured by computing power) collude, they
    could all intentionally build in the invalid block and make the fork appear as
    the legitimate trunk of the Bitcoin blockchain. That is known as a *51 percent
    attack*. In a large blockchain network such as Bitcoin, the amount of resources
    required to accumulate such computing power to reach 51 percent is enormous. With
    that kind of computing power, a potential attacker is economically better off
    following the rules to mine new Bitcoin blocks instead of trying to attack and
    destroy the Bitcoin value for everyone.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，如果大多数矿工（按计算能力计算）勾结，他们可以故意构建无效的块，使分叉看起来是比特币区块链的合法主分支。这被称为**51%攻击**。对于像比特币这样的大型区块链网络，积累达到51%的计算能力所需的资源是巨大的。拥有这种计算能力的话，潜在的攻击者经济上不如遵循规则挖新区块，而不是试图破坏所有人的比特币价值。
- en: '**Note**'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: '**注意**'
- en: A 51 percent attack is a way for the community to reach consensus to accept
    a block with invalid transactions.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 51%攻击是一种社区达成共识接受包含无效交易区块的方式。
- en: Proof of Stake (PoS)
  id: totrans-80
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 权益证明（PoS）
- en: While PoW is a great invention that has been proven secure in the real world,
    it also suffers from many problems. It requires enormous amounts of computing
    power to perform wasteful computational work to artificially make it economically
    unfeasible for potential attackers. It encourages everyone to participate in the
    mining process, causing consensus to be slow to emerge and converge. When there
    are multiple competing blocks, it takes a long time (an hour or more) for the
    system to settle on a consensus branch.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管PoW是一项已被现实世界证明安全的伟大发明，但它也存在许多问题。它需要大量的计算能力来执行浪费性的计算工作，以人为地使潜在的攻击者经济上不可行。它鼓励每个人都参与挖矿过程，导致共识缓慢出现和收敛。当存在多个竞争块时，系统需要很长时间（一个小时或更长）才能确定一个共识分支。
- en: To solve PoW’s problems, a new consensus mechanism called *proof of stake* was
    proposed. A PoS system allows a straight vote for each new block by the network’s
    stakeholders (account holders for the blockchain’s native cryptocurrency or token).
    The proposer of a new block is randomly chosen. Your voting power is proportional
    to the tokens you hold in your account. With voting, the blockchain can achieve
    finality in each block with a minimal amount of computation. The proposer of an
    accepted new block receives an award in the blockchain’s native cryptocurrency.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 为解决工作量证明（PoW）的问题，提出了一种新的共识机制，称为**权益证明**。PoS系统允许网络的利益相关者（即区块链原生加密货币或代币的账户持有者）对每个新区块进行直接投票。新区块的提议者是随机选择的。你的投票力与你账户中的代币数量成比例。通过投票，区块链可以在最少的计算量下实现每个块的最终确定性。被接受的新区块的提议者将获得区块链原生加密货币的奖励。
- en: 'This process is called *minting* new cryptocurrency as opposed to POW’s *mining*.
    A PoS system is typically much more performant than a PoW system. Examples of
    large public PoS blockchains include the following:'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 这一过程被称为**铸币**，与PoW的**挖矿**相对。与PoW系统相比，PoS系统通常性能更优。大型公共PoS区块链的例子如下：
- en: The Casper project ([https://github.com/ethereum/casper](https://github.com/ethereum/casper))
    aims to transform the Ethereum blockchain from a PoW system to a PoS system. Once
    completed, it will be the largest PoS blockchain ecosystem in the world.
  id: totrans-84
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Casper项目（[https://github.com/ethereum/casper](https://github.com/ethereum/casper)）旨在将以太坊区块链从PoW系统转变为PoS系统。一旦完成，它将成为世界上最大的PoS区块链生态系统。
- en: The QTUM blockchain ([https://qtum.org/](https://qtum.org/)) is designed to
    be a PoS blockchain based on a Bitcoin-like infrastructure.
  id: totrans-85
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 量子链（QTUM）区块链（[https://qtum.org/](https://qtum.org/)）旨在成为一个基于比特币类似基础设施的PoS区块链。
- en: '**Note**'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: '**注意**'
- en: An interesting side effect of a PoS cryptocurrency is that stakeholders are
    encouraged to *stake* their tokens to participate in the voting process and receive
    new block awards. They are financially dis-incentivized to trade their tokens.
    That decreases the “money” supply and could make such cryptocurrency more valuable
    in the market.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: PoS加密货币的一个有趣副作用是，利益相关者被鼓励锁定他们的代币以参与投票过程并获得新的区块奖励。他们经济上不鼓励交易他们的代币。这减少了“货币”供应量，可能会使这种加密货币在市场上更有价值。
- en: The voting mechanism in a PoS system is the subject of intense research and
    innovation. Specifically, the system must assume uncooperative or even malicious
    voters. This is commonly known as the Byzantine Generals Problem in game theory.
    A voting mechanism that can be mathematically proven to withstand up to one-third
    of fraudulent voters has to be Byzantine fault tolerant (BFT). BFT consensus engines
    are now widely used in blockchain design.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: PoS系统中的投票机制是研究和创新的热点。特别是，系统必须假设不合作甚至恶意投票者。这在博弈论中通常被称为拜占庭将军问题。一个可以数学证实现对最多三分之一欺诈投票者的投票机制必须具备拜占庭容错（BFT）能力。BFT共识引擎现在广泛用于区块链设计中。
- en: 'However, a plain PoS system also has significant shortcomings. Here are some
    examples:'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，一个简单的PoS系统也存在显著的不足。以下是一些例子：
- en: Participants could have nothing to lose by voting yes on invalid block proposals.
    Some kind of penalty (or *slashing*) must be introduced to “punish” misbehaving
    participants.
  id: totrans-90
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 参与者投票支持无效区块提案可能不会有什么损失。必须引入某种惩罚（或称为*削减*）来“惩罚”行为不当的参与者。
- en: Voting itself is a technical endeavor few people master, as the performance
    and security requirements are high for a high-performance network.
  id: totrans-91
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 投票本身是一项技术性很强的任务，很少有人能掌握，因为对于高性能网络来说，性能和安全性要求很高。
- en: Allowing all stakeholders (even ones with a single token) to vote could result
    in the same performance degradation seen in PoW systems.
  id: totrans-92
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 允许所有利益相关者（甚至是只有一个代币的）进行投票可能会导致与PoW系统相同的性能下降。
- en: The large voting power from large stakeholders could result in a concentration
    of power over time.
  id: totrans-93
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 大利益相关者的大投票权可能会导致权力随着时间的推移而集中。
- en: A few improvements to PoS have been suggested. A leading candidate is called
    *delegated proof of stake* (DPoS).
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 已经提出了一些对权益证明（PoS）的改进建议。其中的一个领先候选者被称为*委托权益证明*（DPoS）。
- en: Delegated Proof of Stake (DPoS)
  id: totrans-95
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 委托权益证明（DPoS）
- en: 'A DPoS system has only a limited number of validators who can propose and vote
    on new blocks. Stakeholders can “delegate” their cryptocurrencies to validators
    they choose, and validators will vote on their behalf. That allows validators
    to become professional operators (similar to a mining pool in a PoW system) and
    can be subject to penalties if they vote for invalid blocks (or are careless and
    hacked). Examples of DPoS blockchains include the following:'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: DPoS系统只有少数能够提出和投票新区块的验证者。利益相关者可以将他们的加密货币“委托”给他们选择的验证者，验证者会代表他们投票。这使得验证者可以成为专业的运营商（类似于PoW系统中的矿池），如果他们为无效区块投票（或者粗心大意被黑客攻击），他们可能会受到惩罚。DPoS区块链的例子包括以下：
- en: The Bitshares project ([https://bitshares.org/](https://bitshares.org/)) is
    the pioneer of the DPoS concept. It is a public blockchain with 21 elected validators.
  id: totrans-97
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 比特股（Bitshares）项目（[https://bitshares.org/](https://bitshares.org/)）是DPoS概念的先驱。它是一个拥有21名当选验证者的公共区块链。
- en: The Cosmos project ([https://cosmos.network/](https://cosmos.network/)) is a
    public network of blockchains all built on the Tendermint DPoS consensus engine
    that can exchange information with each other. We will cover Cosmos in later chapters.
  id: totrans-98
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 宇宙网络（Cosmos）项目（[https://cosmos.network/](https://cosmos.network/)）是一个由Tendermint
    DPoS共识引擎构建的所有区块链组成的公共网络，它们可以相互交换信息。我们将在后面的章节中介绍Cosmos。
- en: The CyberMiles project ([http://cybermiles.io/](http://cybermiles.io/)) is a
    public blockchain network specifically optimized for smart contracts and compliant
    token issuance for commercial businesses. We will use CyberMiles as an example
    of blockchain system design in later chapters.
  id: totrans-99
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 网络里程（CyberMiles）项目（[http://cybermiles.io/](http://cybermiles.io/)）是一个为智能合约和商业企业的合规代币发行而专门优化的公共区块链网络。我们将在后面的章节中使用CyberMiles作为区块链系统设计的例子。
- en: In political economy terms, DPoS is similar to a representative democracy with
    landowner (or property owner) suffrage.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 从政治经济学的角度来看，DPoS类似于有地主（或财产所有者）投票权的代议制民主。
- en: Validators, or representatives, are delegated by the community to decide the
    day-to-day questions, such as the consensus for each block and each transaction,
    to maintain the integrity of the ledger (no double spend) and the smart contract
    executions.
  id: totrans-101
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 验证者或代表是由社区委派的，来决定日常问题，如每个区块和每笔交易的共识，来维护账本的完整性（防止双重支付）和智能合约的执行。
- en: The right to vote on representatives is given to participants who hold a certain
    form of property. This property represents a commitment to the community and also
    a loss of liquidity. In this case, the crypto tokens that represent the value
    of the blockchain network as a whole are the property. This model resembles the
    historical landowner suffrage.
  id: totrans-102
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 拥有某种财产形式的参与者被赋予投票选举代表的权利。这种财产代表着对社区的承诺，同时也代表着流动性的损失。在这种情况下，代表整个区块链网络价值的加密货币就是这种财产。这个模型类似于历史上的土地所有者选举权。
- en: Notice that, similar to the democratic system, the property (or tokens) is used
    only for staking a delegate. The staked tokens are locked by the network to prevent
    trading and are made available for penalties. The ownership of the staked tokens
    is never transferred to the validator.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，与民主制度相似，财产（或代币）只用于抵押代表。网络锁定抵押的代币以防止交易，并用于处罚。抵押代币的所有权永远不会转让给验证者。
- en: In the end, the purpose of the blockchain is to reach consensus. It is natural
    for us to model consensus after representative democracy mechanisms that human
    society has used for thousands of years.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，区块链的目的是为了达成共识。我们自然地会模仿人类社会使用了数千年的代表性民主机制来建模共识。
- en: Conclusion
  id: totrans-105
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 结论
- en: In this chapter, I explained how economic engineering works hand in hand with
    software engineering to secure blockchain networks. Such a trustless network requires,
    and also enables, valuable cryptocurrencies to function.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我解释了经济工程如何与软件工程携手保障区块链网络的安全。这样一个无需信任的网络需要，同时也使得，有价值的加密货币得以运行。
- en: 3. Your First Blockchain App
  id: totrans-107
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 3. 你的第一个区块链应用
- en: The easiest way to get started with blockchain application development is to
    use the open source BUIDL tool—an online integrated development environment (IDE)
    that works in any modern web browser. Just go to [http://buidl.secondstate.io/](http://buidl.secondstate.io/)
    and start coding! BUIDL provides a comprehensive coding environment for creating
    and deploying end-to-end blockchain applications ([Figure 3.1](ch03.xhtml#ch03fig1)).
    You can create an entire blockchain application inside BUIDL, from smart contracts
    on the back end to HTML on the front end, and everything in the middle.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 开始区块链应用开发的最简单方式是使用开源的BUIDL工具——一个在任何现代网络浏览器中工作的在线集成开发环境（IDE）。只需访问[http://buidl.secondstate.io/](http://buidl.secondstate.io/)
    开始编码！BUIDL为创建和部署端到端的区块链应用提供了一个全面的编码环境([图3.1](ch03.xhtml#ch03fig1))。您可以在BUIDL内创建整个区块链应用，从前端的智能合约到后端的HTML，以及中间的所有内容。
- en: '![image](Images/yuan_f03_01.jpg)'
  id: totrans-109
  prefs: []
  type: TYPE_IMG
  zh: '![image](Images/yuan_f03_01.jpg)'
- en: '**Figure 3.1** BUIDL is an open source online IDE for end-to-end blockchain
    app development.'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: '**图3.1** BUIDL是一个开源的在线集成开发环境（IDE），用于端到端的区块链应用开发。'
- en: For beginners and experts alike, BUIDL takes much of the complexity and guesswork
    out of blockchain development and allows you to focus on coding. It does not require
    any software download or installation. It eliminates the need for developers to
    deal with wallets, private keys, cryptocurrencies, and lengthy transaction confirmation.
    Yet, it deploys your applications on live public blockchains and makes the application
    accessible to anyone you share to.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 对于初学者和专家来说，BUIDL大大简化了区块链开发的复杂性和猜测性，让你可以专注于编码。它不需要任何软件下载或安装。它消除了开发者需要处理钱包、私钥、加密货币和漫长的交易确认的过程。然而，它能在公共区块链上部署你的应用，并让任何你分享的人都能访问这个应用。
- en: In this chapter, you will learn to create your first blockchain application
    and then share it with the world. We will walk through key concepts behind blockchain
    applications, also known as *decentralized apps* (*dapps*).
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，你将学会创建你的第一个区块链应用，然后与世界分享。我们将深入讲解区块链应用背后的关键概念，也被称为*去中心化应用* (*dapps*)。
- en: Smart Contract
  id: totrans-113
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 智能合约
- en: In short, a *smart contract* is the back-end service code that lives on the
    blockchain. Once deployed, external applications can invoke functions and code
    inside a smart contract to perform tasks and record the results on the blockchain
    through consensus. The most popular programming language to write smart contracts
    is the Solidity language pioneered by Ethereum. In this example, let’s create
    a simple smart contract and deploy it with BUIDL.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 总之，*智能合约*是运行在区块链上的后端服务代码。一旦部署，外部应用程序就可以调用智能合约内的函数和代码，通过共识在区块链上执行任务并记录结果。编写智能合约最流行的编程语言是以太坊开创的*Solidity*语言。在这个例子中，让我们用BUIDL创建一个简单的智能合约并部署它。
- en: Load BUIDL in your web browser. You will see a simple smart contract already
    in the online editor window ([Figure 3.2](ch03.xhtml#ch03fig2)).
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 在网页浏览器中加载BUIDL。你会看到一个简单的智能合约已经在线编辑窗口中（[图3.2](ch03.xhtml#ch03fig2)）。
- en: '![image](Images/yuan_f03_02.jpg)'
  id: totrans-116
  prefs: []
  type: TYPE_IMG
  zh: '![image](Images/yuan_f03_02.jpg)'
- en: '**Figure 3.2** A simple smart contract in BUIDL'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: '**图3.2** BUIDL中的简单智能合约'
- en: The contract simply allows you to store a number on the blockchain. You can
    view or update the stored number by calling its functions `get()` and `set()`.
    The code is as follows. The Solidity syntax should be familiar to most developers
    as it is similar to JavaScript.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 这个合约简单地允许你在区块链上存储一个数字。你可以通过调用其`get()`和`set()`函数来查看或更新存储的数字。代码如下。Solidity的语法对大多数开发者来说应该很熟悉，因为它与JavaScript相似。
- en: '[Click here to view code image](Images/ch03_images.xhtml#pro3_1)'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: '[点击此处查看代码图片](Images/ch03_images.xhtml#pro3_1)'
- en: '[PRE0]'
  id: totrans-120
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Click the **Compile** button to compile the contract. A sidebar will open to
    show you the compiled application binary interface (ABI, a JSON-based artifact
    used by the blockchain to facilitate remote function calls) and the bytecode of
    the contract ([Figure 3.3](ch03.xhtml#ch03fig3)).
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 点击**编译**按钮来编译合约。侧边栏将会打开，展示编译后的应用二进制接口（ABI，区块链用于促进远程函数调用的基于JSON的 artifact）和合约的字节码（[图3.3](ch03.xhtml#ch03fig3)）。
- en: '![image](Images/yuan_f03_03.jpg)'
  id: totrans-122
  prefs: []
  type: TYPE_IMG
  zh: '![image](Images/yuan_f03_03.jpg)'
- en: '**Figure 3.3** Compiled smart contract ready for deployment'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: '**图3.3** 准备部署的编译智能合约'
- en: Next, you can click the **Deploy to the chain** button in the left panel to
    instantiate and deploy the contract to a public blockchain. You can interact with
    deployed contracts by calling their public methods from inside BUIDL. For example,
    you can set the contract’s `storedData` value and click the **Transact** button
    to save the value onto the blockchain; then click the **Call** button to see the
    value in the LOG panel ([Figure 3.4](ch03.xhtml#ch03fig4)).
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，你可以点击左侧面板中的**部署到链**按钮，实例化并部署合约到公有区块链。你可以在BUIDL内部调用已部署合约的公共方法与其交互。例如，你可以设置合约的`storedData`值，点击**交易**按钮将值保存到区块链；然后点击**调用**按钮在LOG面板查看值（[图3.4](ch03.xhtml#ch03fig4)）。
- en: '![image](Images/yuan_f03_04.jpg)'
  id: totrans-125
  prefs: []
  type: TYPE_IMG
  zh: '![image](Images/yuan_f03_04.jpg)'
- en: '**Figure 3.4** Interacting with a deployed smart contract on the blockchain'
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: '**图3.4** 在区块链上与已部署智能合约交互'
- en: You have probably noticed that the BUIDL IDE deploys to the Second State DevChain
    by default. This is an Ethereum-compatible public blockchain designed for improving
    the developer experience. For example, the DevChain has a block time of one second,
    and all transactions are confirmed as soon as the block is produced. DevChain
    smart contracts have a fast interaction time of one second instead of a confirmation
    time of minutes or even hours on the public Ethereum blockchain. The “gas price”
    on the DevChain is zero, and hence you do not need to worry about getting crypto
    tokens for pay for “gas.”
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 你可能已经注意到，BUIDL IDE默认部署到Second State DevChain。这是一个为改善开发者体验而设计的以太坊兼容的公有区块链。例如，DevChain的区块时间为1秒，区块产生后所有交易立即确认。DevChain上的智能合约交互时间仅为1秒，而不是公有以太坊区块链上需要几分钟甚至几小时的确认时间。DevChain上的“燃气费”为零，因此你不需要担心获取加密货币代币来支付“燃气费”。
- en: Furthermore, since the DevChain requires no gas or cryptocurrency, the address
    or account on the blockchain serves only as an ID for the caller of smart contract
    functions. BUIDL automatically generates five addresses for you to use. You can
    see them on the **Accounts** tab ([Figure 3.5](ch03.xhtml#ch03fig5)). You can
    set any of them as your own default address. If you already have an address, you
    can also import it into BUIDL. All address private keys are managed locally in
    your computer’s browser cache. BUIDL does not require you to have any crypto wallet,
    and hence it works on any browser, including smartphone browsers. You can truly
    code anywhere.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，由于DevChain不需要燃料或加密货币，区块链上的地址或账户只作为智能合约函数调用的ID。BUIDL会自动为您生成五个地址供您使用。您可以在**账户**标签中查看它们([图3.5](ch03.xhtml#ch03fig5))。您可以将其中任何一个设置为您的默认地址。如果您已经有了一个地址，您也可以将其导入到BUIDL中。所有地址的私钥都保存在您电脑浏览器缓存中。BUIDL不需要您拥有任何加密钱包，因此它可以在任何浏览器上运行，包括智能手机浏览器。您真的可以在任何地方编码。
- en: '![image](Images/yuan_f03_05.jpg)'
  id: totrans-129
  prefs: []
  type: TYPE_IMG
  zh: '![image](Images/yuan_f03_05.jpg)'
- en: '**Figure 3.5** Addresses/accounts in BUIDL'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: '**图3.5** BUIDL中的地址/账户'
- en: Once your smart contract is written, you can deploy it to any Ethereum-compatible
    blockchain including the Ethereum mainnet and testnets. You can do that directly
    from within BUIDL. Please see [Chapter 4](ch04.xhtml#ch04) as well as the BUIDL
    documentation for details.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦您的智能合约编写完成，您就可以将其部署到任何与以太坊兼容的区块链上，包括以太坊主网和测试网。您可以直接在BUIDL中完成这一点。请参阅第[4章](ch04.xhtml#ch04)以及BUIDL文档以获取详细信息。
- en: Front-End HTML
  id: totrans-132
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 前端HTML
- en: Next click the **dapp** tab to work on the web application that interacts with
    the smart contract on the blockchain. The HTML front end of the application is
    simple. It displays two buttons that allow users to invoke the two corresponding
    smart contract functions ([Figure 3.6](ch03.xhtml#ch03fig6)).
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 然后点击**dapp**标签，开始与区块链上的智能合约交互的网页应用程序的工作。应用程序的HTML前端很简单。它显示了两个允许用户调用两个对应智能合约函数的按钮([图3.6](ch03.xhtml#ch03fig6))。
- en: '[PRE1]'
  id: totrans-134
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: '![image](Images/yuan_f03_06.jpg)'
  id: totrans-135
  prefs: []
  type: TYPE_IMG
  zh: '![image](Images/yuan_f03_06.jpg)'
- en: '**Figure 3.6** The HTML editor on the dapp tab'
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: '**图3.6** dapp标签页上的HTML编辑器'
- en: It is also possible to add CSS and JavaScript library resources to the HTML
    via the **Resources** tab in BUIDL ([Figure 3.7](ch03.xhtml#ch03fig7)).
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 还可以通过BUIDL中的**资源**标签添加CSS和JavaScript库资源到HTML中([图3.7](ch03.xhtml#ch03fig7))。
- en: '![image](Images/yuan_f03_07.jpg)'
  id: totrans-138
  prefs: []
  type: TYPE_IMG
  zh: '![image](Images/yuan_f03_07.jpg)'
- en: '**Figure 3.7** Resources of the HTML web app'
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: '**图3.7** HTML网络应用的资源'
- en: JavaScript and web3.js
  id: totrans-140
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: JavaScript和web3.js
- en: The HTML web page displays the UI of the dapp. The web application makes function
    calls against the smart contract via the JavaScript web3.js library ([Figure 3.8](ch03.xhtml#ch03fig8)).
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: HTML网页显示了dapp的UI。网络应用程序通过JavaScript web3.js库对智能合约进行函数调用([图3.8](ch03.xhtml#ch03fig8))。
- en: '![image](Images/yuan_f03_08.jpg)'
  id: totrans-142
  prefs: []
  type: TYPE_IMG
  zh: '![image](Images/yuan_f03_08.jpg)'
- en: '**Figure 3.8** The JavaScript editor on the dapp tab'
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: '**图3.8** dapp标签页上的JavaScript编辑器'
- en: The JavaScript has several sections. The `/* Don't modify */` section is populated
    by the BUIDL tool. It contains code to instantiate the contract you just deployed
    via BUIDL. The contract instance and its operations are all defined in the `web3.js`
    library.
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: JavaScript有几个部分。`/* Don't modify */`部分由BUIDL工具填充。它包含通过BUIDL部署的合约的实例化代码。合约实例及其操作都在`web3.js`库中定义。
- en: The event handler for the Set Data button shows how to call the smart contract’s
    `set()` function in a transaction from JavaScript.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 事件处理程序展示了如何从JavaScript在交易中调用智能合约的`set()`函数。
- en: '[Click here to view code image](Images/ch03_images.xhtml#pro3_2)'
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: '[点击此处查看代码图片](Images/ch03_images.xhtml#pro3_2)'
- en: '[PRE2]'
  id: totrans-147
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: The event handler for the Get Data button calls the smart contract’s get() function
    and displays the result.
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 获取数据按钮的事件处理程序调用智能合约的get()函数并显示结果。
- en: '[Click here to view code image](Images/ch03_images.xhtml#pro3_3)'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: '[点击此处查看代码图片](Images/ch03_images.xhtml#pro3_3)'
- en: '[PRE3]'
  id: totrans-150
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: The `web3.js` library supports the JavaScript front end to make remote function
    calls against smart contracts deployed on blockchains.
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: '`web3.js`库支持JavaScript前端对部署在区块链上的智能合约进行远程函数调用。'
- en: In Action
  id: totrans-152
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 在行动中
- en: To run the dapp, click the **Run** button in BUIDL. You will see the dapp UI
    in the right panel. You can click the **Set Data** button to store a number, and
    you can click the **Get Data** button to retrieve the stored number. [Figure 3.9](ch03.xhtml#ch03fig9)
    shows the dapp in action.
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 要运行dapp，请在BUIDL中点击**运行**按钮。您将在右侧面板中看到dapp的UI。您可以点击**设置数据**按钮来存储一个数字，您可以点击**获取数据**按钮来检索存储的数字。[图3.9](ch03.xhtml#ch03fig9)显示了dapp在行动中。
- en: '![image](Images/yuan_f03_09.jpg)'
  id: totrans-154
  prefs: []
  type: TYPE_IMG
  zh: '![image](Images/yuan_f03_09.jpg)'
- en: '**Figure 3.9** Running the dapp in BUIDL'
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: '**图3.9** 在BUIDL中运行dapp'
- en: Now you have a dapp running on a public blockchain!
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 现在您已经在公共区块链上运行了一个dapp！
- en: Share Your Dapp
  id: totrans-157
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 分享您的dapp
- en: Since the Second State DevChain is a public blockchain, you can share your dapp
    with other people, and they will be able to access it, too. Just click the **Publish**
    button. BUIDL will package the application front end into a single HTML file and
    upload it to a public web site. Once it is done, BUIDL shows a Launched link ([Figure
    3.10](ch03.xhtml#ch03fig10)). Click that link to open the dapp web site. You can
    now share this link with anyone.
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 由于Second State DevChain是一个公共区块链，您可以与其他人分享您的dapp，他们也能够访问它。只需点击**发布**按钮。BUIDL会将应用程序前端包装成一个HTML文件并上传到一个公共网站。一旦完成，BUIDL将显示一个已发布的链接([图3.10](ch03.xhtml#ch03fig10))。点击该链接以打开dapp网站。现在您可以与任何人分享这个链接。
- en: '![image](Images/yuan_f03_10.jpg)'
  id: totrans-159
  prefs: []
  type: TYPE_IMG
  zh: '![image](Images/yuan_f03_10.jpg)'
- en: '**Figure 3.10** Publishing your dapp from BUIDL'
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: '**图3.10** 使用BUIDL工具发布您的dapp'
- en: You can also download and save the HTML file from that Launched link onto your
    local computer hard drive. You can put the HTML file on any web host and make
    it accessible to the world. There are many free services to host your HTML files.
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 您还可以从那个已发布的链接下载并保存HTML文件到您的本地计算机硬盘上。您可以将HTML文件放在任何网页托管服务上，并使其对全世界可见。有许多免费服务可以托管您的HTML文件。
- en: When users come to the web page to interact with your dapp, they will see a
    small gadget at the bottom of the page that allows the user to select her blockchain
    address ([Figure 3.11](ch03.xhtml#ch03fig11)). Note that all those addresses are
    automatically generated, and the selected address serves as the user’s on-chain
    ID.
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 当用户来到网页与您的去中心化应用（dapp）互动时，他们将看到页面底部的一个小工具，允许用户选择她的区块链地址([图3.11](ch03.xhtml#ch03fig11))。请注意，所有这些地址都是自动生成的，选中的地址充当用户的链上ID。
- en: You can also import your own address private key or use your address in MetaMask
    wallet.
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 您也可以导入自己的地址私钥或使用MetaMask钱包中的您的地址。
- en: '![image](Images/yuan_f03_11.jpg)'
  id: totrans-164
  prefs: []
  type: TYPE_IMG
  zh: '![image](Images/yuan_f03_11.jpg)'
- en: '**Figure 3.11** Managing addresses in the dapp'
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: '**图3.11** 在dapp中管理地址'
- en: As we mentioned, the Second State DevChain requires no gas, and all those addresses
    can have zero balance in cryptocurrency. In an enterprise environment, each user
    might have a unique address as an ID. In such environment, you might need to provision
    addresses and private keys for your authorized users.
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 如我们所提到的，Second State DevChain不需要燃料费，所有这些地址的加密货币余额都可以为零。在企业环境中，每个用户可能有一个唯一的地址作为ID。在这种环境中，您可能需要为您的授权用户提供地址和私钥。
- en: Conclusion
  id: totrans-167
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 结论
- en: In this chapter, I showed you how to create and deploy your first blockchain
    dapp using the BUIDL tool. The dapp you just built is compatible with the Ethereum
    protocol. In the next part, I will discuss the Ethereum protocol and its applications.
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我向您展示了如何使用BUIDL工具创建并部署您的第一个区块链dapp。您刚刚建立的dapp与以太坊协议兼容。在下一部分，我将讨论以太坊协议及其应用。
