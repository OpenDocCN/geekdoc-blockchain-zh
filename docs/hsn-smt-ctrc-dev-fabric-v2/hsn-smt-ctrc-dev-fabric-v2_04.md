# 第二章。 Hyperledger 项目和工具概述

前一章向您介绍了区块链的概念、其主要平台和术语。我们从讨论区块链的起源开始，然后讨论了其几个通用组件（包括共享账本、密码学、共识和智能合约组件），接着是其架构和支持技术。本章涵盖了 Hyperledger 项目和工具，第三章 则介绍了 Hyperledger Fabric 的架构和组件。总体而言，第一章 至 第三章 将为您提供 第 III 部分 所需的知识，该部分深入研究了使用 Hyperledger Fabric 进行智能合约开发。

本章主要针对那些对 Hyperledger 相对新手的人。主要目标是探索在 Hyperledger 下开发的项目和工具，并为您提供 Hyperledger 生态系统的必要知识和重要技术设计，以便我们可以通过真实用例应用这些技术。本章包含的材料将帮助您全面了解 Hyperledger，并且您可以将此高层概述用作利用每个 Hyperledger 项目的最佳指南。

作为提醒，要设计和部署 Hyperledger Fabric 区块链应用程序，您无需彻底了解此处讨论的所有工具和项目。只需将本章用作您在 Hyperledger 项目中更好导航的参考。除了我们深入介绍的 Hyperledger Fabric 和其他一些项目（Hyperledger Aries、Hyperledger Grid、Hyperledger Avalon 和 Hyperledger Besu）之外，本章不应被视为所有 Hyperledger 项目的权威指南。

对于那些已经对超级账本生态系统有很好了解的人来说，本章将是一个很好的“刮一下表面”的复习。或者，如果你愿意，可以直接跳到下一章，探索超级账本 Fabric 项目。

尽管我们在前一章简要回顾了区块链技术背后的历史，但在这一章中，我们将稍微扩展一下区块链的演进和阶段，然后深入研究超级账本家族的架构和生态系统。

本章将帮助您了解以下内容：

+   区块链技术演进的四个阶段

+   超级账本家族背后的架构和设计哲学

+   超级账本分布式分类帐技术，如 Indy 和 Sawtooth

+   超级账本家族中的可用工具

+   超级账本家族中的现有库

# 区块链技术的演进和阶段

自从诞生以来，区块链技术就吸收了诸如加密之类的在企业中日益流行的想法和组件。此外，对于安全、可扩展和可靠的自动化实践和解决方案的需求是新兴技术（如区块链）必须解决的主要挑战之一。事实上，21 世纪传统的企业业务运营正在进入一个新的自动化阶段。此外，全球范围内，新兴市场渴望采用具有自我调节潜力的技术。因此，区块链的出现及其演进在未来自我治理技术和自动化格局的形成中发挥着重要作用。

查看区块链技术进步的一种方法是将其演进划分为四代。让我们简要地了解一下从 1.0 到 4.0 的区块链代的情况。

## 区块链 1.0

最初的区块链一代诞生于像比特币这样的加密货币的出现。区块链技术的作用是通过允许人们依赖加密学而不是银行发送交易来改进现有的货币系统。在这一代区块链中，网络是点对点的、去中心化的、匿名的，同时又是透明的。然而，正如第一章中所讨论的，它的主要缺点是其使用的工作证明算法，这需要大量的挖掘。

## 区块链 2.0

区块链技术在 2015 年左右发生了转折，当技术创新者开始探索其无信任特性时，除了货币交易。这导致了以太坊平台的创建，带来了两个主要的创新：

+   使用其他数字资产作为其他去中心化项目的基础，除了加密货币。

+   智能合约的出现（如第一章中所讨论的）通过自动控制所有参与者的所有条件的执行来增加交易的安全性，同时自动化区块链中所有参与者的交易处理。

## 区块链 3.0

第三代区块链致力于改进其缺陷和不足之处，同时扩展其用例。例如，权益证明共识取代了工作证明。其他功能和功能被添加以提高区块链性能，并使其可被不同行业采用。例如，发明了联盟或跨链交易处理等区块链架构。同样，还引入了其他关于监管合规性和治理、隐私和智能合约的变化。

## 区块链 4.0

目前，专业人士对第四代区块链技术的确切特征或发展方向尚无一致看法。一些人认为它将与其他颠覆性技术如物联网或人工智能融合。而另一些人认为它应该沿袭前几代的做法，通过改进其特性使其更高效、可扩展并且更易于被广泛采用。

在发展过程中，区块链已经走过了一段很长的路程，成为了一种正在改变许多传统业务操作的新兴技术。因此，对先前几代的理解或区块链历史的了解将有助于我们预见其愿景和未来。最终，这项技术将在私营和公共领域的企业应用开发项目中找到自己的位置。

区块链的最新趋势更多地体现在私人区块链项目中，也被称为分布式账本技术。这些 DLT 项目通常基于三种常见用例：

资产的可追溯性

这些项目在分布式账本技术（DLT）系统内留下公证记录，使得这些信息备份且不可更改，以确保稍后可以访问的数据。这些数据可以公开展示，以确保某些敏感数据流入；直到现在，很少有透明度存在。这些项目还可以用于内部利用数据并改善公司内部流程。最终，你所希望的是记录下发生在实物或数字资产上的一系列事件。

数字身份

这个用例受每个国家或地区的法规约束。许多公司和政府希望数字化用户凭证，以增强用户数据安全性和隐私保护。这个用例涉及许多法律组成部分，并且有不同的方法来解决它。然而，数字身份解决方案应该在使用像超级账本（Hyperledger Fabric）这样的 DLT 的私有区块链网络上实现。越来越多的公司都在实施自主数字身份，希望通过混合基于数字证书的现有解决方案或使用已经开发的身份标准来获得法规的接受。这将是区块链上的主要项目之一。

数字货币

自以太坊出现以来，数字货币一直是主要的用例之一。它仍然是一个不断改进和演变的项目。Facebook 和 Telegram 等公司尝试构建基于数字货币的全新支付系统。这种新型货币的终结还没有到来；我们将继续看到新的实施，因为银行和政府肯定会最终利用这项技术进行货币目的的使用。

# 超级账本家族、架构和生态系统

正如我们在上一章中介绍的，超级账本项目是由非营利性的 Linux 基金会发起的，作为一个协作（开源）平台，用于设计和构建分布式账本应用程序。后来，该平台在大型私营公司（如 IBM 和 Accenture）的支持和认可下逐渐赢得了动力和声誉。

Hyperledger 在私营企业中的采用和受欢迎程度源于几个因素。最显著的是其针对私有交易设计良好的架构以及处理大规模数据集的多账本结构。例如，在以太坊中，网络上的每个节点都持有相同的数据，但在 Hyperledger Fabric 中，节点可能携带不同的数据，这取决于交易的性质和业务要求。此外，Hyperledger Fabric 允许网络成员子集之间共享私有数据，这非常适合企业业务应用。截至目前，一些 Hyperledger 工具和框架处于孵化阶段，而另一些则已经处于活跃状态。

Hyperledger 包含 16 个项目，分为四个类别：分布式账本、工具、库和领域特定项目。我们稍后在本章中详细审查这 16 个项目。要全面了解各个项目及其最新更新或新闻，请访问 Hyperledger 项目网站 [www.hyperledger.org](http://www.hyperledger.org)。

## Hyperledger 的设计理念

在讨论 Hyperledger 框架如何工作之前，了解 Hyperledger 的基本理念会很有帮助。Hyperledger 项目已经融合了几个原则，这些原则对满足多样化的业务需求至关重要。

### 模块化架构

使用 Hyperledger 构建的区块链应用程序使用多个组件，如策略、共识和链码。这种模块化架构允许这些组件之间有效地通信，同时使开发者社区能够独立维护每个组件。

### 极其安全

由于存储在区块链应用程序上的数据是不可变的，因此与其他应用程序相比，它需要更高级别的安全性。此外，Hyperledger 的企业性质，其中可以在其区块链节点中存储多个分类帐，要求具有超高级别的安全性。因此，Hyperledger 从一开始就考虑了这些安全性方面的问题进行设计和开发。事实上，Hyperledger 安全专家团队定期审核和审查安全协议和程序，以满足网络安全景观不断变化的要求。

### 互操作性

Hyperledger 的互操作性功能是一个独特的功能，允许其应用程序连接并与建立在其他平台（如以太坊）上的区块链应用程序和网络进行交互。事实上，即使在 Hyperledger 项目内部，您也可以使用此互操作性将一个 Hyperledger 项目连接到另一个项目。

### 非加密货币架构

Hyperledger 的架构不包括像比特币那样的加密货币代币。自其创立以来，Hyperledger 的设计是用于企业应用程序开发，而不是用于持有和管理加密货币的地方。

### 应用程序编程接口

随着当前云端和新兴技术（如人工智能）的快速发展，企业区块链应用程序必须具备丰富的 API，以与现有系统进行通信和数据交换。事实上，在企业区块链开发中，作为链上和链下数据之间桥梁的 API 是常见的。为了保持领先地位，Hyperledger 下的每个项目都将丰富的 API 嵌入其架构中。API 功能本身正在推动 Hyperledger 在开发者社区中的流行度和采用率。

有关这些功能的更多详细信息，请参阅官方 Hyperledger 网站和出版物。现在让我们来看看 Hyperledger 框架的工作原理。

## Hyperledger 概述

Hyperledger 提供了几个重要的组件。在这里，我们将简要讨论 Hyperledger 的八个业务区块链组件。

### 共识层

Hyperledger Fabric 中的共识层随时间进行了各种修改。首先是 Solo 模式，然后是 Kafka 模式以及 Apache ZooKeeper 将 Fabric 网络投入生产，现在 Raft 最终出现以取代 Kafka 和 ZooKeeper。这一最新变化为 Fabric 部署带来了更大的权力和简单性，并使区块链技术变得更加可行。这对 Hyperledger 团队来说是一个成功。

### 智能合约层

智能合约，与共识一样，在 Hyperledger 的路线图中不断发展。起初，在 Fabric 中没有关于支持的语言的明确定义。例如，Fabric 开发者社区移除了 Java，然后又重新包含了它。现在开发者还包含了 TypeScript 语言。在先前的 Fabric 版本中，链码的安装相当集中化。Hyperledger Fabric v2 引入了新的治理机制，允许以更分散的方式进行 Fabric 安装。我们在 第九章 中更详细地讨论了这个话题，在那里你将了解有关 v2 中引入的新功能的更多信息。

### 通信层

同行之间的通信是所有区块链中最敏感的部分之一，尤其是为了避免中间人的攻击。因此，在许多情况下建议使用 Fabric 提供的传输层安全性（TLS）配置，作为通信中的另一个安全点。

### 数据存储抽象

在 Fabric 中存储数据的方式很特别。我们可以将数据存储在 Apache CouchDB 中，或者默认情况下存储在 LevelDB 中（你可以在 第九章 中了解更多）。CouchDB 拥有比 LevelDB 更多的功能，并支持以下功能：

+   更多的编程语言，包括 Ruby 和 PHP

+   API 和其他访问方法，如 RESTful HTTP/JSON API

+   多源复制和源-复制复制方法

### 加密抽象

Fabric 在其运作中使用的加密非常复杂，并且在网络组件之间的整个调用流程中完美运作。在这些加密算法中，我们可以找到 ZKP，正如在第一章中讨论的那样，它允许在 Fabric 网络中验证区块链交易同时保持用户匿名性。Fabric 还使用另一种加密协议称为*身份混合器*来保护用户在签名、认证和转移认证属性时的隐私。

### 身份服务

Fabric 提供的身份服务基于相当可配置的证书颁发机构（CA）架构。通常，建议使用根 CA，然后管理证书的中间 CA。如果这还不够，Hyperledger 还允许将所有这些证书的管理都通过连接到 CA 的硬件安全模块（HSM）进行。

### API

在我们看来，API 是 Fabric 的基本组成部分之一，因为它是区块链数据向外部世界开放的地方。直观和方便的 Fabric SDK 用于将区块链与任何外部数字化系统相互连接。Fabric 在 Node.js、Go 和 Java 中都有 SDK，并且有相当完整的文档。

### 互操作性

由于 Fabric 不断发展，我们需要在多个版本的 Fabric 网络之间进行互操作。这是 Fabric 的开发人员决定保持的一个特性，它为项目提供了更大的连续性。

现在让我们看看我们如何利用 Hyperledger 生态系统来解决现实世界的业务问题。在接下来的两节中，我们将介绍 Hyperledger 项目、工具和库。

# Hyperledger 项目概览

由于超级账本得到开源社区的强力支持，新项目定期加入生态系统。在撰写本文时，有六个项目处于活跃状态，另外十个项目处于孵化阶段。每个项目都有独特的优势。如 表 2-1 所列，超级账本项目分为四种类型：分布式账本（或框架）、库、工具和领域特定项目。

表格 2-1\. 超级账本项目与类型^(a)

|  |  | 项目类型 |  |
| --- | --- | --- | --- |
|  | 项目名称 | 分布式账本 | 库 | 工具 | 领域特定 | 状态 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | 超级账本 Indy | X |  |  |  | 活跃 |
| 2 | 超级账本织物 | X |  |  |  | 活跃 |
| 3 | 超级账本阿瑞斯 |  | X |  |  | 活跃 |
| 4 | 超级账本伊洛哈 | X |  |  |  | 活跃 |
| 5 | 超级账本锯齿 | X |  |  |  | 活跃 |
| 6 | 超级账本贝苏 | X |  |  |  | 活跃 |
| 7 | 超级账本披风 |  | X |  |  | 孵化 |
| 8 | 超级账本 Ursa |  | X |  |  | 孵化 |
| 9 | 超级账本交易 |  | X |  |  | 孵化 |
| 10 | 超级账本仙人掌 | X |  |  |  | 孵化 |
| 11 | 超级账本测量器 |  |  | X |  | 孵化 |
| 12 | 超级账本 Cello |  |  | X |  | 孵化 |
| 13 | 超级账本 Explorer |  |  | X |  | 孵化 |
| 14 | 超级账本网格 |  |  |  | X | 孵化 |
| 15 | 超级账本埋葬 | X |  |  |  | 孵化 |
| 16 | 超级账本阿瓦隆 |  |  | X |  | 孵化 |
| ^(a) 基于 2021 年 8 月超级账本网站上的信息。 |

本节介绍了分布式分类账类别中的七个 Hyperledger 项目。此外，我们简要解释了 Hyperledger Grid，这是一个用于构建区块链供应链的领域特定项目。“Hyperledger 工具和库概览” 涵盖了剩余的两个 Hyperledger 项目类别。

## 分布式分类账框架

有七个项目是用 Hyperledger 构建区块链分布式分类账的框架。这些框架项目旨在提供用于构建各种分布式分类账及其组件的平台。Hyperledger 旗下的每个项目都有自己的实现，如本节简要讨论的那样。

### Hyperledger Indy

一个名为 Sovrin Foundation 的非营利组织最初开发 *Hyperledger Indy* 作为个人持有并与他们想要分享身份的手段。随着身份管理的日益普及，特别是在区块链用例中，Hyperledger Indy 势头增强，成为管理身份的分散式平台。它提供了在区块链网络或其他分布式分类账系统上进行数字钱包管理所需的工具和功能。例如，互联网用户可以使用存储在 Indy 中的单一持久认证（用户名和密码）来访问和使用互联网上的所有站点。

### Hyperledger Fabric

如本书深入介绍的那样，*Hyperledger Fabric* 目前是 Hyperledger 旗下最受欢迎且被广泛采用的项目。Fabric 拥有像对等体、智能合约和通道这样的模块化组件，使其适用于构建和管理多帐本企业级区块链应用程序。其智能合约可以用多种语言编写（详见 第四章）, 如 Go、JavaScript 和 Java。

超级账本的架构允许多家公司加入并作为一个贡献系统进行交易。同样，随着业务需求的增长，公司可以成为多个贡献系统的成员。事实上，政策是 Fabric 中最强大的组件之一；这些政策具有配置，允许简单的（由两个成员组成）和复杂的（由多个贡献系统，每个系统具有多个成员）区块链网络运作。

请注意，由于本书是关于超级账本 Fabric，我们将在下一章深入介绍它的框架、架构和组件。

### 超级账本 Iroha

*超级账本 Iroha* 最初由一群日本开发者用 C++ 构建，用于一些移动使用案例。与 Indy 类似，Iroha 管理由身份和数字资产组成的数字钱包。此外，它提供基于角色的身份验证，用于访问和控制数字凭证。

### 超级账本 Sawtooth

最初由英特尔开发，*超级账本 Sawtooth* 具有先进的基于经过时间的证明的共识算法，可以利用最少的资源来定位一个庞大的分布式验证者群体。不同于 Fabric，Sawtooth 具有去中心化的排序服务：Fabric 只有一个负责接受所有交易并将它们添加到区块的中心化 orderer 节点，而 Sawtooth 网络中的每个节点都可以处理和批准交易，然后将其添加到区块链网络中。此外，Sawtooth 支持私有网络和无权限网络。通过与超级账本 Burrow 的集成，Sawtooth 支持以太坊虚拟机。

### 超级账本 Besu

以 Java 编写的*Hyperledger Besu*可以在以太坊公共网络和私有区块链网络上运行。其主要特点之一是支持多种共识算法，如工作证明、权威证明和伊斯坦布尔拜占庭容错。其先进的权限方案特别适用于企业联盟应用中看到的大规模过渡处理。

Besu 遵循企业以太坊联盟（EEA）的规范和要求。简言之，EEA 规范了以太坊网络内公共和私有应用程序之间的交互。通过遵循 EEA 指南和常见接口协议，Besu 使得在 Hyperledger 内部私有和公共区块链应用程序之间的通信成为可能。我们在第十章中详细阐述了 Besu。

### [Hyperledger Cactus](https://wiki.example.org/hyperledger_cactus)

受商业界对现有区块链平台生命周期以及企业能否在不可避免地变化的技术环境中运作的担忧所驱使，*Hyperledger Cactus*应运而生。尽管它仍处于孵化阶段（作为一个 Apache v2 许可的开源项目），但 Cactus（前身为区块链集成框架）能够安全地连接区块链网络，使账本操作的执行在多个区块链网络之间是可插拔的。基于其 SDK 的这种可插拔性为来自不同网络的开发人员提供了将其 DLT 连接到 Cactus 的机会。

### [Hyperledger Burrow](https://wiki.example.org/hyperledger_burrow)

*Hyperledger Burrow* 部分基于 EVM 规范而创建，旨在提供一个有权限的智能合约解释器，用于在私有虚拟机上执行 EVM 和其他（例如，WebAssembly）智能合约。使用 PoS 作为其共识算法，Burrow 能够实现交易最终性以及高交易吞吐量。它的另外两个值得注意的特点是链上治理，成员可以投票决定智能合约的自我治理升级；以及在低级别（例如，每个账户）设置代码执行权限。

## 领域特定

现在我们已经审查了 Hyperledger 的所有框架项目，我们通过简要概述 Hyperledger Grid 来结束本节，这是唯一的领域特定项目。

### [Hyperledger Grid](https://wiki.example.org/hyperledger_grid)

随着供应链数据正在成为区块链的重要用例，它正在吸引 Hyperledger 社区和区块链开发人员的注意，以提出一个能够解决供应链解决方案的框架。*Hyperledger Grid* 将技术、框架和库集成在一起，同时允许开发人员决定哪个组件最适合其行业和市场需求。Grid 支持 WebAssembly 智能合约引擎，提供内部和外部 Hyperledger 集成。关于供应链交易，Grid 支持资产的转换、交换和跟踪。

# Hyperledger 工具和库概述

在前一节中，我们简要回顾了用于构建区块链分布式账本的七个 Hyperledger 框架项目。在本节中，我们继续探索两个类别中的剩余项目：工具和库。

## 工具

工具项目提供了一套工具，使得与区块链网络的工作更加简单。这些工具处理的任务包括性能测量、按需部署以及使用现有商业模型构建商业网络。以下是四个关键的 Hyperledger 工具项目。

### Hyperledger Caliper

*Hyperledger Caliper* 是一个用于衡量区块链性能的基准测试工具，使用 JavaScript 编写。Caliper 提供了多个性能指标来衡量交易吞吐量，如每秒总交易数或交易延迟。建议与 Fabric 等其他 Hyperledger 分布式账本一起使用 Caliper，特别是对于企业项目，因为它为开发人员提供了系统改进的客观指标。

Caliper 是在 Hyperledger 项目中（甚至在 Quorum 或以太坊项目中，因为它也支持这些类型的区块链）使用的最重要的工具之一。它提供了连接到各种区块链的连接器，这赋予了它巨大的力量和可用性。

### Hyperledger Cello

*Hyperledger Cello* 将按需部署模型带入区块链，使用 Go 语言编写。Cello 允许区块链从业者更有效地管理他们的区块链。例如，使用 Cello，可以自动化网络生命周期的管理。同样，系统管理员可以使用 Cello 管理其网络的自定义配置。从实施的角度看，开发人员可以使用 Cello 轻松构建区块链服务解决方案。简而言之，它是所有 Hyperledger 系统管理员的极佳资源。

### Hyperledger Explorer

虽然已被弃用，*Hyperledger Explorer* 最初被用作一个网络用户界面（UI）仪表板，用于查看和管理区块链交易以及网络信息。它支持诸如查询区块，以及在区块中调用或部署交易的任务。Explorer 在非开发人员和那些希望在不编写代码或使用命令行界面的情况下管理 Hyperledger 应用程序和网络的人群中很受欢迎。

### Hyperledger Avalon

之前被称为受信计算框架，*Hyperledger Avalon* 通过将链上处理任务移至计算能力庞大的离链系统来解决涉密和可扩展性问题。虽然仍处于孵化阶段，如果在区块链中实施，Avalon 将监视和跟踪离链交易。这将导致更好的交易策略执行和更透明的交易审计。一旦离链计算能力与信任结合，开发者可以提高生产力并增强数据隐私。Avalon 的一个有趣特性是其能够管理工单生命周期，从注册工作者到提交和完成订单。我们在第十章详细介绍了 Avalon。

## Libraries

以下是四个关键的 Hyperledger 库。

### Hyperledger Aries

*Hyperledger Aries* 是一个应用程序（不是区块链），用于通过可验证的凭证管理数字钱包，以便可以共享和重用。其点对点架构使得基于区块链的数据能够在多个区块链网络或分布式分类账技术之间共享和通信。除了管理秘密和交换可验证数据外，Aries 允许区块链中的各方通过其点对点消息系统安全地交换机密信息。第十章更详细地介绍了 Aries。

### Hyperledger Quilt

虽然它目前处于孵化阶段，*Hyperledger Quilt* 可以充当账本系统之间的中介，执行企业级的跨账本协议（ILP）交易。ILP 通过连接分布式账本并允许跨账本支付处理，调节和管理跨多个支付网络的支付。ILP 的理念借鉴自互联网协议，因为每个节点或连接器都可以在独立网络之间路由资金或资产的数据包。

### Hyperledger Ursa

*Hyperledger Ursa* 的主要目的是通过充当加密数据的共享库来提升区块链网络的安全性，从而防止人们做重复的加密工作。Ursa 目前处于孵化阶段；然而，它具有两个有趣的特点。首先，Ursa 在多个平台之间是可互操作的，因为加密验证涉及到每个平台端的相似协议。其次，Ursa 通过在多个网络之间共享公共组件实现了模块化，最终导致了更加模块化的 DLT 架构和采用情况。

### Hyperledger Transact

*Hyperledger Transact* 是一个了不起的库，用于执行智能合约的交易，无论该合约是为哪个平台编写的。如果实施得当，Transact 将能够集成像 WebAssembly 这样的智能合约技术。虽然它目前处于孵化阶段，但 Transact 将带来智能合约开发的范式转变，因为开发人员将能够使用一种语言构建智能合约，并同时部署到多个平台。

具体来说，能够在不依赖于平台的情况下执行智能合约的能力为协作、账本实现和源代码重用创造了许多机会。智能合约是区块链平台的核心，通常需要大量的开发时间和精力。通过使用 Transact 作为智能合约执行的统一接口，公司和开发人员可以缩短其开发和产品生命周期。

# 总结

本章首先回顾了区块链的演变和阶段，然后讨论了超级账本生态系统的设计哲学、核心组件和架构。您已经了解了各个版本或代的区块链是如何促进其在私营和公共部门的采用的。您还了解了嵌入在超级账本架构中的八个关键组件（共识层、智能合约层、通信层、数据存储抽象、加密抽象、身份服务、API、互操作性），使其成为构建企业许可区块链应用的首选。

我们还简要回顾了超级账本生态系统中的所有 16 个项目（包括六个活跃项目和十个处于孵化阶段的项目）。最后，我们通过将它们分类为分布式账本、库、工具和特定领域项目，突出了所有 16 个项目的独特优势和各种功能。

下一章将扩展超级账本（Hyperledger Fabric）的架构和组件，为您在第四章及以后构建超级账本应用做准备。
