# CHAPTER 6

安全区块链设计的考虑因素

区块链系统在区块链生态系统的每个层面都面临安全威胁。从底层的密码学到的在分布式账本上运行的智能合约，都可能以各种方式遭受攻击。

然而，并非所有的区块链都平等，也不是都同等容易受到攻击。在本章中，我们探讨了设计区块链系统时需要考虑的一些关键因素，包括区块链的类型、隐私和安全增强，以及法律和监管方面的考虑。## 区块链类型

比特币，原始的区块链，被设计成一个对所有人开放、完全去中心化的平台。任何人都可以创建一个比特币账户，所有账户都能参与区块链运作的各个方面，比如账本存储和区块生成。

自从比特币出现以后，基于相同底层技术的新区块链模型不断涌现，但与完全去中心化的理念略有偏离。现在，区块链可以被划分为公共与私有，开放与受许可两种类型。

### 公共与私有

像比特币和以太坊这样的公共区块链被设计成全球可访问，允许任何人创建区块链账户。然而，这种模式并不适合所有应用场景，特别是对于那些希望利用区块链技术进行内部运作的组织。

公共区块链与私有区块链的区别在于谁有权力在区块链平台上创建账户和生成交易。公共区块链是开放的，而私有区块链仅对某些授权用户或特定网络或系统开放。

#### **公共区块链与私有区块链的优劣**

公共区块链和私有区块链各有优缺点，因此它们各自更适合不同的应用场景。以下是一些公共区块链平台的优点：

+   **匿名性：**在公共区块链上，无需确定用户是否有权使用该平台。这使得可以拥有匿名账户，其中身份管理和认证基于对账户私有密钥的了解。

+   **去中心化：**公共区块链允许任何人创建账户，导致用户基数更大，去中心化程度更高。另外，只限制授权用户访问，这对于私有网络是必要的，但这需要一个许可或拒绝访问的系统，这可能造成单点故障。

+   **弹性：**公共区块链通常比私有区块链更大、更分布式。这提供了一个更大的弹性程度，因为网络攻击、自然灾害和其他 disruptive 事件不太可能影响区块链网络中的所有节点。

私有区块链通常对于企业用例是一个更好的选择。以下是私有区块链提供的一些好处：

+   **访问管理**：私有区块链允许组织管理谁有权访问区块链系统。这为存储在区块链上的数据和功能提供了更大的控制。

+   **数据隐私**：在公共区块链上，所有用户都可以完全查看分布式账本上的交易。私有区块链允许组织限制对账本上存储的数据的访问。

+   **效率**：私有区块链通常比公共区块链要小。因此，它们具有更少的冗余和低效。

+   **合规性监管**：数据保护法规通常要求组织控制对敏感数据的访问并以其特定的方式保护数据。在私有区块链中实现这一点更为容易，因为组织对网络有完全的控制权。### 开放与受许可

除了公共和私有区块链之间的区别，还可以根据授予各种用户的权限来区分区块链。例如，开放区块链将用户账户置于平等的基础上，任何账户都可以做任何事情，而受许可的区块链为某些账户授予特殊权限。

#### **开放与受许可区块链的好处**

开放和受许可的区块链都有其优点和缺点。以下是开放区块链的一些好处：

+   **去中心化**：开放区块链允许任何节点参与区块链所有方面的操作。这比私有区块链提供了更大的去中心化，在私有区块链中，只有节点的一部分可以执行某些功能。

+   **简化**：实现多个权限级别需要额外的复杂性，以防止访问控制被绕过。开放区块链通常比受许可的区块链更简单，这降低了设计或实施错误的可能性。

+   **用户隐私**：受许可的区块链可能需要了解用户的真实世界身份以分配适当的权限。开放区块链允许匿名账户，这保护了用户隐私。

在区块链中建立权限和特权具有以下优点：

+   **访问管理**：受许可的区块链允许组织在区块链中建立访问控制。这提供了对用户访问和权限更大的控制。

+   **数据控制**：开放区块链允许所有用户完全访问区块链的所有方面。受许可的区块链使基于权限级别限制访问成为可能。

+   **合规性监管**：数据保护法规通常要求组织控制对受保护数据的访问。受许可的区块链使这一点更容易在区块链上实施。### 选择区块链架构

区块链可以是公共与私有、开放与受控的任意组合。例如，企业以太坊联盟（EEA）支持部署以太坊区块链的私有实例。其他公共区块链包括在公共可访问的区块链中具有主节点或其他特权账户。

为给定应用程序选择正确的区块链类型取决于用例和各种安全权衡。在某些情况下，开放和公共区块链的增加去中心化和弹性可能值得在账本上公开潜在敏感信息的更大暴露。在其他情况下，监管要求可能要求对敏感数据进行严格控制，此时只有私有和受控的区块链才是可行的选择。  ## 隐私和安全增强

区块链技术最大的批评之一就是缺乏隐私。区块链的设计意味着每笔交易的来源、目的地和金额都是公开可见的。

然而，通过使用额外的加密算法，可以隐藏所有这些信息，并在不破坏区块链的去中心化以及节点在验证交易之前接受交易的能力的情况下，提高用户的隐私。像门罗币这样的隐私币使用零知识证明、匿名地址和环签名来隐藏区块链交易的金额、目标和来源。

### 零知识证明

零知识证明（ZKP）是一种允许某人证明知道一个秘密而不透露秘密本身的结构。例如，想象你想要向一个有色盲的朋友证明两个看似相同的球实际上是同一颜色，而不透露哪个球是哪个颜色。

为此，你可以给两个球都给朋友，让他们藏起来不让你看见。然后他们会向你展示一个球，再藏起来，然后再展示一个球。这样做之后，他们会问这两个球是否是同一个。

如果球确实是不同颜色的话，你可以完美地准确区分它们。如果不是，猜对的概率是 50%。通过多次重复这个过程，可以降低重复幸运猜测的概率到统计上不可能，证明球确实是不同颜色的。然而，即使经过无限多次试验，朋友仍然不知道哪个球是哪个颜色。

零知识证明（ZKP）可以用于各种目的，例如证明密码的知识。在区块链上，ZKP 可以证明特定账户具有执行交易所需的余额，而不透露交易或账户余额。这使得通过区块链节点实现去中心化交易验证的同时，提高了区块链上的数据隐私成为可能。  ### 匿名地址

在区块链上，每一笔交易的源地址和目标地址都是公开可见的。这使得交易的去中心化验证成为可能，因为一个交易中收到的价值将用于资助稍后的一个交易。验证一个账户是否拥有执行交易所需的必要余额需要回溯这些过去的交易。

隐形地址是用于在区块链上接收交易的单次使用地址。这些单次使用的地址源自用户地址，地址的所有者可以从其私钥中导出这些地址的私钥。这使得他们能够从这个地址数字签名交易。

隐形地址提高了隐私性，因为它使得攻击者无法确定一个隐形地址与用户账户相关联。同样，也无法确定是否两个发往不同隐形地址的交易是发送给同一个用户。然而，区块链节点可以验证交易，因为来自这些单次使用地址的交易将用适当的私钥数字签名。###环签名

隐形地址保护了交易接收者的身份。环签名给交易发送者提供了一定程度的匿名性。

区块链使用数字签名来验证交易的真实性。然而，验证数字签名需要与账户关联的私钥的公钥。这揭示了交易签署者的身份。

环签名使得作为一组数字签名数据成为可能。环签名使得用户能够生成一个数字签名，验证签署者是某一组公钥的所有者之一，而无需透露是哪一个。

环签名之所以有效，是因为它需要掌握一组公钥以及与这些公钥相关联的私钥之一。由于公钥是公开的，并且与数字签名一起公布，用户很容易收集一组诱饵公钥用于环签名。然而，由于还需要私钥，环签名验证了签署者是该组的一员。##法律和监管合规

从小型初创公司到大型企业，区块链技术已经引起了企业的广泛关注。区块链的设计及其提供的独特优势为传统的商业运作方式提供了有希望的替代方案。

然而，对于希望采用区块链技术的公司来说，将其与他们的法律和监管责任对齐是一个重大挑战。近年来，随着欧盟通用数据保护条例（GDPR）的通过和实施，监管环境发生了迅速演变，激发了其他司法管辖区制定类似法律。

区块链技术有许多好处，甚至在某些监管合规方面也可能是一个资产，这归功于其不可篡改的数字账本。然而，由于各种原因，区块链也可能成为合规问题的来源：

+   **数据控制**：数据隐私法律通常要求组织证明对其受到法律保护的数据拥有控制权。对于公共区块链，一旦交易广播到区块链网络，组织就放弃了一切控制权。

+   **数据隐私**：区块链的数字账本旨在透明，以实现去中心化的交易验证。这与组织保护某些数据私有的责任相冲突。

+   **加密要求**：法规要求使用强加密保护数据。区块链账本的不可篡改性和区块链平台可能的寿命可能意味着，如果加密算法被破解，敏感数据将暴露。

+   **不可篡改的账本**：区块链的数字账本被设计为不可篡改的。这与 GDPR 和类似法规的要求相冲突，这些法规要求在数据不再用于其原始目的时删除某些数据。

+   **司法管辖区边界**：一些法规，如 GDPR，限制其成员数据的某些司法管辖区边界内的传输。许多区块链具有全球足迹，这意味着区块链交易中的敏感数据可能会跨越这些边界。

+   **监管变化**：监管要求正在迅速变化，因此符合当前要求的实施在未来可能会变得不符合要求。区块链的去中心化、账本的不可篡改性等因素可能使适应不断变化的要求变得困难。

区块链技术有潜力在各种指标上大幅改进企业流程。然而，并不是所有情况下基于区块链的系统都是正确的工具，并且安全、监管和法律影响都是在考虑基于区块链的解决方案时的重要因素。

区块链技术正在快速发展，仍处于初级阶段。目前，无法预测哪些智能合约平台将获得主流采用，以及区块链是否只是一个过眼云烟，或是未来技术的基础。

随着区块链技术的发展，区块链安全也在进步。一些攻击和漏洞可能随着技术的变革和新攻击的出现而变得过时。例如，本书第一章中的内容早于后面章节案例研究中提到的许多攻击。

没有任何书籍能全面描述所有可能的区块链漏洞和攻击向量，但希望这本书提供了开始所需的基础和背景知识。为了跟上最新的漏洞和黑客攻击，请查看区块链平台的漏洞页面、新闻以及社交媒体。
