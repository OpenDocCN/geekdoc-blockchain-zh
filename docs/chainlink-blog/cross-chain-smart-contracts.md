# 什么是跨链智能合约？

> 原文：<https://blog.chain.link/cross-chain-smart-contracts/>

跨链智能合约是分散式应用程序，由部署在多个不同区块链网络上的多个不同智能合约组成，这些智能合约通过互操作创建一个统一的应用程序。这种新的设计模式是多链生态系统发展的关键一步，有可能创造全新类别的智能合约用例，利用不同区块链、侧链和第 2 层网络的独特优势。

在本文中，我们探讨了多链生态系统的兴起，概述了现有多链智能合约策略的优势和挑战，并解释了跨链智能合约如何在如何创建基于区块链的分散式应用程序方面呈现范式转变。然后，我们看看跨链智能合约解锁的一些创新用例，并概述 [跨链互操作性协议](https://blog.chain.link/introducing-the-cross-chain-interoperability-protocol-ccip/)【CCIP】如何通过实现区块链之间的安全跨链通信来帮助促进这种过渡。

## 多链生态系统的兴起

历史上， [智能合约](https://chain.link/education/smart-contracts) 的采用主要发生在以太坊主网上，因为它是第一个支持完全可编程智能合约的区块链网络。除了其先发优势，其他因素也有助于以太坊的采用，如其不断增长的网络效应，分散的架构，久经考验的工具，以及广泛的 Solidity 开发人员社区。然而，随着时间的推移，对以太坊智能合约的需求不断上升，导致网络交易费用增加，因为对以太坊的块空间(计算资源)的需求超过了供应。虽然以太坊主网继续为智能合同执行提供最安全的网络之一，但许多最终用户已经开始寻求更低成本的替代方案。

作为回应，为了满足用户和开发人员的需求，在过去的一年中，在备选的第一层区块链、侧链和 [第二层汇总](https://blog.chain.link/arbitrum-and-chainlink-fair-sequencing-services/) 上智能合同的采用迅速增加。曾经只是一个理论，多链生态系统现在是一个明确的现实，正如 DeFi 生态系统的 [总价值锁定](https://defillama.com/chains) 在各种链上环境中日益多样化所证明的那样。其他链上指标，如每日活跃地址、交易计数和网络带宽消耗，也清楚地显示了多链生态系统的增长。

![The Multi-Chain DeFi Ecosystem](img/d9af2f6d5de4a75017edc00bc24e4250.png)

<figcaption id="caption-attachment-3275" class="wp-caption-text">The growth of the multi-chain DeFi ecosystem over time.</figcaption>



新的链上环境的可用性增加了智能合约经济整体的总吞吐量，导致更多用户能够以更低的成本进行交易。此外，每个区块链、侧链和第 2 层网络都提供了自己的可伸缩性、分散化、机制设计、共识、执行、数据可用性、隐私等方法。在多链生态系统中，所有这些不同的方法都可以并行实施和经受考验，以推动生态系统的发展。

以太坊社区已经接受了多链方法，通过部署各种 [第二层扩展解决方案](https://l2beat.com/) ，采用以 [汇总为中心的路线图](https://ethereum-magicians.org/t/a-rollup-centric-ethereum-roadmap/4698) 来扩展以太坊生态系统的吞吐量就是证明。第二层网络增加了基于以太坊的智能合约的交易吞吐量，从而降低了每笔交易的费用，同时保留了以太坊主网的安全属性。这是通过使用欺诈证明或有效性证明在以太坊基础层区块链上验证链外计算来实现的，并且在未来，还利用数据分片来扩展累积呼叫数据的容量。

为了利用多链生态系统，许多开发人员现在越来越多地跨多个网络部署他们现有的智能合约代码库，而不是只在一个区块链上部署。通过开发**多链智能合同，项目已经能够扩大他们的用户群，并在成本较低的网络上试验新功能，否则这些功能会因成本过高而无法实现。多链方法在众多 DeFi 垂直行业中越来越常见:例如，SushiSwap DEX 部署在 15 个链上，Beefy Finance 收益率聚合器部署在 12 个链上，Aave 货币市场部署在 3 个链上。**

 **### 多链智能合约的局限性

虽然多链生态系统为用户和开发人员提供了许多好处，但是在多个区块链上部署相同的智能合约代码会带来许多独特的挑战和权衡。

首先，多链智能合约代码在另一个区块链网络上的每次新部署都会创建应用程序的全新副本，这意味着它不再是一个单一的统一应用程序。相反，每个合同部署管理自己的内部状态(例如，跟踪帐户余额)，不同区块链环境上的部署之间的互操作性有限或完全不存在。虽然用户可以在他们首选的网络上访问应用程序的副本，但用户体验在各个链之间不一定相同。

![Multi-chain smart contracts](img/8309c51e645fa192450dbad6b2a41564.png)

<figcaption id="caption-attachment-3276" class="wp-caption-text">Multi-chain smart contracts are dApp deployments that are isolated in nature.</figcaption>



这种动态在分散式交易所最为明显，特别是采用多链方式的自动做市商[](https://blog.chain.link/challenges-in-defi-how-to-bring-more-capital-and-less-risk-to-automated-market-maker-dexs/)(AMMs)。因为在任何给定的时间点，用户的资产只能存在于一个区块链上，所以应用程序中的流动性作为一个整体在不同的链上环境中变得分散。其结果是每个单独部署的流动性降低，导致用户的滑点增加，交易费用降低。此外，AMM 在另一个区块链上的每次部署都是从零流动性开始的，如果将流动性挖掘程序扩展到新部署作为引导流动性的方式，这可能会导致协议的本机令牌被更高程度地稀释。

任何需要应用程序状态的单一真实来源的应用程序，例如具有中央注册中心的链上域名系统，都很难以多链方式实现。如果在多个区块链部署了多个注册管理机构，那么同一个名称可能会在不同的链上被不同的所有者注册多次，从而导致冲突。因此，需要全局一致性状态的应用程序通常只部署在一个区块链网络上。

除了应用层面的挑战，多链生态系统还会增加最终用户的摩擦，他们可能需要学会与越来越多的网络互动。鉴于特定区块链上持有的资产只能在该区块链本地的 dapp 中使用，如果用户想要在其他链上环境中使用 dapp，则需要跨区块链手动桥接他们的令牌。这不仅涉及重新配置他们的钱包，学习新的 UX 模式，并管理额外的基础层令牌，但也可能需要在安全性上妥协，因为许多传统的跨链令牌桥有安全限制。

最终，多链智能合约的基本约束是不同区块链、侧链和第 2 层网络上的部署之间的互操作性有限或缺乏。虽然令牌桥的存在是为了支持多链应用程序，但在区块链之间安全传输数据的能力为如何构建智能合约开辟了一个全新的设计范例。

## 引入跨链智能合约

安全的跨链通信——在链上环境之间传输任意数据、令牌和命令——支持创建 **跨链智能合约** 。跨链智能合约是分散的应用程序，由不同区块链网络上的独立智能合约组成，它们相互通信以创建单个统一的应用程序。

![Cross-chain smart contracts](img/50f0139fae536c3f4475bbd8de5b852c.png)

<figcaption id="caption-attachment-3277" class="wp-caption-text">Cross-chain smart contracts are a unified dApp with logic on different blockchains.</figcaption>



虽然这可以通过不同的方式来实现，但在基本层面上，跨链智能合约设计范例使开发人员能够将其应用程序拆分成模块化的组件。本质上，不同链上的不同智能合约执行不同的任务，但都保持同步，并致力于支持单个用例。这使得开发人员能够利用不同的区块链网络来获得独特的好处:例如，他们可能会创建一个分散的应用程序，使用高度抗审查的区块链来跟踪资产所有权，使用高吞吐量的区块链来进行低延迟交易，使用隐私保护的区块链来识别用户身份，使用分散的存储区块链来存储元数据。

此外，跨链智能合约设计范例可用于在多个区块链网络上部署相同智能合约代码时实现更无缝的互操作性。这有助于在现有多链应用的不同链上环境中标准化用户体验。因此，跨链智能合约有助于解决现有多链智能合约的许多限制，从而实现全新的用例。为了展示跨链智能合约的无限潜力，这里有一些例子。

### 跨链交换

跨链[分散式交易所(DEX)](https://blog.chain.link/dex-decentralized-exchange/) 可以为用户提供执行交易的能力，这些交易从跨不同区块链网络的令牌池获取流动性，以此作为减轻多链 DEX 部署的流动性分散问题的一种方式。例如，在交易过程中，用户的输入令牌可以被分割并桥接至不同的区块链，以实现最佳执行价格，得到的输出令牌桥接回原始区块链并进入用户的钱包。其结果是，所有区块链网络的可获得流动性将显著增加，为用户提供更低的交易滑点，并为每个链上的流动性提供者提供更高的费用。

此外，跨链 dex 还可以被设计为使用户能够将他们在一个区块链环境中的本地令牌交换到另一个区块链环境中的本地令牌——例如，用户可以将区块链以太坊的 ETH 交换到比特币区块链的 BTC。这将使用户能够获得不同区块链平台上的本地资产，而无需包装令牌或集中交换。

### 跨链产量汇总

跨链收益聚合器可以将用户存放的资金部署到跨多链生态系统存在的各种不同的 DeFi 协议中。通过增加潜在收益产生源的范围，用户可以产生更大的收益，而无需手动跨越链桥接他们的代币并自己追逐最高收益。这将大大减少多链产量农业的摩擦，因为用户不需要手动跨越环境。相反，整个过程将被抽象掉。

这种设计还有助于增加新的和即将到来的链上环境中 DeFi 应用的总锁定价值，从而增加多链生态系统的流动性。

### 跨链借贷

跨链 [货币市场](https://blog.chain.link/decentralized-money-markets/) 可以促进跨链贷款的产生，使用户能够在一个区块链的市场上存放抵押品(如 ETH)，然后从另一个区块链的市场上借入代币(如 USDC)。这将允许用户将其抵押品保存在他们选择的高度安全的区块链上，同时在更高吞吐量的区块链上借用令牌，以部署到链上环境中的应用程序中。

跨链货币市场还可以让用户从另一个利率较低的区块链上的市场部署中借入代币，然后将借入的资金桥接回贷款开立的链。这可能有助于区块链收益率的标准化，从而降低借款人在流动性较低、借款利率较高的货币市场上的成本。

### 交叉链 DAOs

分散自治组织(Dao)可以利用跨链互操作性，在一个或多个更高吞吐量的区块链网络上实现链上投票，然后将结果转发回成本更高的区块链网络，该网络中存在协议的核心治理合同。这将通过降低"一体行动"参与者的交易成本，同时保持链上的透明度和每个参与者对审查的抵制，激励更多的参与。

此外，跨链 DAO 可以无缝方式管理和修改跨不同区块链网络的智能合约的参数，从而扩展了令牌持有者在一个或多个链上环境中可以管理的范围。

### 交叉链 NFTs

跨链 [不可替代令牌](https://chain.link/education/nfts)【NFT】市场可以允许用户对任何区块链网络上托管的 NFT 进行挂牌和竞价。这将有助于提高 NFT 的可访问性和流动性，并使它们在投标过程完成后能够无缝地跨越链上环境。此外，存在于一个区块链上的链上游戏应用程序可以利用跨链互操作性来跟踪另一个区块链上的 NFT 的所有权。这将允许用户将他们的 NFT 安全地存储在他们选择的区块链上，同时获得在任何其他区块链上的游戏应用程序中使用 NFT 的能力。

***

虽然这些只是跨链智能合约范例可能实现的用例的几个例子，但最终会有无限多的潜在用例。除了分散应用程序的模块化之外，跨链智能合约也可以以完全不同的方式设计，以利用多链生态系统的优势。

## 店面智能合同

通过部署 **店面智能合约**——智能合约作为另一个区块链网络上智能合约应用的网关，现有的单链或多链智能合约可以从跨链互操作性中受益匪浅。这些合同允许用户留在他们选择的区块链环境中，同时存放到在完全不同的链上环境中运行的现有分散应用程序中并与之交互。

用户将不再需要手动跨越区块链与只存在于另一个区块链上的智能合约进行交互，他们甚至可能不需要知道智能合约应用程序正在哪个区块链、侧链或第 2 层网络上运行。他们将能够访问该应用程序，就好像它只是在他们已经在进行交易的区块链上运行一样。

店面智能合约可以以向后兼容的方式附加到任何现有的分散式应用程序，如衍生品平台或货币市场。由于智能契约 的 [可组合性质，这将使得跨链互操作性能够以无许可的方式被添加到现有协议中。创建一个更加无缝和可互操作的生态系统将极大地推动多链经济的增长。](https://blog.chain.link/defis-permissionless-composability-is-supercharging-innovation/)

## CCIP 如何实现安全的跨链生态系统

虽然跨链智能合约代表了如何创建分散化应用程序的重大范式转变，但目前大规模运行的绝大多数区块链网络在默认情况下都是孤立的，这意味着它们无法在不同的区块链网络之间本地发送和接收数据。为了支持跨链智能合约，需要桥形式的附加基础设施来实现跨链通信。

到目前为止，区块链桥主要关注网络之间的令牌转移，通常是将一条链上的资产打包到另一条链上。然而，跨链智能合约需要更通用的桥来支持任意数据包、令牌和命令的传输。此类基础设施还必须高度安全、可靠，并基于经过审计的代码库，以便消息能够无讹误地传输、及时接收，并且能够抵御外部条件(如区块链重组)的影响。正如分散的甲骨文网络(DONs)帮助解决了 [区块链甲骨文问题](https://blog.chain.link/what-is-the-blockchain-oracle-problem/) (区块链无法访问链外资源)，它们也可以作为安全区块链互操作性的管道。

作为一种本机 [区块链不可知](https://blog.chain.link/chainlinks-blockchain-agnostic-design/) 协议，Chainlink 网络集成了广泛的区块链、侧链和第 2 层网络，使其能够很好地支持多链生态系统向跨链智能合约的转变。为了实现这个目标，一个名为 [跨链互操作协议](https://blog.chain.link/introducing-the-cross-chain-interoperability-protocol-ccip/) (CCIP)的跨链通信全球开源标准目前正在开发中。

与传统的跨链桥相比，CCIP 的目标是让智能合约能够以安全的方式跨任何区块链发送数据和/或令牌。智能合约可以以任何方式对数据消息进行编码/解码，从而在解释数据消息时支持很大程度的灵活性。重要的是，CCIP 将利用现有的高度可靠、防篡改和区块链不可知的[【chain link Oracle nodes】](https://blog.chain.link/what-is-a-chainlink-node-operator/)集合，这些集合已经在多链 DeFi 经济中帮助保护了数百亿美元的价值。

[https://www.youtube.com/embed/btbIgwJy29s?feature=oembed](https://www.youtube.com/embed/btbIgwJy29s?feature=oembed)

除了高质量的代码库，CCIP 还计划通过名为“反欺诈网络”的创新风险管理系统进一步加强安全。反欺诈网络由 don 组成，这些 don 由独立的节点委员会组成，独立于那些促进 CCIP 使能的桥，其唯一目的是监控 CCIP 服务的恶意活动和区块链网络条件，如块重组。这一额外的验证层可以启动桥的紧急关闭，从而暂停数据和令牌的传输，以帮助保护跨链智能合约和用户免受潜在黑天鹅事件的影响。

![Cross-Chain Interoperability Protocol (CCIP)](img/637063d64547dbafb6d557b830db213b.png)

<figcaption id="caption-attachment-3282" class="wp-caption-text">The Cross-Chain Interoperability Protocol (CCIP) will allow messages to be passed between blockchains.</figcaption>



数百个单链和多链智能合约应用程序已经在利用 Chainlink oracles 处理链外数据和信任最小化计算，这样的协议可以利用相同的分散基础设施来支持跨链互操作性。除了为创建跨链智能合约提供基础设施，CCIP 还将支持创建各种跨链令牌桥，允许用户直接将其令牌桥接到不同的区块链，以及如何部署这些令牌的命令。虽然创建跨链基础架构存在一些固有的挑战，但通过审计代码和防御措施确保最高级别的安全性是创建 CCIP 标准的重点。

## **结论**

当今的多链生态系统充满了创新，越来越多的开发者将他们的应用部署到额外的链上环境，以增加他们的用户群和牵引力。尽管多链智能合约设计模式存在一些限制，但跨链智能合约的引入不仅为克服这些限制提供了一个重要的机会，而且还因此开启了全新的用例。

CCIP 将致力于提供高度可靠和安全的跨链基础设施，帮助分散式应用安全地将任意数据传输到任何其他区块链网络上的智能合约，从而加速这一转变。正如没有人能够完全预测 20 世纪 90 年代早期互联网支持的所有未来用例一样，跨链智能合约支持的最具创新性的用例也尚未被发现。

如果你对用 CCIP 构建跨链功能感兴趣并想了解更多，请访问[【chain.link/solutions/cross-chain】](https://chain.link/solutions/cross-chain)或 [联系专家](https://chainlinkcommunity.typeform.com/to/OYQO67EF?page=blog) 。

要了解更多关于 Chainlink 的信息，请访问[chain . link](https://chain.link/)，订阅 [Chainlink 简讯](https://chn.lk/newsletter) ，并在 Twitter 上关注[@ chain link](https://www.twitter.com/chainlink)。

### **关于这个话题的更多信息**

*   [引入跨链互操作性协议(CCIP ),用于分散式链间消息传递和令牌移动](https://blog.chain.link/introducing-the-cross-chain-interoperability-protocol-ccip/)
*   [Chainlink 的区块链不可知设计:原生 Oracle 支持任何网络](https://blog.chain.link/chainlinks-blockchain-agnostic-design/)
*   [与 CCIP](https://blog.chain.link/unlocking-cross-chain-smart-contract-innovation-with-ccip/) 解锁跨链智能合约创新**