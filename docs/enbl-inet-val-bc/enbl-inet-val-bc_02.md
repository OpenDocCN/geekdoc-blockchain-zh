# Part II 如何在未来发展

© 作者（们），受 Springer Nature Switzerland AG 独家授权 2022N. Vadgama et al. (eds.)Enabling the Internet of ValueFuture of Business and Finance[`doi.org/10.1007/978-3-030-78184-2_3`](https://doi.org/10.1007/978-3-030-78184-2_3)

# Blockchains, DLTs and the Future of Payments

西奥多西奥斯·穆鲁齐斯（Theodosis Mourouzis）和尼古拉斯·马克鲁（Nikolas Markou）(1)Electi Consulting, Limassol, Cyprus(2)CTO, Electi Consulting, Limassol, Cyprus 西奥多西奥斯·穆鲁齐斯（Theodosis Mourouzis） Managing DirectorEmail: theodosis.mourouzis@electiconsulting.com 尼古拉斯·马克鲁（Nikolas Markou）(通讯作者)Email: nikolas.markou@electiconsulting.com 西奥多西奥斯·穆鲁齐斯

是 Electi Consulting 的 Managing Director，同时也是 UCL CBT 的行业合作伙伴。他是欧洲委员会组织的欧盟区块链合作伙伴计划的成员，并与劳埃德海事学院、劳埃德银行、美国海军、欧洲中央银行等许多其他领先公司和组织合作过。他拥有伦敦大学学院博士学位，专业是密码学。

尼古拉斯·马克鲁

是 Electi Consulting 的 CTO，这是一家专注于区块链技术和人工智能解决方案的精品咨询公司。他还是 UCL CBT 的研究员。作为一名终身技术专家，他拥有帕特拉斯大学的计算机工程学士/硕士学位和伦敦帝国学院的先进计算硕士学位。

## 1 DLT 和支付转型

围绕区块链和分布式账本技术（DLT）的炒作很大程度上集中在其改变金融服务业和银行业的潜力上。区块链承诺简化金融交易，降低其成本和复杂性，使未受银行服务的人群成为一个有可行性的新市场，并提高透明度和监管。

Blockchain technology enables specific features such as

+   支付网络中的双向消息传递与结算指令；

+   支付速度提高，几乎实时的结算，100%数字化；

+   支付的端到端跟踪透明度；

+   在启动前确认总成本和消息详情；

+   降低跨境交易的费用；

+   减少失败的支付和为解决错误而进行的昂贵干预；

+   历史交易数据的完整跟踪和错误概率的降低。

图 1 展示了今天的跨境支付是如何运作的，突出了基于大量孤立的中介机构的使用而出现的问题多样性。![../images/508554_1_En_3_Chapter/508554_1_En_3_Fig1_HTML.png](img/508554_1_En_3_Fig1_HTML.png)

图 1

今天国际支付流程中的低效率

区块链和 DLT 为验证、清算和记录引入了不同的逻辑（Ibañez 等人 2021b）。DLT 提供了现代化支付服务的光明前景。这种技术演变已经引发了市场需求的变革，邀请金融服务行业的创新和提高时间和成本效率。许多金融服务和科技巨头已经开始了合作，利用区块链改进支付和银行部门。表 1 展示了来自几个不同金融服务实体的几个区块链项目。表 1

金融服务部门的几项区块链和 DLT 倡议

| 实体 | 产品类型 | 应用 |
| --- | --- | --- |
| Mastercard | 基于区块链的 API | 利用区块链发送资金以及奢侈品原产地证明 |
| R3 | Corda | 用于即时转账的支付 |
| 瑞波 | 原生区块链 | 交易所网络 |
| SWIFT | 作为概念验证 | 实时调和他们的国际账户，优化他们的全球流动性 |
| 摩根大通 | 银行间信息网络 | 区块链支付网络，以响应合规和其他支付延迟 |
| Libra 协会 | LibraCoin | 使用底层 Libra 币进行 P2P 转账 |
| 英格兰银行 | RS Coin | 工作方式更加集中的比特币类似数字货币 |
| IBM | IBM 区块链世界 Wire | 跨境支付的清算和结算 |
| 三菱东京日联银行 | J-Coin Pay | 作为银行的数字货币平台 |

使用区块链技术解决支付和清算结算方法中的低效率（Karaindrou 2017）将给我们提供一个适合现代时代的支付网络。使用 DLT 的潜在好处如下：

+   **降低交易成本**：目前，比特币交易的平均处理费为 0.04 美分（其他区块链网络的费用甚至低于此）与典型的信用卡交易的 0.35 美分以上相比。

+   **用 DLT 替换繁琐的后台程序**：在现有的支付网络和基础设施中（无论网络是集中式还是分布式）记录保存是几个银行-客户关系的一部分。记录在多个中介之间重复，然后通过后台程序进行对账，引入了差异或时间滞后的风险，导致同一资产的双重花费。基于 DLT 的解决方案可以实现数据的对等共享，与单一真相版本进行对账（Ibañez 等人 2021a）。

+   **价值链上的速度**：减少对账程序和提高数据处理能力可能会导致更多交易实时结算。

+   **欺诈检测能力**：欺骗性支付或篡改合同的可能性极低，且成本过高，无法获得利润。不可变账本的存在使得实时跟踪交易非常高效。

+   **自动化合同工具**：分布式账本技术具有可编程性，可以与通过智能合同应用程序进行自我执行的应用程序相结合。自我执行的交易将最小化成本，最大化时间效率，消除人为错误。此外，它们还将确保存储在账本上的金融协议的执行力。

+   **更优的 KYC 和身份管理**：关于客户的国际可传输数据和实时情报共享消除了欺诈的可能性。

+   **更好的身份管理**：现有的身份管理系统存在许多继承的隐私和安全问题，特别是对终端用户而言。区块链和分布式账本技术可能是解决这些问题的关键。加密和其他保护隐私的加密原语，如零知识证明，带来了自我主权身份（SSI）的概念。需要验证其他用户信息的实体可以这样做，而不必跟踪和存储他们的数据。

+   **自动化合规和监管**：自动化合规对于处理数据的组织（如银行和政府）的整合是有益的。监管可以提供许多好处，包括与手动控制相比降低时间和成本要求。合规状态和审计信息可以在单一账本内访问和检查，并且是实时的。可以根据实时数据做出风险管理决策。分布式账本技术还可以减少合规罚款、违规行为和报告错误。最后，分布式账本技术可以，重要的是，导致持续可验证的合规要求。

支付、清算服务、结算服务和中央银行的主要参与者正在投资于分布式账本技术（DLT），他们设想建立高科技、健壮、安全、自动化、具有韧性和时间效率的支付系统。然而，由于这项技术仍在成熟阶段，银行在全球范围内使用区块链面临重大挑战。这些挑战包括：

+   **可扩展性**：区块链具有全球交易限制。

+   **隐私**：在公共账本和共享账本之间选择时，可以使用诸如零知识证明（ZK-SNARKs）、混沌网络（MixNets）和零知识证明等隐私保护技术来隐藏与交易有关的信息，这意味着可能会出现洗钱的可能性。

+   **互操作性**：区块链需要所有人使用同一个账本，目前还没有统一的数据显示模式或协议来涵盖区块链的许多组成部分，如共识和验证。

+   **监管**：在适当的框架内使用数字资产进行交易目的。

## 2 向高效和自动化的 M2M 交易迈进

机器对机器（M2M）连接市场预计到 2023 年将达到 270 亿美元，2017 年至 2023 年的复合年增长率（CAGR）为 4.6%（MarketsandMarkets![$${}^\mathrm{TM}$$](img/508554_1_En_3_Chapter_TeX_IEq1.png) 2017）。根据同一报告，2016 年 M2M 连接的数量为 147 亿，预计到 2023 年将达到 300 亿。增长的主要驱动力是新兴经济体对互联网的大规模采用，以及物联网（IoT）基础设施的快速发展。

物联网背后的关键概念是一系列自主行动的连接设备，它们在全球范围内自我通信，并以自动化的方式运行，尽可能减少人为干预。物联网正在改变我们的生活方式，并将对我们的日常活动产生重大影响。从自我调节温度的家居到使用智能技术（如智能交通信号灯和智能路由算法）自主运行的城市，物联网的价值似乎无穷无尽。未来已来：许多家用设备已经连接到互联网，并帮助自动化日常任务。

然而，在更广泛地采用之前，仍然有许多挑战需要解决，例如兼容性问题、不可信的通信路径、数据保护问题和网络安全问题。一个重要的问题是支付网络问题，因为我们希望实现完全自动化和自我执行。这意味着任何货币奖励或支付都需要是实时的，而不是现在的两到三天。这些支付需要极低成本，因为它们将是大多数情况的微交易。

2017 年，根据 Gartner 分析师的数据，“大约有 84 亿个物联网设备。到 2020 年，这个数字可能超过 200 亿，到 2030 年可能超过 5000 亿”。这种连接革命的深远影响远不止智能手机和私人住宅。物联网即将在更大的工业规模上应用，从冰箱到农业，再到医疗保健（徐和霍伊斯 2018），这在很大程度上是不可想象的。

由于能够进行自动化和自我执行的交易，物联网与区块链技术的结合预计将进一步扩大。智能合约可以编码条件、协议和约束，并在某些假设成立时自动执行它们。

将物联网与区块链合并，我们可以创建一个安全、可验证、透明且不可篡改的数据记录方法，智能机器可以以自动的、透明的和自我执行的方式处理这些数据。“智能”机器可以通过部署智能合约与外界互动，做出决策，而无需任何人为干预。

数据驱动技术，如机器学习（ML）和人工智能（AI），可以并行部署以创建关于编码到智能合约中的条件和约束的高精度预测。这些技术还可以预测网络的“状态”和活动，精度非常高。预测能力将使程序自动化和主动行动成为可能。

由于物联网设备的指数级增长，机器对机器的支付解决方案是下一个合乎逻辑的步骤（MarketsandMarkets![$${}^\mathrm{TM}$$](img/508554_1_En_3_Chapter_TeX_IEq2.png) 2017). 当应用于 M2M 时，人工智能（AI）和机器学习（ML）使系统能够相互通信并做出自己的自主选择（基于硬编码条件或通过 AI 算法预测的高精度条件）。智能合约将显著降低正式化、达成和执行合同以及支付的成本。区块链上的自主代理承诺消除代理和协调成本，或许还能导致高度分布式企业，其管理成本降低甚至为零。

全球有数十亿个物联网设备连接，用不了多久，几乎所有的设备和技术都将通过物联网协议连接。机器对机器支付可以包括多种场景，如基于我们不知情的客户行为交易，健康和财务诊断工具等许多其他场景。

区块链远不止是一个分布式账本，可以被认为是一个高度安全和可信赖的数据总线。区块链网络的参与者可以信任通过区块链传输的数据，交易签名允许验证数据的来源和完整性。这意味着我们可以确信数据的来源，并确保在传输过程中没有被修改。区块链和分布式账本技术（DLTs）解决了数据科学生命周期中的重大挑战，包括：

+   缺乏适当的数据治理；

+   缺乏数据定义和存储协议：数据定义不明确，混淆了适当的管理方法。因此，我们错过了很多机会，在许多情况下，不同的数据源不能在数据分析项目中结合；

+   缺乏数据安全程序，导致数据损坏或被修改；

+   在不同架构的多处来源中存储了大量无用的数据；

+   使用不同程序和协议记录的不一致数据：不一致性是数据质量问题的一个重要指标；

+   没有正式程序记录的错误数据；

+   数据恢复能力差。

众所周知，糟糕的数据质量无法通过任何统计论证来挽救，而区块链是一个保证数据真实性的中间步骤。在计算机科学语言中，这被称为 GIGO（垃圾进，垃圾出）。区块链使我们能够解决上述所有问题，因为数据编码和数据传输协议被硬编码到全球公共网络中。在通过硬编码和透明的共识算法获得整个网络的批准后，数据被写入去中心化数据库。因此，数据质量得到保证，因此 AI 和 ML 算法的潜力更大，因为数据是正确和值得信赖的。

“区块链技术，如智能合约，为 M2M 通信提供了一个独特的接口，并提供了可以无需信任和中心管理员即可共享的安全的只增记录”（Hanada 等人 2019）。智能合约被认为是物联网应用的一个真正的游戏改变者。

通过编码逻辑和约束，可以创建在满足某些条件和约束时执行的协议。这对于各种场景非常有用，例如在情况表明服务已经提供时授权支付。在这里，消费者与他们连接的设备（或确实相互连接的设备）之间的所有互动都以一种透明、防篡改、不可变且无摩擦的方式处理。

此外，区块链可能内置了一种加密货币，它能够为参与者提供一种激励方式来进行经济交易。因此，区块链应为连接的物联网设备在 M2M 经济中安全交换数据和自主互动提供理想的底层架构。

例如，智能合约可以保证为表现出更好性能的智能家居电器系统提供电力账单折扣或在内部代币奖励中，或者增加对可再生能源的使用。以下是一些终端用户应用 M2M 连接的示例（MarketsandMarkets![$${}^\mathrm{TM}$$](img/508554_1_En_3_Chapter_TeX_IEq3.png) 2017):

+   **医疗保健**：预计这个领域会出现许多应用，比如患者监控系统、跌倒检测器、智能药丸分配器、远程医疗等等。所有这些设备都将互联，并将数据流传输给医生，从而采取主动措施。区块链可以用来确保不仅数据所有者的数据得到释放，而且数据质量（在这种情况下非常重要）也得到保证。M2M 连接可能会在医院中用于管理患者的静脉注射，当患者的生命体征降至一定水平以下时。

+   **公用事业**：例如智能电网和智能仪表的应用。有很多区块链应用；在这种情况下，激励措施可以构建到网络中，以促进使用更高效的机器，减少电力消耗并增加可再生能源的使用。

+   **汽车与交通**：远程信息处理、车队跟踪/监控、供应链能力和采购能力。

+   **零售**：智能自动售货机、无接触结账/POS、数字标牌和自动化订购。可以利用区块链技术建立更好的忠诚度计划，但食品生命周期的全程跟踪和采购也将可用并透明。机器间通信（M2M）的最基本用途之一可能是一个当其库存降至一定点以下时自主联系其分销公司的自动售货机。

+   **消费电子**：智能电视、智能家电、智能冰箱、智能洗衣机、智能烤箱和智能炉灶。

+   **安全和监控**：商业和住宅安全以及远程监控，并通过自动化智能共享实现。

区块链可以显著改进上述所有应用，因为其集成将确保透明度、自主执行和速度。它将提供一种通过代币化激励所需行为的生态系统方法。

20 世纪 90 年代互联网的广泛使用改变了我们沟通的方式， forever. More than 30 years later, this technology, which initially seemed so foreign, has become an integral part of our daily lives. 物联网，与区块链技术相结合，正在为信息和技术演化的下一步奠定基础。

© 作者（们），受 Springer Nature 瑞士 AG 独家授权 2022N. Vadgama 等人（编辑）使价值互联网成为可能商业与金融的未来[`doi.org/10.1007/978-3-030-78184-2_4`](https://doi.org/10.1007/978-3-030-78184-2_4)

# 共识：工作量证明、权益证明和结构替代方案

Nicola Dimitri（尼古拉·迪米特里）(1  )（1）意大利锡耶纳大学政治经济学与统计学系，锡耶纳，意大利尼古拉·迪米特里电子邮箱：dimitri@unisi.it 尼古拉·迪米特里

是意大利锡耶纳大学教授（经济学），伦敦大学学院行为中心（CBT）研究合作者，英国剑桥大学克莱尔霍尔学院终身会员。他的研究兴趣集中在区块链与加密货币、博弈与决策理论、机制设计与公共采购。他在国际知名同行评审期刊上发表了广泛的论文。

比特币实现的区块链版本基于一种名为工作量证明（PoW）的共识机制（Narayanan 等人 2016；Antonopoulos2017）。也就是说，希望确认交易区块并获得相关奖励的节点必须解决一个需要计算能力的密码学难题。试图解决问题的人，所谓的*矿工*，彼此竞争以*最先*提出解决方案，这种竞争目前导致了比特币社区的大量能耗。PoW 背后的核心直觉虽然简单易懂，但概念上很深刻。愿意竞争以确认交易区块的节点必须投入资源。作为回报，节点有强大的激励措施来保持系统正确发展，限制对系统的恶意攻击。

如果投入到*挖矿*的资源是*沉没成本*，也就是说，完全致力于这一目标并且对其他目标没有用处，那么激励措施将会更强。然而，许多有意义的花费被许多人认为是浪费，因为它们支持高能耗来解决对社会整体没有即时益处的谜题。

然而，正是由于这些非常高的能耗要求，以及与可扩展性和速度相关的问题（Perez 等人 2020），近年来对基于 PoW 的区块链模型的可持续性产生了担忧。这导致了多种与受比特币启发的区块链框架不同的 DLT 模型。

为了尝试解决或减轻与能耗、可扩展性、安全性和速度相关的区块链问题，出现了一类新的 DLT 结构。其中一种结构是基于有向无环图（DAG）。Latora 等人(2017)提出了在其他情况下出现的 DAG 结构，例如引用网络（Goldberg 等人 2015），并被认为可能是有助于解决区块链相关问题的解决方案。与区块链不同，DAG 中数据不是存储在有序的区块序列中，每个区块都有有限的容量，而是存储在单个区块/账本中，没有预先指定的容量限制。

IOTA 加密货币是数据审批和存储与 DAG 工作方式的一个有趣例子。IOTA 成立于 2015 年，旨在解决比特币出现的一些问题。

## 1 IOTA 和 Tangle

第一个问题与能耗有关，通过消除比特币中矿工和用户之间的区别可以大量减少能耗。实际上，IOTA 网络的每个节点*既可以作为矿工也可以作为用户*。在 IOTA 中，几乎不需要消耗能量来审批交易。

在 IOTA 中，区块的序列被所谓的*Tangle*（Popov 2018）所取代，这是自 IOTA 成立以来执行的交易集合。这个术语已经传达了这样一个想法：即已批准的交易不是以区块的形式组织的。实际上，*Tangle*的基础结构是最小的，它代表了 IOTA 中 DAG 的基础本质。这个结构由一组节点和一组方向性链接组成，每个链接将一个节点连接到一对节点。

下面讨论了*Tangle*中节点和链接的解释。在*Tangle*中，网络中的每个节点都可以是矿工和用户。因此，与比特币不同，无需 significant energy consumption 即可批准交易。具体来说，交易批准的工作方式如下：除非是代币的初始分配，任何希望加入*Tangle*的新交易（称为 Tip），都需要批准已经在账本中出现的交易对。

因此，*Tangle*中的节点代表交易，而连接一个节点到两个节点的直接链接代表批准。然而，当*Tip*在*Tangle*中批准一个交易时，它并不确立该交易的确切有效性。与其他收到的批准一起，它有助于该交易的有效性。批准一个交易可以看作是对该交易进行投票的类似过程：获得的批准越多，该交易有效的可能性就越大，并最终成为账本的确切部分。

在比特币中，交易具有时间戳，描述系统的时序演变。在*Tangle*中，每个交易的时间戳对于理解系统的时序演变至关重要（或许比比特币还要重要），而*Tangle*并非如比特币那样以区块形式组织。

上述描述立即阐明了*Tangle*为何具有最小结构的原因。此外，交易批准不需要矿工之间进行昂贵的竞争。这使得 IOTA 适合于小额货币交易，而在比特币中，这些交易可能会提供低或无交易费用以获得确认，这可能会延迟或甚至阻止其被插入区块。

与其他共识机制一样，*Tangle*也难免会出现故障或遭受恶意攻击。一个故障的例子是，*Tip*（*Tangle*中尚未获得批准的交易）可能会在很长一段时间内没有获得批准（即使*Tip*中没有双重花费）。也存在双重花费攻击的可能性。当一个包含已在其他交易中花费的 IOTA 单位的交易被批准时，这种攻击就会发生。战略上，这是通过攻击者故意执行多个小额货币交易来实现的。这些小额交易是有效的，并且可以为无效交易提供足够多的可接受批准。

上述两个例子说明，尽管像 IOTA 这样的 DAG 分布式账本可以解决一些与比特币区块链系统相关的问题，但它们仍然容易受到结构问题和恶意攻击的影响。

## 2 权益证明

已经提出了各种共识机制（Wang 等人 2019），以节省能源开支并加快与比特币（Platt 等人 2021）相比的交易速度。本节讨论了一些替代工作量证明（PoW）的方案。分析共识机制至关重要，因为错误的系统运行可能会带来短期和长期的影响。

目前，PoW 的主要替代方案是权益证明（PoS）。在比特币中，区块包含了已确认的交易。PoS 背后的原始想法是：系统随机选择一个用户，以其钱包*coinage*成比例的概率，来确认下一个区块（Bentov 等人 2014; Narayanan 等人 2016）。货币单位的*coinage*由其未花费的区块数决定。钱包的*coinage*由钱包中每个单位的*coinage*总和决定。例如，假设一个用户在他的钱包里拥有两个货币单位。一个已经三个区块未花费，另一个是四个区块。在这种情况下，钱包的*coinage*等于七。一旦一个单位被花费并转移到另一个钱包，它的*coinage*就变为零，直到它在新钱包中再次未花费一些区块。

PoS（BitFury Group 2015）最初是在 2012 年由*Peercoin*加密货币（Bentov 等人 2014）提出的，是一个*混合*版本，其中也包含了 PoW。在这里，块的挖掘仍然基于通过 PoW 解决一个密码学难题；然而，难度与用户的钱包*coinage*成反比。因此，在这种混合 PoW-PoS 框架中，计算能力的不足可以用高*coinage*值来替代，从而潜在地节省能源消耗。这样的系统可以激励先花费*coinage*值低的货币单位，然后是那些*coinage*值高的货币单位。然而，这种行为可能导致社区内的交易不频繁，个人可能更感兴趣的是存储货币（以增加将来获得额外单位的概率）而不是交换它。因此，区块链系统可能会最终变成像彩票一样的存在，货币单位扮演彩票的角色。

最近，又有更多的权益证明（PoS）版本被提出（Kiayias 等人 2017）。在*Blackcoin*采用的 PoS 版本中，已经消除了*coinage*（Vasin 和 Co 2014）。新兴平台如 Algorand（Chen 和 Micali 2019），以及更成熟的平台如以太坊（Buterin 和 Griffith 2017），都在考虑将 PoS 作为其共识过程的一部分。

有趣的是，Algorand 采用的 PoS 版本让人联想到中世纪公社时代采用的旋转标准。在那里，政治和行政官员定期更换以防止出现主导和独裁职位。正如我们将要看到的，在 Algorand 中，轮换适用于区块的提议者。

在 Algorand 中，PoS 通过随机选择用户扮演特定角色来运作。例如，用户可能被选中来提出一个新的交易区块。或者，他们可能被选为就某个特定问题进行投票的委员会的一部分。这是 PoS，因为用户被随机抽取，其概率与他们在系统中拥有的货币单位数量成正比。更具体地说，如果*A*是系统中的总货币单位数，在 Algorand 中称为*Algo*，而*a*是用户拥有的单位数，那么 ![$$p = \frac{a}{A}$$](img/508554_1_En_4_Chapter_TeX_IEq1.png) 是这样的用户被选中担任给定角色的概率。

拥有更高权益的个人更有可能被选中并再次被选中。因此，为了防止频繁重新选举以及针对委员会成员的恶意活动，一旦用户被选中，在接下来的几轮中他不能再次被选中。为了防止机会主义行为和对委员会成员的攻击，每个成员只知道他们是否被选中。这是通过可验证的随机函数（Micali 等人 1999）实现的。

自以太坊平台成立以来，PoW 与基于 PoS 的共识过程的替换就在社区内进行了讨论。新的共识机制被称为 Casper，与 Algorand 一样，它基于假设三分之二的用户行为诚实。这个假设意味着，如果不到三分之一的用户采取敌对行为，系统可以保持正确运行。这是系统的拜占庭容错阈值。

以太坊提出的 PoS 也包含了解决*无利害关系*问题的特性，这可能导致恶意攻击。这个问题可能在 PoS 下出现，因为与 PoW 不同，获取货币单位不是昂贵的，而且它们的复制没有成本。出于这个原因，Casper（最终版本尚未完成）的主要元素被设计如下。与比特币和 Algorand 一样，验证的交易被存储在区块链上。然而，与这些平台不同，为了加快并扩大块验证，这并不是逐块执行，而是在预定义的区块数之后定期执行。验证在称为*检查点*的块上进行。任何拥有最少量货币单位的用户都可以成为验证者。

如果他们提出的区块被批准，验证者可以获得一些货币单位。然而，为了防止 *nothing at stake* 问题，验证者必须存入一定数量的货币单位，这些货币单位代表了他们在系统中的 *stake*。PoS 就在这里发挥作用。然后，验证者可以利用他们的 *stake* 投票批准哪些区块，社区的存款总数。如果提出的区块违反了两个特定的 Casper 规则（插入以避免链上的分叉和双重花费），那么在攻击被发现后，用户的 *stake* 将立即被 *slashed* 并损失。

因此，存款对应于对攻击者的敌对行为所施加的惩罚。有趣的是，在选择存款规模时，潜在的攻击者面临一个权衡：存款越大，批准特定区块（其中包含双重花费交易）的概率越高，但如果他们的不诚实行为被发现，惩罚也越大。因此，如果及时发现攻击者，Casper 的减产机制可以有效地阻止对以太坊区块链的攻击。

与 PoW 相比，PoS 的采用大幅减少了电力消耗。然而，共识和监控程序必须有效，以防止超过三分之一的用户能够攻击系统。

让我们通过一个简单的数值例子来了解 Casper 是如何工作的。假设一个用户拥有 100 个*以太币*（以太坊的货币）。此外，假设他们决定用![$$0 \le d \le 100$$](img/508554_1_En_4_Chapter_TeX_IEq2.png)的*d*个以太币来建立一个存款。这些*d*以太币是用户的*赌注*。此外，假设整个社区总共存入了 1000 个以太币。在确定*d*应该有多大时，用户可以考虑以下权衡。假设他们提出一个包含双重支付交易的区块，其价值对应于*x*个以太币。现在假设*p*是在批准后检测到块的概率，*r*是在块批准的情况下获得的奖励。此外，假设*D*是预计会为该特定区块投票的用户的存款大小。基于这些假设，用户在攻击时的效用![$$U_a(d)$$](img/508554_1_En_4_Chapter_TeX_IEq3.png)，将是一个由以下定义的随机变量![$$\begin{aligned} U_a (d) = {\left\{ \begin{array}{ll} 100+(x+r) &amp;{} \text { with \ probability \ } (1-p) \frac{(d+D)}{1000} \\ 100 &amp;{} \text { with \ probability \ } 1-\frac{(d+D)}{1000} \\ 100-d &amp;{} \text { with \ probability \ } p \frac{(d+D)}{1000} \end{array}\right. } \end{aligned}$$](img/508554_1_En_4_Chapter_TeX_Equ7.png)他的预期效用将由![$$\begin{aligned} E U_{a}(d)=100+\frac{(x+r)(1-p)(d+D)}{1000}+\frac{(100-d) p(d+D)}{1000} \end{aligned}$$](img/508554_1_En_4_Chapter_TeX_Equ1.png)(1)求导。使等式 1 中的*d*等于零，可以得到最大化等式 1 的存款![$$d_a$$](img/508554_1_En_4_Chapter_TeX_IEq4.png)的最佳值，如![$$\begin{aligned} \max \left( 0, \min \left( d_{a}=\frac{(x+r)(1-p)}{2 p}-\frac{D}{2}+50,100\right) \right) \end{aligned}$$](img/508554_1_En_4_Chapter_TeX_Equ2.png)(2)有趣的是，等式 2 的值随着*x*的增加而增加，随着*D*和*p*的增加而减少。因此，由等式 2 给出的*d*的值大于 50，即可用货币单位的一半，如果![$$\begin{aligned} \frac{(x+r)}{D}&gt;\frac{p}{(1-p)} \end{aligned}$$](img/508554_1_En_4_Chapter_TeX_Equ3.png)(3)即如果比率![$$\frac{(x+r)}{D}$$](img/508554_1_En_4_Chapter_TeX_IEq5.png)大于几率比![$$\frac{p}{(1-p)}$$](img/begin{aligned} U(b)= {\left\{ \begin{array}{ll} 100+r-b &amp;{} \text{ with } \text{ probability } \frac{b}{1000} \\ 100 &amp;{} \text{ with } \text{ probability } 1-\frac{b}{1000} \end{array}\right. } \end{aligned}$$](../images/508554_1_En_4_Chapter/508554_1_En_4_Chapter_TeX_Equ10.png)因此![$$\begin{aligned} E U(b)=100+\frac{(r-b) b}{1000} \end{aligned}$$](img/508554_1_En_4_Chapter_TeX_Equ5.png)(5)所以最优 ![$$b_o$$](img/508554_1_En_4_Chapter_TeX_IEq13.png) 由![$$\begin{aligned} b_{o}=\frac{r}{2} \end{aligned}$$](img/508554_1_En_4_Chapter_TeX_Equ6.png)即，在用户被选中验证下一个区块的情况下，烧毁的货币单位最佳数量是用户获得奖励的一半。将式 6 插入式 5 中，期望效用变为![$$E U\left( b_{o}\right) =100+\frac{r^{2}}{4000}$$](img/508554_1_En_4_Chapter_TeX_Equ11.png)这意味着在 PoB 下，用户的期望效用大于 100，并且随着区块验证奖励的平方增长。如果上述分析是 PoB 可能发生情况的合理描述，并且如果 r 是一个相对较小的奖励，那么 ![$$b_o$$](img/508554_1_En_4_Chapter_TeX_IEq14.png) 也是一个较小的数额。

DLT 是一个仍在快速发展中的领域（参见第“区块链、分布式账本与支付的未来”章）。前文讨论了从共识机制的角度，分布式账本技术（DLT）可能如何发展，从比特币的工作量证明（PoW）开始，到有向无环图（DAG）、权益证明（PoS）和证明 of 烧伤（PoB）。到本节可用时，它可能已经部分过时。尽管如此，它仍然可以帮助读者导航分布式账本技术（DLT）这一迷人领域。
